2017-06-20T12:17:08.5743700-03:00  [INF] User profile is available. Using '"C:\Users\bruun\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2017-06-20T12:17:09.4349453-03:00 0HL5NTTLNNNQ3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/api/Health   (e5be5b71)
2017-06-20T12:17:10.6387485-03:00 0HL5NTTLNNNQ3 [INF] Executing action method "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:17:10.7588294-03:00 0HL5NTTLNNNQ3 [INF] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext". (4e968210)
2017-06-20T12:17:11.1681002-03:00 0HL5NTTLNNNQ3 [INF] Executed action "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" in 580.743ms (afa2e885)
2017-06-20T12:17:11.1961185-03:00 0HL5NTTLNNNQ3 [INF] Request finished in 1996.799ms 200 text/plain; charset=utf-8 (15c52c40)
2017-06-20T12:17:41.7980823-03:00 0HL5NTTLNNNQ4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http://localhost:8080&response_type=token&scope=calemas&state=14979718610860.5224078975867519   (e5be5b71)
2017-06-20T12:17:41.8220971-03:00 0HL5NTTLNNNQ4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:17:42.2403761-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (50ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:17:42.3574540-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:17:42.3864752-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (7ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:17:42.3944806-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:17:42.4024847-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:17:42.4124950-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:17:42.4265031-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:17:42.4355114-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:17:42.4455132-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:17:43.3391107-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:17:43.4221651-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:17:43.4411788-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:43.4571882-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:43.4772016-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:17:43.5202301-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:17:43.7113586-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:17:43.7163617-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:17:43.7273701-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:43.7373755-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:43.7463809-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:17:43.7643930-03:00 0HL5NTTLNNNQ4 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:17:44.0906110-03:00 0HL5NTTLNNNQ4 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979718610860.5224078975867519\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979718610860.5224078975867519\"
  }
}" (9a175e33)
2017-06-20T12:17:44.0986163-03:00 0HL5NTTLNNNQ4 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-20T12:17:44.1176296-03:00 0HL5NTTLNNNQ4 [INF] Request finished in 2318.9791ms 302  (15c52c40)
2017-06-20T12:17:44.1246341-03:00 0HL5NTTLNNNQ5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979718610860.5224078975867519   (e5be5b71)
2017-06-20T12:17:44.4368419-03:00 0HL5NTTLNNNQ5 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080&response_type=token&scope=calemas&state=14979718610860.5224078975867519"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:17:44.4628593-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:17:44.4668628-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:17:44.4718663-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:17:44.4758678-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:17:44.4798704-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:17:44.4828731-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:17:44.4868757-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:17:44.4898783-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:17:44.4938802-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:17:44.4968824-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:17:44.5008842-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:17:44.5118926-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:44.5198975-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:44.5309047-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:17:44.5529194-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:17:44.5549211-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:17:44.5559220-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:17:44.5559220-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:44.5569225-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:17:44.5569225-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:17:44.5579225-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:17:44.5669291-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:17:44.5679296-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:17:44.5689301-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:17:44.5699322-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:17:44.5709318-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:17:44.5709318-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:17:44.5719323-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:17:44.5719323-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:17:44.5729335-03:00 0HL5NTTLNNNQ5 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:17:47.6059586-03:00 0HL5NTTLNNNQ5 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-20T12:17:48.1733345-03:00 0HL5NTTLNNNQ5 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 3988.8085ms (afa2e885)
2017-06-20T12:17:48.1783384-03:00 0HL5NTTLNNNQ5 [INF] Request finished in 4053.9018ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:17:49.0893925-03:00 0HL5NTTLNNNQ6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-20T12:17:49.1044027-03:00 0HL5NTTLNNNQ6 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-20T12:17:49.1454311-03:00 0HL5NTTLNNNQ6 [INF] Request finished in 56.5837ms 200 text/css (15c52c40)
2017-06-20T12:17:49.2354908-03:00 0HL5NTTLNNNQ7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-20T12:17:49.2364921-03:00 0HL5NTTLNNNQ7 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-20T12:17:49.2374921-03:00 0HL5NTTLNNNQ8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-20T12:17:49.2394943-03:00 0HL5NTTLNNNQ8 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-20T12:17:49.2535024-03:00 0HL5NTTLNNNQ7 [INF] Request finished in 18.1257ms 200 application/javascript (15c52c40)
2017-06-20T12:17:49.2545033-03:00 0HL5NTTLNNNQ8 [INF] Request finished in 17.2796ms 200 application/javascript (15c52c40)
2017-06-20T12:18:01.9903020-03:00 0HL5NTTLNNNQ9 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979718610860.5224078975867519 application/x-www-form-urlencoded 437 (e5be5b71)
2017-06-20T12:18:02.1464066-03:00 0HL5NTTLNNNQ9 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:18:02.2397960-03:00 0HL5NTTLNNNQ9 [INF] Executed DbCommand (25ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-20T12:18:02.3068410-03:00 0HL5NTTLNNNQ9 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T12:18:02.3118441-03:00 0HL5NTTLNNNQ9 [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080&response_type=token&scope=calemas&state=14979718610860.5224078975867519". (d98d540e)
2017-06-20T12:18:02.3128450-03:00 0HL5NTTLNNNQ9 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 307.5113ms (afa2e885)
2017-06-20T12:18:02.3138462-03:00 0HL5NTTLNNNQ9 [INF] Request finished in 323.6571ms 302  (15c52c40)
2017-06-20T12:18:02.3188514-03:00 0HL5NTTLNNNQA [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080&response_type=token&scope=calemas&state=14979718610860.5224078975867519   (e5be5b71)
2017-06-20T12:18:02.3288561-03:00 0HL5NTTLNNNQA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:18:02.3298565-03:00 0HL5NTTLNNNQA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:18:02.3308578-03:00 0HL5NTTLNNNQA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-20T12:18:02.3348597-03:00 0HL5NTTLNNNQA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:18:02.3408641-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:18:02.3528721-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (11ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:18:02.3558739-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:18:02.3578764-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:18:02.3618795-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:18:02.3648801-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:18:02.3678823-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:18:02.3708833-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:18:02.3738859-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:18:02.3788894-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:18:02.3828913-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:18:02.3898966-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:18:02.3969010-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:18:02.4039067-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:18:02.4219179-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:18:02.4239197-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:18:02.4249201-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:18:02.4259227-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:18:02.4259227-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:18:02.4269215-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:18:02.4269215-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:18:02.4279219-03:00 0HL5NTTLNNNQA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:18:02.4279219-03:00 0HL5NTTLNNNQA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979718610860.5224078975867519\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979718610860.5224078975867519\"
  }
}" (9a175e33)
2017-06-20T12:18:02.4530673-03:00 0HL5NTTLNNNQA [INF] Executed DbCommand (3ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:18:02.9183779-03:00 0HL5NTTLNNNQA [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080\",
  \"State\": \"14979718610860.5224078975867519\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:18:02.9383896-03:00 0HL5NTTLNNNQA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:18:02.9513989-03:00 0HL5NTTLNNNQA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:18:02.9554020-03:00 0HL5NTTLNNNQA [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T12:18:02.9684105-03:00 0HL5NTTLNNNQA [INF] Request finished in 650.0397ms 302  (15c52c40)
2017-06-20T12:27:48.8912907-03:00  [INF] User profile is available. Using '"C:\Users\bruun\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2017-06-20T12:27:49.2145061-03:00 0HL5NU3KD3O0D [INF] Request starting HTTP/1.1 GET http://localhost:4000/api/Health  0 (e5be5b71)
2017-06-20T12:27:49.4220394-03:00 0HL5NU3KD3O0D [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:27:49.4460538-03:00 0HL5NU3KD3O0D [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:27:50.0214370-03:00 0HL5NU3KD3O0D [INF] Executing action method "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:27:50.0624671-03:00 0HL5NU3KD3O0D [INF] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext". (4e968210)
2017-06-20T12:27:50.1605296-03:00 0HL5NU3KD3O0D [INF] Executed action "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" in 197.3808ms (afa2e885)
2017-06-20T12:27:50.1935514-03:00 0HL5NU3KD3O0D [INF] Request finished in 1003.4123ms 200 text/plain; charset=utf-8 (15c52c40)
2017-06-20T12:27:53.2633514-03:00 0HL5NU3KD3O0E [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=%27http://localhost:8080/   (e5be5b71)
2017-06-20T12:27:53.2643544-03:00 0HL5NU3KD3O0E [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:27:53.2643544-03:00 0HL5NU3KD3O0E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:27:53.2773632-03:00 0HL5NU3KD3O0E [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:27:53.2993796-03:00 0HL5NU3KD3O0E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:27:53.5075143-03:00 0HL5NU3KD3O0E [ERR] malformed redirect_uri: 'http://localhost:8080/
"{
  \"SubjectId\": \"1\",
  \"RequestedScopes\": \"\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"'http://localhost:8080/\"
  }
}" (ddcacb6f)
2017-06-20T12:27:53.5095156-03:00 0HL5NU3KD3O0E [ERR] Request validation failed (abd529bc)
2017-06-20T12:27:53.5095156-03:00 0HL5NU3KD3O0E [INF] "{
  \"SubjectId\": \"1\",
  \"RequestedScopes\": \"\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"'http://localhost:8080/\"
  }
}" (9899f104)
2017-06-20T12:27:53.5735592-03:00 0HL5NU3KD3O0E [INF] Request finished in 310.8391ms 302  (15c52c40)
2017-06-20T12:27:53.5825662-03:00 0HL5NU3KD3O0F [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=dc5a58af84031513cd80f090162603a4   (e5be5b71)
2017-06-20T12:27:53.5835671-03:00 0HL5NU3KD3O0F [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:27:53.5835671-03:00 0HL5NU3KD3O0F [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:27:53.7656869-03:00 0HL5NU3KD3O0F [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["dc5a58af84031513cd80f090162603a4"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:27:56.1787399-03:00 0HL5NU3KD3O0F [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-20T12:27:56.6170319-03:00 0HL5NU3KD3O0F [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 2980.6788ms (afa2e885)
2017-06-20T12:27:56.6230367-03:00 0HL5NU3KD3O0F [INF] Request finished in 3040.6112ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:28:28.3868636-03:00 0HL5NU3KD3O0G [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http://localhost:8080/   (e5be5b71)
2017-06-20T12:28:28.3868636-03:00 0HL5NU3KD3O0G [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:28:28.3868636-03:00 0HL5NU3KD3O0G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:28:28.3878661-03:00 0HL5NU3KD3O0G [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:28:28.3878661-03:00 0HL5NU3KD3O0G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:28:28.8081444-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (84ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:28:29.0973371-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:28:29.1223532-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:28:29.1273567-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:28:29.1343620-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:28:29.1433678-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:28:29.1503719-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:28:29.1603785-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:28:29.1673842-03:00 0HL5NU3KD3O0G [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:28:30.0499734-03:00 0HL5NU3KD3O0G [ERR] Invalid redirect_uri: http://localhost:8080/
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"RequestedScopes\": \"\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/\"
  }
}" (5f151c0c)
2017-06-20T12:28:30.0509743-03:00 0HL5NU3KD3O0G [ERR] Request validation failed (abd529bc)
2017-06-20T12:28:30.0539765-03:00 0HL5NU3KD3O0G [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"RequestedScopes\": \"\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/\"
  }
}" (9899f104)
2017-06-20T12:28:30.0609805-03:00 0HL5NU3KD3O0G [INF] Request finished in 1674.7951ms 302  (15c52c40)
2017-06-20T12:28:30.0709893-03:00 0HL5NU3KD3O0H [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=07b3043b242e6c24de83944b38089921   (e5be5b71)
2017-06-20T12:28:30.0719873-03:00 0HL5NU3KD3O0H [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:28:30.0729894-03:00 0HL5NU3KD3O0H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:28:30.0779925-03:00 0HL5NU3KD3O0H [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["07b3043b242e6c24de83944b38089921"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:28:30.0829960-03:00 0HL5NU3KD3O0H [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-20T12:28:30.0839957-03:00 0HL5NU3KD3O0H [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 9.7188ms (afa2e885)
2017-06-20T12:28:30.0849957-03:00 0HL5NU3KD3O0H [INF] Request finished in 14.1747ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:28:44.3358182-03:00 0HL5NU3KD3O0I [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http://localhost:8080/   (e5be5b71)
2017-06-20T12:28:44.3368199-03:00 0HL5NU3KD3O0I [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:28:44.3368199-03:00 0HL5NU3KD3O0I [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:28:44.3368199-03:00 0HL5NU3KD3O0I [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:28:44.3368199-03:00 0HL5NU3KD3O0I [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:28:44.3488271-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:28:44.3548344-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:28:44.3588354-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:28:44.3618368-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:28:44.3648374-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:28:44.3678396-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:28:44.3698422-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:28:44.3728431-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:28:44.3758454-03:00 0HL5NU3KD3O0I [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:28:44.3778471-03:00 0HL5NU3KD3O0I [ERR] Invalid redirect_uri: http://localhost:8080/
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"RequestedScopes\": \"\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/\"
  }
}" (5f151c0c)
2017-06-20T12:28:44.3778471-03:00 0HL5NU3KD3O0I [ERR] Request validation failed (abd529bc)
2017-06-20T12:28:44.3778471-03:00 0HL5NU3KD3O0I [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"RequestedScopes\": \"\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/\"
  }
}" (9899f104)
2017-06-20T12:28:44.3868541-03:00 0HL5NU3KD3O0I [INF] Request finished in 51.1886ms 302  (15c52c40)
2017-06-20T12:28:44.3928573-03:00 0HL5NU3KD3O0J [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=0b55d93d314d91a53a640f9e648dcd97   (e5be5b71)
2017-06-20T12:28:44.3928573-03:00 0HL5NU3KD3O0J [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:28:44.3928573-03:00 0HL5NU3KD3O0J [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:28:44.3938570-03:00 0HL5NU3KD3O0J [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["0b55d93d314d91a53a640f9e648dcd97"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:28:44.3938570-03:00 0HL5NU3KD3O0J [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-20T12:28:44.3948578-03:00 0HL5NU3KD3O0J [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.0263ms (afa2e885)
2017-06-20T12:28:44.3948578-03:00 0HL5NU3KD3O0J [INF] Request finished in 2.31ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:30:19.2386215-03:00 0HL5NU3KD3O0K [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979726190640.0992895032529093   (e5be5b71)
2017-06-20T12:30:19.2386215-03:00 0HL5NU3KD3O0K [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:30:19.2396224-03:00 0HL5NU3KD3O0K [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:30:19.2396224-03:00 0HL5NU3KD3O0K [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:30:19.2406228-03:00 0HL5NU3KD3O0K [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:30:19.2466268-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:30:19.2506291-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:30:19.2556326-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:30:19.2606358-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:30:19.2646380-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:30:19.2676402-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:30:19.2746451-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:30:19.2776465-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:30:19.2796491-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:30:19.3466932-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:30:19.4257461-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:30:19.4417568-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:30:19.4537644-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:30:19.4667758-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:30:19.4897880-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:30:19.6118699-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:30:19.6168746-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:30:19.6268801-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:30:19.6378872-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:30:19.6468934-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:30:19.6709091-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:30:19.6819170-03:00 0HL5NU3KD3O0K [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:30:19.6839179-03:00 0HL5NU3KD3O0K [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979726190640.0992895032529093\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979726190640.0992895032529093\"
  }
}" (9a175e33)
2017-06-20T12:30:19.7239446-03:00 0HL5NU3KD3O0K [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:30:20.0961930-03:00 0HL5NU3KD3O0K [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979726190640.0992895032529093\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:30:20.1082010-03:00 0HL5NU3KD3O0K [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:30:20.1292152-03:00 0HL5NU3KD3O0K [INF] Request finished in 894.788ms 302  (15c52c40)
2017-06-20T12:31:49.4740208-03:00 0HL5NU3KD3O0L [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979727035980.04040102279804314   (e5be5b71)
2017-06-20T12:31:49.4740208-03:00 0HL5NU3KD3O0L [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:31:49.4750188-03:00 0HL5NU3KD3O0L [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:31:49.4750188-03:00 0HL5NU3KD3O0L [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:31:49.4750188-03:00 0HL5NU3KD3O0L [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:31:49.4790227-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:31:49.4820233-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:31:49.4840258-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:31:49.4870280-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:31:49.4900319-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:31:49.4930320-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:31:49.4960326-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:31:49.4980356-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:31:49.5010370-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:31:49.5060393-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:31:49.5100419-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:31:49.5160484-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:31:49.5230529-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:31:49.5300578-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:31:49.5530737-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:31:49.5550730-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:31:49.5570752-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:31:49.5570752-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:31:49.5580765-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:31:49.5580765-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:31:49.5590757-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:31:49.5600774-03:00 0HL5NU3KD3O0L [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:31:49.5600774-03:00 0HL5NU3KD3O0L [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979727035980.04040102279804314\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979727035980.04040102279804314\"
  }
}" (9a175e33)
2017-06-20T12:31:49.5620795-03:00 0HL5NU3KD3O0L [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:31:49.5770877-03:00 0HL5NU3KD3O0L [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979727035980.04040102279804314\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:31:49.5770877-03:00 0HL5NU3KD3O0L [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:31:49.5780894-03:00 0HL5NU3KD3O0L [INF] Request finished in 103.8354ms 302  (15c52c40)
2017-06-20T12:33:04.5334537-03:00 0HL5NU3KD3O0M [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979727843490.5988899956322429   (e5be5b71)
2017-06-20T12:33:04.5334537-03:00 0HL5NU3KD3O0M [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:33:04.5344541-03:00 0HL5NU3KD3O0M [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:33:04.5354558-03:00 0HL5NU3KD3O0M [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:33:04.5354558-03:00 0HL5NU3KD3O0M [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:33:04.5394573-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:33:04.5434599-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:33:04.5464638-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:33:04.5494639-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:33:04.5534682-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:33:04.5564688-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:33:04.5584702-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:33:04.5624736-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:33:04.5644746-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:33:04.5674755-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:33:04.5724791-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:33:04.5794844-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:33:04.5874893-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:33:04.5954951-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:33:04.6125062-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:33:04.6135087-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:33:04.6155084-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:33:04.6165093-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:33:04.6165093-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:33:04.6175097-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:33:04.6175097-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:33:04.6185131-03:00 0HL5NU3KD3O0M [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:33:04.6195107-03:00 0HL5NU3KD3O0M [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979727843490.5988899956322429\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979727843490.5988899956322429\"
  }
}" (9a175e33)
2017-06-20T12:33:04.6215128-03:00 0HL5NU3KD3O0M [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:33:04.6315187-03:00 0HL5NU3KD3O0M [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979727843490.5988899956322429\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:33:04.6315187-03:00 0HL5NU3KD3O0M [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:33:04.6325195-03:00 0HL5NU3KD3O0M [INF] Request finished in 99.2707ms 302  (15c52c40)
2017-06-20T12:39:12.2641056-03:00 0HL5NU3KD3O0N [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979731520830.5185737181501417   (e5be5b71)
2017-06-20T12:39:12.2641056-03:00 0HL5NU3KD3O0N [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:39:12.2651065-03:00 0HL5NU3KD3O0N [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:12.2651065-03:00 0HL5NU3KD3O0N [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:39:12.2651065-03:00 0HL5NU3KD3O0N [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:12.2761148-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:39:12.2801167-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:39:12.2851206-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:39:12.2891221-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:39:12.2921243-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:39:12.2971278-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:39:12.3011301-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:39:12.3041323-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:39:12.3081362-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:39:12.3121380-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:39:12.3201471-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:39:12.3311501-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:12.3431581-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:12.3561678-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:39:12.3811839-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:39:12.3831856-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:39:12.3841857-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:39:12.3851861-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:12.3851861-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:12.3861870-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:39:12.3871879-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:39:12.3871879-03:00 0HL5NU3KD3O0N [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:12.3881879-03:00 0HL5NU3KD3O0N [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979731520830.5185737181501417\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979731520830.5185737181501417\"
  }
}" (9a175e33)
2017-06-20T12:39:12.3901901-03:00 0HL5NU3KD3O0N [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:39:12.4031986-03:00 0HL5NU3KD3O0N [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979731520830.5185737181501417\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:39:12.4031986-03:00 0HL5NU3KD3O0N [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:12.4031986-03:00 0HL5NU3KD3O0N [INF] Request finished in 139.7022ms 302  (15c52c40)
2017-06-20T12:39:47.8790417-03:00 0HL5NU3KD3O0O [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979731860030.3828176314450509   (e5be5b71)
2017-06-20T12:39:47.8790417-03:00 0HL5NU3KD3O0O [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:39:47.8790417-03:00 0HL5NU3KD3O0O [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:47.8790417-03:00 0HL5NU3KD3O0O [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:39:47.8800422-03:00 0HL5NU3KD3O0O [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:47.8840453-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:39:47.8870475-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:39:47.8900509-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:39:47.8930511-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:39:47.8970538-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:39:47.9010564-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:39:47.9040586-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:39:47.9070608-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:39:47.9110672-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:39:47.9140649-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:39:47.9180676-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:39:47.9270742-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:47.9360808-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:47.9430841-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:39:47.9590951-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:39:47.9610973-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:39:47.9651008-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:39:47.9731045-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:47.9731045-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:39:47.9741045-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:39:47.9741045-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:39:47.9751066-03:00 0HL5NU3KD3O0O [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:47.9751066-03:00 0HL5NU3KD3O0O [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979731860030.3828176314450509\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979731860030.3828176314450509\"
  }
}" (9a175e33)
2017-06-20T12:39:47.9771080-03:00 0HL5NU3KD3O0O [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:39:47.9861162-03:00 0HL5NU3KD3O0O [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979731860030.3828176314450509\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:39:47.9861162-03:00 0HL5NU3KD3O0O [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:39:47.9871138-03:00 0HL5NU3KD3O0O [INF] Request finished in 108.1032ms 302  (15c52c40)
2017-06-20T12:40:29.2106644-03:00 0HL5NU3KD3O0P [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979732290440.7483712774638251   (e5be5b71)
2017-06-20T12:40:29.2106644-03:00 0HL5NU3KD3O0P [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:40:29.2106644-03:00 0HL5NU3KD3O0P [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:40:29.2116657-03:00 0HL5NU3KD3O0P [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:40:29.2116657-03:00 0HL5NU3KD3O0P [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:40:29.2166684-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:40:29.2206727-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:40:29.2256750-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:40:29.2286764-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:40:29.2326803-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:40:29.2376834-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:40:29.2426878-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:40:29.2476897-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:40:29.2526933-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:40:29.2566976-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:40:29.2627012-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:40:29.2727062-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:40:29.2827125-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:40:29.2957226-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:40:29.3207399-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:40:29.3247409-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:40:29.3267426-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:40:29.3277435-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:40:29.3277435-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:40:29.3287432-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:40:29.3297444-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:40:29.3297444-03:00 0HL5NU3KD3O0P [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:40:29.3307445-03:00 0HL5NU3KD3O0P [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979732290440.7483712774638251\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979732290440.7483712774638251\"
  }
}" (9a175e33)
2017-06-20T12:40:29.3347505-03:00 0HL5NU3KD3O0P [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:40:29.3467552-03:00 0HL5NU3KD3O0P [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979732290440.7483712774638251\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:40:29.3467552-03:00 0HL5NU3KD3O0P [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:40:29.3467552-03:00 0HL5NU3KD3O0P [INF] Request finished in 136.6712ms 302  (15c52c40)
2017-06-20T12:42:18.2784425-03:00 0HL5NU3KD3O0Q [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979733381050.33774885926859644   (e5be5b71)
2017-06-20T12:42:18.2784425-03:00 0HL5NU3KD3O0Q [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:42:18.2794438-03:00 0HL5NU3KD3O0Q [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:42:18.2794438-03:00 0HL5NU3KD3O0Q [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:42:18.2794438-03:00 0HL5NU3KD3O0Q [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:42:18.2854490-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:42:18.2884529-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:42:18.2914510-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:42:18.2934523-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:42:18.2974579-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:42:18.3024598-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:42:18.3054608-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:42:18.3074674-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:42:18.3104631-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:42:18.3144690-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:42:18.3204767-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:42:18.3274804-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:42:18.3364825-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:42:18.3454883-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:42:18.3615027-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:42:18.3634987-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:42:18.3655008-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:42:18.3665025-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:42:18.3665025-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:42:18.3675021-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:42:18.3685026-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:42:18.3685026-03:00 0HL5NU3KD3O0Q [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:42:18.3685026-03:00 0HL5NU3KD3O0Q [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979733381050.33774885926859644\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979733381050.33774885926859644\"
  }
}" (9a175e33)
2017-06-20T12:42:18.3715056-03:00 0HL5NU3KD3O0Q [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:42:18.3795106-03:00 0HL5NU3KD3O0Q [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979733381050.33774885926859644\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:42:18.3805135-03:00 0HL5NU3KD3O0Q [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:42:18.3815144-03:00 0HL5NU3KD3O0Q [INF] Request finished in 103.1477ms 302  (15c52c40)
2017-06-20T12:49:03.1852694-03:00 0HL5NU3KD3O0R [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979737430140.05009762925107197   (e5be5b71)
2017-06-20T12:49:03.1862707-03:00 0HL5NU3KD3O0R [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:49:03.1862707-03:00 0HL5NU3KD3O0R [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:03.1862707-03:00 0HL5NU3KD3O0R [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:49:03.1862707-03:00 0HL5NU3KD3O0R [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:03.1952761-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:49:03.1982791-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:49:03.2012862-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:49:03.2042831-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:49:03.2072861-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:49:03.2122880-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:49:03.2152902-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:49:03.2182925-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:49:03.2212938-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:49:03.2242973-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:49:03.2293008-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:49:03.2363037-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:49:03.2433098-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:49:03.2533210-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:49:03.2713268-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:49:03.2723285-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:49:03.2733298-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:49:03.2743298-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:49:03.2743298-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:49:03.2753319-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:49:03.2763320-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:49:03.2763320-03:00 0HL5NU3KD3O0R [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:03.2773320-03:00 0HL5NU3KD3O0R [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979737430140.05009762925107197\",
  \"SessionId\": \"ef1f0ab82cbc2b38181361f8d9b49332\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979737430140.05009762925107197\"
  }
}" (9a175e33)
2017-06-20T12:49:03.2793383-03:00 0HL5NU3KD3O0R [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:49:03.2883396-03:00 0HL5NU3KD3O0R [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979737430140.05009762925107197\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:49:03.2883396-03:00 0HL5NU3KD3O0R [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:03.2883396-03:00 0HL5NU3KD3O0R [INF] Request finished in 103.3608ms 302  (15c52c40)
2017-06-20T12:49:08.7231265-03:00 0HL5NU3KD3O0S [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=ssocalemas&post_logout_redirect_uri=http://localhost:8080   (e5be5b71)
2017-06-20T12:49:08.7241281-03:00 0HL5NU3KD3O0S [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:49:08.7241281-03:00 0HL5NU3KD3O0S [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:08.7261282-03:00 0HL5NU3KD3O0S [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T12:49:08.7381387-03:00 0HL5NU3KD3O0S [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:08.8251945-03:00 0HL5NU3KD3O0S [ERR] Malformed JWT token: "System.ArgumentException: IDX10709: JWT is not well formed: 'ssocalemas'.
The token needs to be in JWS or JWE Compact Serialization Format. (JWS): 'EncodedHeader.EndcodedPayload.EncodedSignature'. (JWE): 'EncodedProtectedHeader.EncodedEncryptedKey.EncodedInitializationVector.EncodedCiphertext.EncodedAuthenticationTag'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityToken..ctor(String jwtEncodedString)
   at IdentityServer4.Validation.TokenValidator.GetClientIdFromJwt(String token)" (21998591)
2017-06-20T12:49:08.8261950-03:00 0HL5NU3KD3O0S [ERR] No clientId supplied, can't find id in identity token. (9a60150f)
2017-06-20T12:49:08.8492097-03:00 0HL5NU3KD3O0S [INF] End session request validation failure: Error validating id token hint
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"id_token_hint\": \"ssocalemas\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (a48d87f5)
2017-06-20T12:49:08.8512115-03:00 0HL5NU3KD3O0S [ERR] Error processing end session request "Invalid request" (7af74809)
2017-06-20T12:49:08.8572155-03:00 0HL5NU3KD3O0S [INF] Request finished in 134.4527ms 302  (15c52c40)
2017-06-20T12:49:08.9262618-03:00 0HL5NU3KD3O0T [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout   (e5be5b71)
2017-06-20T12:49:08.9282643-03:00 0HL5NU3KD3O0T [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:49:08.9282643-03:00 0HL5NU3KD3O0T [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:09.0663548-03:00 0HL5NU3KD3O0T [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments ([""]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:49:09.0713596-03:00 0HL5NU3KD3O0T [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:09.0783665-03:00 0HL5NU3KD3O0T [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:09.0813662-03:00 0HL5NU3KD3O0T [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:09.0813662-03:00 0HL5NU3KD3O0T [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:09.1894387-03:00 0HL5NU3KD3O0T [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-20T12:49:09.2824994-03:00 0HL5NU3KD3O0T [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 344.7514ms (afa2e885)
2017-06-20T12:49:09.2824994-03:00 0HL5NU3KD3O0T [INF] Request finished in 356.0364ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:49:11.0400492-03:00 0HL5NU3KD3O0U [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/Logout application/x-www-form-urlencoded 235 (e5be5b71)
2017-06-20T12:49:11.0580617-03:00 0HL5NU3KD3O0U [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:49:11.0580617-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:11.1609586-03:00 0HL5NU3KD3O0U [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LogoutInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:49:11.1659613-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:11.1659613-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:11.1659613-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:11.1679627-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:11.1949891-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T12:49:11.1959822-03:00 0HL5NU3KD3O0U [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:49:11.2728384-03:00 0HL5NU3KD3O0U [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T12:49:11.2848439-03:00 0HL5NU3KD3O0U [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 221.1079ms (afa2e885)
2017-06-20T12:49:11.2848439-03:00 0HL5NU3KD3O0U [INF] Request finished in 245.486ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:49:11.4519564-03:00 0HL5NU3KD3O0V [INF] Request starting HTTP/1.1 GET http://localhost:4000/js/signout-redirect.js   (e5be5b71)
2017-06-20T12:49:11.4749691-03:00 0HL5NU3KD3O0V [INF] Sending file. Request path: '"/js/signout-redirect.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\js\signout-redirect.js"' (27b0a520)
2017-06-20T12:49:11.4979855-03:00 0HL5NU3KD3O0V [INF] Request finished in 46.0056ms 200 application/javascript (15c52c40)
2017-06-20T12:49:11.5920482-03:00 0HL5NU3KD3O10 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=ef1f0ab82cbc2b38181361f8d9b49332   (e5be5b71)
2017-06-20T12:49:11.5920482-03:00 0HL5NU3KD3O10 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-20T12:49:11.6080581-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:49:11.6090590-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:49:11.6090590-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:49:11.6100598-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:49:11.6100598-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:49:11.6120624-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:49:11.6120624-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:49:11.6130625-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:49:11.6140633-03:00 0HL5NU3KD3O10 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:49:11.6150626-03:00 0HL5NU3KD3O10 [INF] Successful signout callback. Client logout iframe urls: "" (76941251)
2017-06-20T12:49:11.6240688-03:00 0HL5NU3KD3O10 [INF] Request finished in 32.1239ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-20T12:57:09.9986567-03:00 0HL5NU3KD3O11 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979742274200.49756042572406   (e5be5b71)
2017-06-20T12:57:09.9986567-03:00 0HL5NU3KD3O11 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:57:10.0096638-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:57:10.0136665-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:57:10.0156695-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:57:10.0186721-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:57:10.0216743-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:57:10.0256741-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:57:10.0286767-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:57:10.0316789-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:57:10.0366821-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:57:10.0396859-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:57:10.0446919-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:57:10.0516915-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.0587013-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.0667017-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:57:10.0847149-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:57:10.0857158-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:57:10.0867150-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:57:10.0877167-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.0877167-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.0887176-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:57:10.0887176-03:00 0HL5NU3KD3O11 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:57:10.0897185-03:00 0HL5NU3KD3O11 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979742274200.49756042572406\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979742274200.49756042572406\"
  }
}" (9a175e33)
2017-06-20T12:57:10.0897185-03:00 0HL5NU3KD3O11 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-20T12:57:10.0967217-03:00 0HL5NU3KD3O11 [INF] Request finished in 98.4077ms 302  (15c52c40)
2017-06-20T12:57:10.1017269-03:00 0HL5NU3KD3O12 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979742274200.49756042572406   (e5be5b71)
2017-06-20T12:57:10.1047271-03:00 0HL5NU3KD3O12 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979742274200.49756042572406"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:57:10.1227485-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:57:10.1227485-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:57:10.1237412-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:57:10.1247408-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:57:10.1247408-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:57:10.1257417-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:57:10.1257417-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:57:10.1257417-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:57:10.1267417-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:57:10.1287455-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:57:10.1297468-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:57:10.1307456-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.1317453-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.1317453-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:57:10.1327457-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:57:10.1337479-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:57:10.1347479-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:57:10.1347479-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.1357475-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:10.1357475-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:57:10.1367488-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:57:10.1477564-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:57:10.1487568-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:57:10.1507586-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:57:10.1507586-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:57:10.1517590-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:57:10.1527595-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:57:10.1527595-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:57:10.1537600-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:57:10.1537600-03:00 0HL5NU3KD3O12 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:57:10.5270112-03:00 0HL5NU3KD3O12 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-20T12:57:10.9633006-03:00 0HL5NU3KD3O12 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 856.8448ms (afa2e885)
2017-06-20T12:57:10.9633006-03:00 0HL5NU3KD3O12 [INF] Request finished in 861.1882ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:57:17.1479686-03:00 0HL5NU3KD3O13 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979742274200.49756042572406 application/x-www-form-urlencoded 470 (e5be5b71)
2017-06-20T12:57:17.1589749-03:00 0HL5NU3KD3O13 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:57:17.2488675-03:00 0HL5NU3KD3O13 [INF] Executed DbCommand (23ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-20T12:57:17.3029040-03:00 0HL5NU3KD3O13 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T12:57:17.3079071-03:00 0HL5NU3KD3O13 [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979742274200.49756042572406". (d98d540e)
2017-06-20T12:57:17.3089096-03:00 0HL5NU3KD3O13 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 159.3173ms (afa2e885)
2017-06-20T12:57:17.3099068-03:00 0HL5NU3KD3O13 [INF] Request finished in 162.0252ms 302  (15c52c40)
2017-06-20T12:57:17.3149112-03:00 0HL5NU3KD3O14 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979742274200.49756042572406   (e5be5b71)
2017-06-20T12:57:17.3159112-03:00 0HL5NU3KD3O14 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:57:17.3159112-03:00 0HL5NU3KD3O14 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:17.3159112-03:00 0HL5NU3KD3O14 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-20T12:57:17.3199151-03:00 0HL5NU3KD3O14 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:17.3219156-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:57:17.3229165-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:57:17.3239178-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:57:17.3239178-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:57:17.3249207-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:57:17.3259195-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:57:17.3269208-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:57:17.3269208-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:57:17.3279196-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:57:17.3299210-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:57:17.3319223-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:57:17.3319223-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:17.3329232-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:17.3329232-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:57:17.3339228-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:57:17.3349245-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:57:17.3369246-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:57:17.3369246-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:17.3379267-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:57:17.3379267-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:57:17.3389272-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:57:17.3389272-03:00 0HL5NU3KD3O14 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:17.3389272-03:00 0HL5NU3KD3O14 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979742274200.49756042572406\",
  \"SessionId\": \"6ade8f8b9d13ad721843149e109a9cb8\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979742274200.49756042572406\"
  }
}" (9a175e33)
2017-06-20T12:57:17.3419294-03:00 0HL5NU3KD3O14 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:57:17.3529349-03:00 0HL5NU3KD3O14 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979742274200.49756042572406\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:57:17.3529349-03:00 0HL5NU3KD3O14 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:17.3599406-03:00 0HL5NU3KD3O14 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:17.3629420-03:00 0HL5NU3KD3O14 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T12:57:17.3629420-03:00 0HL5NU3KD3O14 [INF] Request finished in 47.7266ms 302  (15c52c40)
2017-06-20T12:57:32.2526748-03:00 0HL5NU3KD3O15 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjFiYzdkY2M1MjFjZjdiZDk3N2RkYzAyMGRlMGQ5MGQ0IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQyMzcsImV4cCI6MTQ5Nzk3NzgzNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0MjM3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.qViJYvHWiUV3IhKqIHYdUVB6rsYuzWDDjrQ5LGF5lk9CGnOraXvKNmG6SauAK1kfCgBC-83-E8E_rAX56QoUKAWElIOqiiBPGiyubraxqB-70No3KCRgH62QSd87d8_kz44e6X_Nj9MLrl4KgKPvnd3jRswsh4K-uVtd3_1ipoV7QA4-tgzKDLyJXMhXTt-_Ty4snFvf7C2IkuzcZhtkdTdXcQNnLUGAyCLmQF9gAFsMYu0mES2lo17qGl9vwri27x2VPt0qhZA4EvfVxyfoqdETudFcjC2dC4Y5Sh1ATvDKkK3WHSNr2BHxCYDSmbPSly5wKKiBUOTg2zVmWBYU6Q&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T12:57:32.2536752-03:00 0HL5NU3KD3O15 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:57:32.2536752-03:00 0HL5NU3KD3O15 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2536752-03:00 0HL5NU3KD3O15 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T12:57:32.2536752-03:00 0HL5NU3KD3O15 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2756912-03:00 0HL5NU3KD3O15 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:57:32.2766912-03:00 0HL5NU3KD3O15 [ERR] Unknown or diabled client: "http://localhost:4000/resources". (c5f9b67a)
2017-06-20T12:57:32.2766912-03:00 0HL5NU3KD3O15 [INF] End session request validation failure: Error validating id token hint
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFiYzdkY2M1MjFjZjdiZDk3N2RkYzAyMGRlMGQ5MGQ0IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQyMzcsImV4cCI6MTQ5Nzk3NzgzNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0MjM3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.qViJYvHWiUV3IhKqIHYdUVB6rsYuzWDDjrQ5LGF5lk9CGnOraXvKNmG6SauAK1kfCgBC-83-E8E_rAX56QoUKAWElIOqiiBPGiyubraxqB-70No3KCRgH62QSd87d8_kz44e6X_Nj9MLrl4KgKPvnd3jRswsh4K-uVtd3_1ipoV7QA4-tgzKDLyJXMhXTt-_Ty4snFvf7C2IkuzcZhtkdTdXcQNnLUGAyCLmQF9gAFsMYu0mES2lo17qGl9vwri27x2VPt0qhZA4EvfVxyfoqdETudFcjC2dC4Y5Sh1ATvDKkK3WHSNr2BHxCYDSmbPSly5wKKiBUOTg2zVmWBYU6Q\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (a48d87f5)
2017-06-20T12:57:32.2776913-03:00 0HL5NU3KD3O15 [ERR] Error processing end session request "Invalid request" (7af74809)
2017-06-20T12:57:32.2776913-03:00 0HL5NU3KD3O15 [INF] Request finished in 25.1219ms 302  (15c52c40)
2017-06-20T12:57:32.2836957-03:00 0HL5NU3KD3O16 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout   (e5be5b71)
2017-06-20T12:57:32.2846965-03:00 0HL5NU3KD3O16 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:57:32.2846965-03:00 0HL5NU3KD3O16 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2846965-03:00 0HL5NU3KD3O16 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments ([""]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:57:32.2846965-03:00 0HL5NU3KD3O16 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2856974-03:00 0HL5NU3KD3O16 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2856974-03:00 0HL5NU3KD3O16 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2856974-03:00 0HL5NU3KD3O16 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:32.2856974-03:00 0HL5NU3KD3O16 [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-20T12:57:32.2866975-03:00 0HL5NU3KD3O16 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 1.9672ms (afa2e885)
2017-06-20T12:57:32.2866975-03:00 0HL5NU3KD3O16 [INF] Request finished in 3.3441ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:57:38.6578829-03:00 0HL5NU3KD3O17 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/Logout application/x-www-form-urlencoded 235 (e5be5b71)
2017-06-20T12:57:38.6588826-03:00 0HL5NU3KD3O17 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:57:38.6588826-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:38.6598830-03:00 0HL5NU3KD3O17 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LogoutInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:57:38.6598830-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:38.6598830-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:38.6598830-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:38.6598830-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:38.6598830-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T12:57:38.6608847-03:00 0HL5NU3KD3O17 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:57:38.6608847-03:00 0HL5NU3KD3O17 [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T12:57:38.6608847-03:00 0HL5NU3KD3O17 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 2.0604ms (afa2e885)
2017-06-20T12:57:38.6618844-03:00 0HL5NU3KD3O17 [INF] Request finished in 3.3909ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:57:38.9300633-03:00 0HL5NU3KD3O18 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=6ade8f8b9d13ad721843149e109a9cb8   (e5be5b71)
2017-06-20T12:57:38.9310641-03:00 0HL5NU3KD3O18 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-20T12:57:38.9330655-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:57:38.9500762-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (16ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:57:38.9510771-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:57:38.9520779-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:57:38.9520779-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:57:38.9550793-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:57:38.9560810-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:57:38.9610838-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:57:38.9620846-03:00 0HL5NU3KD3O18 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:57:38.9630855-03:00 0HL5NU3KD3O18 [INF] Successful signout callback. Client logout iframe urls: "" (76941251)
2017-06-20T12:57:38.9630855-03:00 0HL5NU3KD3O18 [INF] Request finished in 32.9557ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-20T12:59:15.8008776-03:00 0HL5NU3KD3O19 [INF] Request starting HTTP/1.1 GET http://localhost:4000/   (e5be5b71)
2017-06-20T12:59:15.8028793-03:00 0HL5NU3KD3O19 [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:59:15.9369688-03:00 0HL5NU3KD3O19 [INF] Executing ViewResult, running view at path "/Views/Home/Index.cshtml". (9707eebe)
2017-06-20T12:59:15.9519790-03:00 0HL5NU3KD3O19 [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" in 150.1054ms (afa2e885)
2017-06-20T12:59:15.9529791-03:00 0HL5NU3KD3O19 [INF] Request finished in 152.0628ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:59:16.4623190-03:00 0HL5NU3KD3O1A [INF] Request starting HTTP/1.1 GET http://localhost:4000/icon.jpg   (e5be5b71)
2017-06-20T12:59:16.4633203-03:00 0HL5NU3KD3O1A [INF] Sending file. Request path: '"/icon.jpg"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\icon.jpg"' (27b0a520)
2017-06-20T12:59:16.4673226-03:00 0HL5NU3KD3O1A [INF] Request finished in 4.3746ms 200 image/jpeg (15c52c40)
2017-06-20T12:59:21.8317955-03:00 0HL5NU3KD3O1B [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979743597770.7835388542409776   (e5be5b71)
2017-06-20T12:59:21.8327959-03:00 0HL5NU3KD3O1B [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T12:59:21.8368019-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:59:21.8408017-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:59:21.8448031-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:59:21.8478078-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:59:21.8508079-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:59:21.8548102-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:59:21.8598150-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:59:21.8648177-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:59:21.8668203-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:59:21.8698212-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:59:21.8758269-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:59:21.8828285-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.8898342-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.8988428-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:59:21.9178520-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:59:21.9188525-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:59:21.9198534-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:59:21.9198534-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.9208538-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.9208538-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:59:21.9218555-03:00 0HL5NU3KD3O1B [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:59:21.9228564-03:00 0HL5NU3KD3O1B [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979743597770.7835388542409776\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979743597770.7835388542409776\"
  }
}" (9a175e33)
2017-06-20T12:59:21.9228564-03:00 0HL5NU3KD3O1B [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-20T12:59:21.9238569-03:00 0HL5NU3KD3O1B [INF] Request finished in 91.6751ms 302  (15c52c40)
2017-06-20T12:59:21.9298617-03:00 0HL5NU3KD3O1C [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979743597770.7835388542409776   (e5be5b71)
2017-06-20T12:59:21.9308617-03:00 0HL5NU3KD3O1C [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979743597770.7835388542409776"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:59:21.9328631-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:59:21.9338631-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:59:21.9338631-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:59:21.9348644-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:59:21.9348644-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:59:21.9358653-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:59:21.9358653-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:59:21.9368657-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:59:21.9378658-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:59:21.9408684-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:59:21.9438710-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:59:21.9438710-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.9448711-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.9448711-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:59:21.9458720-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:59:21.9488742-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:59:21.9508751-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:59:21.9518751-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.9518751-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:21.9528756-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:59:21.9528756-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:59:21.9558782-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:59:21.9568812-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:59:21.9578800-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:59:21.9578800-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:59:21.9588804-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:59:21.9598801-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:59:21.9598801-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:59:21.9608805-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:59:21.9608805-03:00 0HL5NU3KD3O1C [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:59:21.9618822-03:00 0HL5NU3KD3O1C [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-20T12:59:21.9648840-03:00 0HL5NU3KD3O1C [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 34.5834ms (afa2e885)
2017-06-20T12:59:21.9648840-03:00 0HL5NU3KD3O1C [INF] Request finished in 35.4973ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:59:24.8025575-03:00 0HL5NU3KD3O1D [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979743597770.7835388542409776 application/x-www-form-urlencoded 472 (e5be5b71)
2017-06-20T12:59:24.8035580-03:00 0HL5NU3KD3O1D [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:59:24.8105620-03:00 0HL5NU3KD3O1D [INF] Executed DbCommand (5ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-20T12:59:24.8115633-03:00 0HL5NU3KD3O1D [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T12:59:24.8115633-03:00 0HL5NU3KD3O1D [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979743597770.7835388542409776". (d98d540e)
2017-06-20T12:59:24.8115633-03:00 0HL5NU3KD3O1D [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 8.351ms (afa2e885)
2017-06-20T12:59:24.8125638-03:00 0HL5NU3KD3O1D [INF] Request finished in 9.3342ms 302  (15c52c40)
2017-06-20T12:59:24.8175677-03:00 0HL5NU3KD3O1E [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979743597770.7835388542409776   (e5be5b71)
2017-06-20T12:59:24.8175677-03:00 0HL5NU3KD3O1E [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:59:24.8175677-03:00 0HL5NU3KD3O1E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:24.8185682-03:00 0HL5NU3KD3O1E [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-20T12:59:24.8185682-03:00 0HL5NU3KD3O1E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:24.8205699-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:59:24.8205699-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:59:24.8215712-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:59:24.8215712-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:59:24.8225708-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:59:24.8245722-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:59:24.8255735-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:59:24.8265739-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:59:24.8265739-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:59:24.8295757-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:59:24.8315775-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:59:24.8325775-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:24.8335776-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:24.8335776-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:59:24.8345784-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:59:24.8365810-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T12:59:24.8385815-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T12:59:24.8385815-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:24.8405857-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T12:59:24.8415841-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T12:59:24.8435847-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T12:59:24.8435847-03:00 0HL5NU3KD3O1E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:24.8445855-03:00 0HL5NU3KD3O1E [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979743597770.7835388542409776\",
  \"SessionId\": \"c1f99d4570326fd53c94814776d2fed5\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979743597770.7835388542409776\"
  }
}" (9a175e33)
2017-06-20T12:59:24.8465885-03:00 0HL5NU3KD3O1E [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T12:59:24.8635980-03:00 0HL5NU3KD3O1E [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979743597770.7835388542409776\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T12:59:24.8645993-03:00 0HL5NU3KD3O1E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:24.8645993-03:00 0HL5NU3KD3O1E [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:24.8645993-03:00 0HL5NU3KD3O1E [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T12:59:24.8656002-03:00 0HL5NU3KD3O1E [INF] Request finished in 47.6991ms 302  (15c52c40)
2017-06-20T12:59:31.3922074-03:00 0HL5NU3KD3O1F [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?logoutId=eyJhbGciOiJSUzI1NiIsImtpZCI6IjFiYzdkY2M1MjFjZjdiZDk3N2RkYzAyMGRlMGQ5MGQ0IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQzNjQsImV4cCI6MTQ5Nzk3Nzk2NCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0MzY0LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.SXuFleN3OANc1aR6vIm_vr7-l586TX519827T-FyFq4SmTbLABAxIENpXRONUXzhMgDC-MdgY-GW8SKdfVOIJsG3zyGwklibUO7aTTfmYgdrl17266bmq_oDUWjrFmy_h6jOHaNf3sFsjkognsS2INujj7VeafE6vic0byEhBkG_GYQ3ezdVu9fy_QNKdhkzkdZ5mmnxOQX8t43SUMCpKnnqJZqkml4lcmvzBaVVacczuj-xLv28qwIz-0LMlNO2lW9DA1Io3rMxLhy3aGcMMs0gR4uWhfnyjgGp6Ft8dj2XHuxTesRwCVJCejd_TMM1CIIkDsYzK8u95i4Vqdvy9g&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T12:59:31.3932071-03:00 0HL5NU3KD3O1F [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:59:31.3932071-03:00 0HL5NU3KD3O1F [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.3932071-03:00 0HL5NU3KD3O1F [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T12:59:31.3932071-03:00 0HL5NU3KD3O1F [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.3942080-03:00 0HL5NU3KD3O1F [INF] End session request validation success
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"logoutId\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjFiYzdkY2M1MjFjZjdiZDk3N2RkYzAyMGRlMGQ5MGQ0IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQzNjQsImV4cCI6MTQ5Nzk3Nzk2NCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0MzY0LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.SXuFleN3OANc1aR6vIm_vr7-l586TX519827T-FyFq4SmTbLABAxIENpXRONUXzhMgDC-MdgY-GW8SKdfVOIJsG3zyGwklibUO7aTTfmYgdrl17266bmq_oDUWjrFmy_h6jOHaNf3sFsjkognsS2INujj7VeafE6vic0byEhBkG_GYQ3ezdVu9fy_QNKdhkzkdZ5mmnxOQX8t43SUMCpKnnqJZqkml4lcmvzBaVVacczuj-xLv28qwIz-0LMlNO2lW9DA1Io3rMxLhy3aGcMMs0gR4uWhfnyjgGp6Ft8dj2XHuxTesRwCVJCejd_TMM1CIIkDsYzK8u95i4Vqdvy9g\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (8a893fca)
2017-06-20T12:59:31.4092186-03:00 0HL5NU3KD3O1F [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.4092186-03:00 0HL5NU3KD3O1F [INF] Request finished in 17.7747ms 302  (15c52c40)
2017-06-20T12:59:31.4162222-03:00 0HL5NU3KD3O1G [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=0d2896a47f28ad748373e8bad4add1ce   (e5be5b71)
2017-06-20T12:59:31.4172235-03:00 0HL5NU3KD3O1G [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:59:31.4172235-03:00 0HL5NU3KD3O1G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.4172235-03:00 0HL5NU3KD3O1G [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["0d2896a47f28ad748373e8bad4add1ce"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:59:31.4172235-03:00 0HL5NU3KD3O1G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.4282315-03:00 0HL5NU3KD3O1G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.4292311-03:00 0HL5NU3KD3O1G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.4292311-03:00 0HL5NU3KD3O1G [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:31.4292311-03:00 0HL5NU3KD3O1G [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-20T12:59:31.4302320-03:00 0HL5NU3KD3O1G [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 12.5133ms (afa2e885)
2017-06-20T12:59:31.4302320-03:00 0HL5NU3KD3O1G [INF] Request finished in 13.7252ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:59:33.2219449-03:00 0HL5NU3KD3O1H [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/Logout application/x-www-form-urlencoded 267 (e5be5b71)
2017-06-20T12:59:33.2219449-03:00 0HL5NU3KD3O1H [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T12:59:33.2229458-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:33.2239520-03:00 0HL5NU3KD3O1H [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LogoutInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T12:59:33.2249508-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:33.2249508-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:33.2259472-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:33.2259472-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:33.2259472-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T12:59:33.2259472-03:00 0HL5NU3KD3O1H [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T12:59:33.2269481-03:00 0HL5NU3KD3O1H [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T12:59:33.2279485-03:00 0HL5NU3KD3O1H [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 4.4008ms (afa2e885)
2017-06-20T12:59:33.2279485-03:00 0HL5NU3KD3O1H [INF] Request finished in 6.1325ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T12:59:33.4400917-03:00 0HL5NU3KD3O1I [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=c1f99d4570326fd53c94814776d2fed5&logoutId=0d2896a47f28ad748373e8bad4add1ce   (e5be5b71)
2017-06-20T12:59:33.4400917-03:00 0HL5NU3KD3O1I [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-20T12:59:33.4430919-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T12:59:33.4440927-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T12:59:33.4440927-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T12:59:33.4440927-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T12:59:33.4450928-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T12:59:33.4450928-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T12:59:33.4460932-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T12:59:33.4460932-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T12:59:33.4470941-03:00 0HL5NU3KD3O1I [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T12:59:33.4480942-03:00 0HL5NU3KD3O1I [INF] Successful signout callback. Client logout iframe urls: "" (76941251)
2017-06-20T12:59:33.4490954-03:00 0HL5NU3KD3O1I [INF] Request finished in 9.0616ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-20T12:59:51.1433690-03:00 0HL5NU3KD3O1J [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=c1f99d4570326fd53c94814776d2fed5&logoutId=0d2896a47f28ad748373e8bad4add1ce   (e5be5b71)
2017-06-20T12:59:51.1443695-03:00 0HL5NU3KD3O1J [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-20T12:59:51.1443695-03:00 0HL5NU3KD3O1J [INF] Successful signout callback. Client logout iframe urls: "" (76941251)
2017-06-20T12:59:51.1443695-03:00 0HL5NU3KD3O1J [INF] Request finished in 1.2619ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-20T13:01:42.2870879-03:00  [INF] User profile is available. Using '"C:\Users\bruun\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2017-06-20T13:01:43.0365897-03:00 0HL5NUMIH66RV [INF] Request starting HTTP/1.1 DEBUG http://localhost:4000/  0 (e5be5b71)
2017-06-20T13:01:43.0365897-03:00 0HL5NUMIH66S0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/api/Health   (e5be5b71)
2017-06-20T13:01:43.5099040-03:00 0HL5NUMIH66RV [INF] Request finished in 380.9462ms 200  (15c52c40)
2017-06-20T13:01:44.2904263-03:00 0HL5NUMIH66S0 [INF] Executing action method "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:01:44.3804848-03:00 0HL5NUMIH66S0 [INF] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext". (4e968210)
2017-06-20T13:01:44.5245842-03:00 0HL5NUMIH66S0 [INF] Executed action "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" in 334.7131ms (afa2e885)
2017-06-20T13:01:44.5435950-03:00 0HL5NUMIH66S0 [INF] Request finished in 1579.3879ms 200 text/plain; charset=utf-8 (15c52c40)
2017-06-20T13:01:54.6973928-03:00 0HL5NUMIH66S1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979745118170.3235740904984905   (e5be5b71)
2017-06-20T13:01:54.7244155-03:00 0HL5NUMIH66S1 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T13:01:55.1867202-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (58ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:01:55.5649729-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:01:55.6130058-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:01:55.6240146-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:01:55.6360201-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:01:55.6520304-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:01:55.6670406-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:01:55.6840518-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:01:55.7000620-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:01:56.6096698-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:01:56.6937251-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:01:56.7127376-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:56.7267477-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:56.7487620-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:01:56.7897892-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:01:56.9148724-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:01:56.9178767-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:01:56.9228794-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:56.9278805-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:56.9308839-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:01:56.9338849-03:00 0HL5NUMIH66S1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:01:57.1790495-03:00 0HL5NUMIH66S1 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979745118170.3235740904984905\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979745118170.3235740904984905\"
  }
}" (9a175e33)
2017-06-20T13:01:57.1910566-03:00 0HL5NUMIH66S1 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-20T13:01:57.2130726-03:00 0HL5NUMIH66S1 [INF] Request finished in 2512.4723ms 302  (15c52c40)
2017-06-20T13:01:57.2200762-03:00 0HL5NUMIH66S2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979745118170.3235740904984905   (e5be5b71)
2017-06-20T13:01:57.7964611-03:00 0HL5NUMIH66S2 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979745118170.3235740904984905"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:01:57.8294833-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:01:58.0316182-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (30ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:01:58.0546333-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:01:58.0716453-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:01:58.0836529-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:01:58.0936588-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:01:58.1006640-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:01:58.1106711-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:01:58.1186769-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:01:58.1557010-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:01:58.1827188-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:01:58.1957277-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:58.2037330-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:58.2127396-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:01:58.2397587-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:01:58.2857873-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:01:58.3128056-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:01:58.3248136-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:58.3488296-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:01:58.3578358-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:01:58.3708439-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:01:58.3938594-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:01:58.3998647-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:01:58.4078692-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:01:58.4138736-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:01:58.4178767-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:01:58.4228810-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:01:58.4268812-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:01:58.4308835-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:01:58.4348862-03:00 0HL5NUMIH66S2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:02:02.2294182-03:00 0HL5NUMIH66S2 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-20T13:02:03.7744493-03:00 0HL5NUMIH66S2 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 6304.707ms (afa2e885)
2017-06-20T13:02:03.8865237-03:00 0HL5NUMIH66S2 [INF] Request finished in 6561.1045ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:02:06.8139218-03:00 0HL5NUMIH66S3 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979745118170.3235740904984905 application/x-www-form-urlencoded 472 (e5be5b71)
2017-06-20T13:02:06.9269962-03:00 0HL5NUMIH66S3 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:02:07.0250620-03:00 0HL5NUMIH66S3 [INF] Executed DbCommand (26ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-20T13:02:07.1110890-03:00 0HL5NUMIH66S3 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T13:02:07.1200953-03:00 0HL5NUMIH66S3 [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979745118170.3235740904984905". (d98d540e)
2017-06-20T13:02:07.1234210-03:00 0HL5NUMIH66S3 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 292.5565ms (afa2e885)
2017-06-20T13:02:07.1324292-03:00 0HL5NUMIH66S3 [INF] Request finished in 312.8967ms 302  (15c52c40)
2017-06-20T13:02:07.1354314-03:00 0HL5NUMIH66S4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979745118170.3235740904984905   (e5be5b71)
2017-06-20T13:02:07.1664511-03:00 0HL5NUMIH66S4 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:02:07.1694533-03:00 0HL5NUMIH66S4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:07.1734572-03:00 0HL5NUMIH66S4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-20T13:02:07.1824626-03:00 0HL5NUMIH66S4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:07.1874670-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:02:07.1914684-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:02:07.1944698-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:02:07.1984737-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:02:07.2044777-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:02:07.2074787-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:02:07.2104809-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:02:07.2134856-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:02:07.2164849-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:02:07.2224942-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:02:07.2274937-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:02:07.2304942-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:02:07.2334969-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:02:07.2364987-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:02:07.2385000-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:02:07.2425031-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:02:07.2475058-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:02:07.2505072-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:02:07.2535102-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:02:07.2565128-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:02:07.2605143-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:02:07.2625160-03:00 0HL5NUMIH66S4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:07.2665191-03:00 0HL5NUMIH66S4 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979745118170.3235740904984905\",
  \"SessionId\": \"041908f5e1fe8e9e884d89ca13989eeb\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979745118170.3235740904984905\"
  }
}" (9a175e33)
2017-06-20T13:02:07.2975388-03:00 0HL5NUMIH66S4 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T13:02:08.0470389-03:00 0HL5NUMIH66S4 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979745118170.3235740904984905\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T13:02:08.0740572-03:00 0HL5NUMIH66S4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:08.0970731-03:00 0HL5NUMIH66S4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:08.1040780-03:00 0HL5NUMIH66S4 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T13:02:08.2111484-03:00 0HL5NUMIH66S4 [INF] Request finished in 979.3031ms 302  (15c52c40)
2017-06-20T13:02:13.9665869-03:00 0HL5NUMIH66S5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?logoutId=eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T13:02:13.9695891-03:00 0HL5NUMIH66S5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:02:13.9725938-03:00 0HL5NUMIH66S5 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:13.9765936-03:00 0HL5NUMIH66S5 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T13:02:13.9866007-03:00 0HL5NUMIH66S5 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.0006104-03:00 0HL5NUMIH66S5 [INF] End session request validation success
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"logoutId\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (8a893fca)
2017-06-20T13:02:14.0466395-03:00 0HL5NUMIH66S5 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.0536456-03:00 0HL5NUMIH66S5 [INF] Request finished in 83.042ms 302  (15c52c40)
2017-06-20T13:02:14.0586479-03:00 0HL5NUMIH66S6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=8ebf060baa3ad1c53c01e6fd73d11547   (e5be5b71)
2017-06-20T13:02:14.0626510-03:00 0HL5NUMIH66S6 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:02:14.0656532-03:00 0HL5NUMIH66S6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.0746598-03:00 0HL5NUMIH66S6 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["8ebf060baa3ad1c53c01e6fd73d11547"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:02:14.0866662-03:00 0HL5NUMIH66S6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.1437044-03:00 0HL5NUMIH66S6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.1467071-03:00 0HL5NUMIH66S6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.1497093-03:00 0HL5NUMIH66S6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:14.2447717-03:00 0HL5NUMIH66S6 [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-20T13:02:14.3048134-03:00 0HL5NUMIH66S6 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 231.9578ms (afa2e885)
2017-06-20T13:02:14.3288290-03:00 0HL5NUMIH66S6 [INF] Request finished in 249.1307ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:02:16.1340480-03:00 0HL5NUMIH66S7 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/Logout application/x-www-form-urlencoded 267 (e5be5b71)
2017-06-20T13:02:16.1430546-03:00 0HL5NUMIH66S7 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:02:16.1470568-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:16.1540613-03:00 0HL5NUMIH66S7 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LogoutInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:02:43.6162777-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:43.6222805-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:43.6252823-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:43.6292842-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:43.6683104-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T13:02:43.6753153-03:00 0HL5NUMIH66S7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:02:43.9615066-03:00 0HL5NUMIH66S7 [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T13:02:43.9865239-03:00 0HL5NUMIH66S7 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 27829.565ms (afa2e885)
2017-06-20T13:02:43.9915266-03:00 0HL5NUMIH66S7 [INF] Request finished in 27856.1456ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:02:44.3998002-03:00 0HL5NUMIH66S8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=041908f5e1fe8e9e884d89ca13989eeb&logoutId=8ebf060baa3ad1c53c01e6fd73d11547   (e5be5b71)
2017-06-20T13:02:44.4248150-03:00 0HL5NUMIH66S8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-20T13:02:44.4478310-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:02:44.4548359-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:02:44.4608391-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:02:44.4668439-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:02:44.4738488-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:02:44.4818541-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:02:44.4908603-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:02:44.4978640-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:02:44.5158764-03:00 0HL5NUMIH66S8 [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:02:44.5218804-03:00 0HL5NUMIH66S8 [INF] Successful signout callback. Client logout iframe urls: "" (76941251)
2017-06-20T13:02:44.5989312-03:00 0HL5NUMIH66S8 [INF] Request finished in 142.8875ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-20T13:02:51.4363723-03:00 0HL5NUMIH66S9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?logoutId=eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T13:02:51.4433776-03:00 0HL5NUMIH66S9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T13:02:51.4473811-03:00 0HL5NUMIH66S9 [INF] End session request validation success
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"logoutId\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (8a893fca)
2017-06-20T13:02:51.4603891-03:00 0HL5NUMIH66S9 [INF] Request finished in 15.8111ms 302  (15c52c40)
2017-06-20T13:02:51.4673936-03:00 0HL5NUMIH66SA [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=1d07245fec8ea49b7f068557e1f94e94   (e5be5b71)
2017-06-20T13:02:51.4784003-03:00 0HL5NUMIH66SA [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["1d07245fec8ea49b7f068557e1f94e94"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:03:02.3566719-03:00 0HL5NUMIH66SA [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T13:03:02.3666790-03:00 0HL5NUMIH66SA [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T13:03:02.3946985-03:00 0HL5NUMIH66SA [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 10892.4574ms (afa2e885)
2017-06-20T13:03:02.4317234-03:00 0HL5NUMIH66SA [INF] Request finished in 10935.2811ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:03:48.7964426-03:00 0HL5NUMIH66SB [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?logoutId=eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T13:03:48.8014466-03:00 0HL5NUMIH66SB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T13:03:48.8034487-03:00 0HL5NUMIH66SB [INF] End session request validation success
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"logoutId\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (8a893fca)
2017-06-20T13:03:48.8104532-03:00 0HL5NUMIH66SB [INF] Request finished in 12.1274ms 302  (15c52c40)
2017-06-20T13:03:48.8164568-03:00 0HL5NUMIH66SC [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=4364a9f398a6e9f972294b9d2b061bec   (e5be5b71)
2017-06-20T13:03:48.8194578-03:00 0HL5NUMIH66SC [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["4364a9f398a6e9f972294b9d2b061bec"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:04:39.0576199-03:00 0HL5NUMIH66SC [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T13:04:39.0676266-03:00 0HL5NUMIH66SC [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T13:04:39.2937783-03:00 0HL5NUMIH66SC [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 50251.398ms (afa2e885)
2017-06-20T13:04:39.3948451-03:00 0HL5NUMIH66SC [INF] Request finished in 50481.3701ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:04:47.5252927-03:00 0HL5NUMIH66SD [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?logoutId=eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T13:04:47.5292946-03:00 0HL5NUMIH66SD [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T13:04:47.5312972-03:00 0HL5NUMIH66SD [INF] End session request validation success
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"logoutId\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ1MjcsImV4cCI6MTQ5Nzk3ODEyNywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NTI3LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.NYChp7cckpHERZXkA23A9KgAAFWfs3noNkuY5u3LTRmiPJGMM_tcR7Gpgvqt_P1c6eNxMD9olZfEOazeQNpCWBE2WcejGFNElEptP5ph-_hTget7wqXDy2YQFnrB1ZdDjxHuTYJMPdxTTG-3GcSjyLe9Xi18LNpulDAJfbbm-GKVtWg_NsOlk71FBle4jqcamuUrsNOGkWfVxQs0jr4r4S3nABgWhyzGnhBvAQC1_44gyIdfAQkodW2lwfxUWsWeLhd-1MuBaaS7eh1_Q0ZIRqcZ7lB0xhmikeFTf67aMwnk5o1doeuioxtNfvfDnRVcCcPhXnGGh7zJ0kqxj0WFhg\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (8a893fca)
2017-06-20T13:04:47.5453065-03:00 0HL5NUMIH66SD [INF] Request finished in 15.6629ms 302  (15c52c40)
2017-06-20T13:04:47.5493088-03:00 0HL5NUMIH66SE [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=107841ef80cbc16defa5d2d167f99eaa   (e5be5b71)
2017-06-20T13:04:47.5543148-03:00 0HL5NUMIH66SE [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["107841ef80cbc16defa5d2d167f99eaa"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:05:34.8296890-03:00 0HL5NUMIH66SE [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-20T13:05:34.8436984-03:00 0HL5NUMIH66SE [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-20T13:05:34.8817237-03:00 0HL5NUMIH66SE [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 47293.9421ms (afa2e885)
2017-06-20T13:05:34.9447656-03:00 0HL5NUMIH66SE [INF] Request finished in 47335.6971ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:05:42.0821996-03:00 0HL5NUMIH66SF [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979747398810.19473288175752446   (e5be5b71)
2017-06-20T13:05:42.0852014-03:00 0HL5NUMIH66SF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-20T13:05:42.0962098-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:05:42.1022130-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:05:42.1092183-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:05:42.1162240-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:05:42.1342347-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (11ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:05:42.1542481-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:05:42.1932739-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (23ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:05:42.2122872-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:05:42.2262966-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:05:42.2373033-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:05:42.2613197-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:05:42.2773304-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.3093505-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.3323669-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:05:42.3844008-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:05:42.3974097-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:05:42.4044146-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:05:42.4084168-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.4144212-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.4254284-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:05:42.4324333-03:00 0HL5NUMIH66SF [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:05:42.4394381-03:00 0HL5NUMIH66SF [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979747398810.19473288175752446\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979747398810.19473288175752446\"
  }
}" (9a175e33)
2017-06-20T13:05:42.4434404-03:00 0HL5NUMIH66SF [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-20T13:05:42.5234938-03:00 0HL5NUMIH66SF [INF] Request finished in 364.9183ms 302  (15c52c40)
2017-06-20T13:05:42.5294982-03:00 0HL5NUMIH66SG [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979747398810.19473288175752446   (e5be5b71)
2017-06-20T13:05:42.5375048-03:00 0HL5NUMIH66SG [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979747398810.19473288175752446"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:05:42.5455097-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:05:42.5495116-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:05:42.5545184-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:05:42.5605199-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:05:42.5715275-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:05:42.5855364-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:05:42.5935409-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:05:42.6015467-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:05:42.6095520-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:05:42.6145547-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:05:42.6205596-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:05:42.6295658-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.6335672-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.6395725-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:05:42.6455756-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:05:42.6515792-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:05:42.6575832-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:05:42.6625872-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.6685916-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:42.6745944-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:05:42.6795979-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:05:42.6856023-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:05:42.6896058-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:05:42.6936077-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:05:42.6976108-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:05:42.7016130-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:05:42.7076174-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:05:42.7136223-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:05:42.7176245-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:05:42.7226285-03:00 0HL5NUMIH66SG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:05:42.7276308-03:00 0HL5NUMIH66SG [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-20T13:05:42.7646557-03:00 0HL5NUMIH66SG [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 201.0366ms (afa2e885)
2017-06-20T13:05:42.8136882-03:00 0HL5NUMIH66SG [INF] Request finished in 239.6556ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-20T13:05:45.2584727-03:00 0HL5NUMIH66SH [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D14979747398810.19473288175752446 application/x-www-form-urlencoded 473 (e5be5b71)
2017-06-20T13:05:45.2614749-03:00 0HL5NUMIH66SH [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:05:45.2764847-03:00 0HL5NUMIH66SH [INF] Executed DbCommand (10ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-20T13:05:45.2794865-03:00 0HL5NUMIH66SH [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T13:05:45.2824899-03:00 0HL5NUMIH66SH [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979747398810.19473288175752446". (d98d540e)
2017-06-20T13:05:45.2844933-03:00 0HL5NUMIH66SH [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 23.7672ms (afa2e885)
2017-06-20T13:05:45.2944980-03:00 0HL5NUMIH66SH [INF] Request finished in 30.5877ms 302  (15c52c40)
2017-06-20T13:05:45.2985002-03:00 0HL5NUMIH66SI [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=14979747398810.19473288175752446   (e5be5b71)
2017-06-20T13:05:45.3055047-03:00 0HL5NUMIH66SI [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:05:45.3125108-03:00 0HL5NUMIH66SI [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:45.3175123-03:00 0HL5NUMIH66SI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-20T13:05:45.3215174-03:00 0HL5NUMIH66SI [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:45.3325229-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-20T13:05:45.3355239-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-20T13:05:45.3415291-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-20T13:05:45.3445301-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-20T13:05:45.3475331-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-20T13:05:45.3545413-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-20T13:05:45.3635430-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-20T13:05:45.3685465-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-20T13:05:45.3725500-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-20T13:05:45.3775527-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:05:45.3825559-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:05:45.3855573-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:45.3895608-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:45.3935634-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:05:45.3975661-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:05:45.4015688-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-20T13:05:45.4065727-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-20T13:05:45.4095733-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:45.4125755-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-20T13:05:45.4165790-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-20T13:05:45.4195796-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-20T13:05:45.4225822-03:00 0HL5NUMIH66SI [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:45.4255844-03:00 0HL5NUMIH66SI [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"14979747398810.19473288175752446\",
  \"SessionId\": \"8c45e7d18fdf184ff1000d69287f98b6\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"14979747398810.19473288175752446\"
  }
}" (9a175e33)
2017-06-20T13:05:45.4305867-03:00 0HL5NUMIH66SI [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-20T13:05:45.4465994-03:00 0HL5NUMIH66SI [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"14979747398810.19473288175752446\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-20T13:05:45.4506017-03:00 0HL5NUMIH66SI [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:45.4526026-03:00 0HL5NUMIH66SI [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:45.4566053-03:00 0HL5NUMIH66SI [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-20T13:05:45.4596067-03:00 0HL5NUMIH66SI [INF] Request finished in 160.8506ms 302  (15c52c40)
2017-06-20T13:05:50.7727316-03:00 0HL5NUMIH66SJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?logoutId=eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ3NDUsImV4cCI6MTQ5Nzk3ODM0NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NzQ1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.HhCkwtNp18cK9Nhaj9LIArjBQ_3KcvrOhYW6I_xcW8xOy641xvLN9FbKNE1MLewVLereTJD04wvhSQx199no5sP_48VKsi7wT3cXgaIcld2RqJAjdfEVPmtvDcelAc3Ab9yAYEQwTvysvhzsLgyytctcq6b6ts8qYzs0vcbwcGQo9c498m4Y7edrBJ3jb05e46W4wdMluw9jz9GJatqYiWlpaXHhMyezhYzNtfo_ec28D3KWH8aLZFdPpYvNwrnWHC56fMKdpFTLvE2BY_2c3536NJz9y3DrQhchrikF1F9QONlXFWVOyNUoCRs23AB97W_AOsWru8OqOoKGq7k2bg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080   (e5be5b71)
2017-06-20T13:05:50.7757334-03:00 0HL5NUMIH66SJ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:05:50.7777340-03:00 0HL5NUMIH66SJ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:50.7807362-03:00 0HL5NUMIH66SJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-20T13:05:50.7837384-03:00 0HL5NUMIH66SJ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:50.7857405-03:00 0HL5NUMIH66SJ [INF] End session request validation success
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"logoutId\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6ImI5NGE2NDVmMGMyZTZkMTJhYzRjY2RjZTgyNThkMjY4IiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTc5NzQ3NDUsImV4cCI6MTQ5Nzk3ODM0NSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk3OTc0NzQ1LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.HhCkwtNp18cK9Nhaj9LIArjBQ_3KcvrOhYW6I_xcW8xOy641xvLN9FbKNE1MLewVLereTJD04wvhSQx199no5sP_48VKsi7wT3cXgaIcld2RqJAjdfEVPmtvDcelAc3Ab9yAYEQwTvysvhzsLgyytctcq6b6ts8qYzs0vcbwcGQo9c498m4Y7edrBJ3jb05e46W4wdMluw9jz9GJatqYiWlpaXHhMyezhYzNtfo_ec28D3KWH8aLZFdPpYvNwrnWHC56fMKdpFTLvE2BY_2c3536NJz9y3DrQhchrikF1F9QONlXFWVOyNUoCRs23AB97W_AOsWru8OqOoKGq7k2bg\",
    \"post_logout_redirect_uri\": \"http://localhost:8080\"
  }
}" (8a893fca)
2017-06-20T13:05:50.7897539-03:00 0HL5NUMIH66SJ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:50.7967477-03:00 0HL5NUMIH66SJ [INF] Request finished in 20.4875ms 302  (15c52c40)
2017-06-20T13:05:50.8007503-03:00 0HL5NUMIH66SK [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=aabf10292212463110f0a74c133cbc0b   (e5be5b71)
2017-06-20T13:05:50.8057539-03:00 0HL5NUMIH66SK [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-20T13:05:50.8097553-03:00 0HL5NUMIH66SK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:05:50.8137584-03:00 0HL5NUMIH66SK [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["aabf10292212463110f0a74c133cbc0b"]) - ModelState is Valid (ba7f4ac2)
2017-06-20T13:06:03.2751209-03:00 0HL5NUMIH66SK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:06:08.8388315-03:00 0HL5NUMIH66SK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:06:08.8418333-03:00 0HL5NUMIH66SK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:06:08.8438347-03:00 0HL5NUMIH66SK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-20T13:06:38.6817393-03:00 0HL5NUMIH66SK [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-20T13:06:38.6947481-03:00 0HL5NUMIH66SK [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 47878.1279ms (afa2e885)
2017-06-20T13:06:39.0790041-03:00 0HL5NUMIH66SK [INF] Request finished in 47897.0061ms 200 text/html; charset=utf-8 (15c52c40)
