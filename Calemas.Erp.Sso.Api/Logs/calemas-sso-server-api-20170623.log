2017-06-23T12:21:58.5116686-03:00  [INF] User profile is available. Using '"C:\Users\bruun\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2017-06-23T12:21:59.1691419-03:00 0HL5Q9EBMLFP1 [INF] Request starting HTTP/1.1 DEBUG http://localhost:4000/  0 (e5be5b71)
2017-06-23T12:21:59.1691419-03:00 0HL5Q9EBMLFP0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/api/Health   (e5be5b71)
2017-06-23T12:21:59.5138834-03:00 0HL5Q9EBMLFP1 [INF] Request finished in 382.5013ms 200  (15c52c40)
2017-06-23T12:21:59.9306621-03:00 0HL5Q9EBMLFP0 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:21:59.9741907-03:00 0HL5Q9EBMLFP0 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:00.5365800-03:00 0HL5Q9EBMLFP0 [INF] Executing action method "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:22:00.5801094-03:00 0HL5Q9EBMLFP0 [INF] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext". (4e968210)
2017-06-23T12:22:00.6601712-03:00 0HL5Q9EBMLFP0 [INF] Executed action "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" in 210.2496ms (afa2e885)
2017-06-23T12:22:00.6751818-03:00 0HL5Q9EBMLFP0 [INF] Request finished in 1568.9192ms 200 text/plain; charset=utf-8 (15c52c40)
2017-06-23T12:22:17.1157470-03:00 0HL5Q9EBMLFP2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498231336738   (e5be5b71)
2017-06-23T12:22:17.1227523-03:00 0HL5Q9EBMLFP2 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:17.1267566-03:00 0HL5Q9EBMLFP2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:17.1617827-03:00 0HL5Q9EBMLFP2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:22:17.1968014-03:00 0HL5Q9EBMLFP2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:17.6476767-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (53ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:22:17.7899789-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:22:17.8175104-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:22:17.8255096-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:22:17.8335223-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:22:17.8435212-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:22:17.8525274-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:22:17.8625337-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:22:17.8715395-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:22:18.9043815-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:22:19.0244700-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:22:19.0544897-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:22:19.0705016-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:22:19.0835097-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:22:19.1080450-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:22:19.2406391-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:22:19.2446414-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:22:19.2496449-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:22:19.2576507-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:22:19.2616562-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:22:19.2646543-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:22:19.2786641-03:00 0HL5Q9EBMLFP2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:19.5156643-03:00 0HL5Q9EBMLFP2 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498231336738\",
  \"SessionId\": \"a46dfee2866d8369c9fff2377ca6567e\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"1498231336738\"
  }
}" (9a175e33)
2017-06-23T12:22:19.5666986-03:00 0HL5Q9EBMLFP2 [INF] Executed DbCommand (4ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T12:22:20.0512658-03:00 0HL5Q9EBMLFP2 [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498231336738\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-23T12:22:20.0692774-03:00 0HL5Q9EBMLFP2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:20.1063130-03:00 0HL5Q9EBMLFP2 [INF] Request finished in 2973.7223ms 302  (15c52c40)
2017-06-23T12:22:27.6758054-03:00 0HL5Q9EBMLFP3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzEzMzksImV4cCI6MTQ5ODIzNDkzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.Xg7muU6kbEIceOs-xARx8YjwNfn9JfydNvlpgzg2YD4-O8_iJda9S9H1lyUJUzZ2IHt5a4NWRDirnmQzeXAAr01baAFPG6yABYQC78W94PKokuxrAuEL0IJyOX9c5ASGG-XwlfRYGKTb9xasf3Npr1cyn0tdxA9eQDGdLGzZM0KLtUzRvT4WlQECmdnsLWmlo2nyVaZpzOtJtKSP8l1a6M8hdir88l6tVMHAfrdoonDUme5koxNLv4a-4MdTKVwvrgyL7URZRY20oq24DHcOUw38027BEiDRmoJhqjjl5O9dWwR5Uv-7GO0hxz3pjDq91HQV7DdfpllhNzfm5Yz21Q&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498231336738   (e5be5b71)
2017-06-23T12:22:27.6788162-03:00 0HL5Q9EBMLFP3 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:27.6808188-03:00 0HL5Q9EBMLFP3 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:27.6848215-03:00 0HL5Q9EBMLFP3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T12:22:27.6983378-03:00 0HL5Q9EBMLFP3 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:27.7503734-03:00 0HL5Q9EBMLFP3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:22:27.7543761-03:00 0HL5Q9EBMLFP3 [ERR] Unknown or diabled client: "http://localhost:4000/resources". (c5f9b67a)
2017-06-23T12:22:27.7613805-03:00 0HL5Q9EBMLFP3 [INF] End session request validation failure: Error validating id token hint
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzEzMzksImV4cCI6MTQ5ODIzNDkzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.Xg7muU6kbEIceOs-xARx8YjwNfn9JfydNvlpgzg2YD4-O8_iJda9S9H1lyUJUzZ2IHt5a4NWRDirnmQzeXAAr01baAFPG6yABYQC78W94PKokuxrAuEL0IJyOX9c5ASGG-XwlfRYGKTb9xasf3Npr1cyn0tdxA9eQDGdLGzZM0KLtUzRvT4WlQECmdnsLWmlo2nyVaZpzOtJtKSP8l1a6M8hdir88l6tVMHAfrdoonDUme5koxNLv4a-4MdTKVwvrgyL7URZRY20oq24DHcOUw38027BEiDRmoJhqjjl5O9dWwR5Uv-7GO0hxz3pjDq91HQV7DdfpllhNzfm5Yz21Q\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498231336738\"
  }
}" (a48d87f5)
2017-06-23T12:22:27.7643819-03:00 0HL5Q9EBMLFP3 [ERR] Error processing end session request "Invalid request" (7af74809)
2017-06-23T12:22:27.7733886-03:00 0HL5Q9EBMLFP3 [INF] Request finished in 96.1023ms 302  (15c52c40)
2017-06-23T12:22:27.7799078-03:00 0HL5Q9EBMLFP4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout   (e5be5b71)
2017-06-23T12:22:27.7834092-03:00 0HL5Q9EBMLFP4 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:27.7864118-03:00 0HL5Q9EBMLFP4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:28.0263006-03:00 0HL5Q9EBMLFP4 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments ([""]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:22:51.4599746-03:00 0HL5Q9EBMLFP4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:51.9901583-03:00 0HL5Q9EBMLFP4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:51.9996682-03:00 0HL5Q9EBMLFP4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:52.0026688-03:00 0HL5Q9EBMLFP4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:58.8640457-03:00 0HL5Q9EBMLFP4 [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-23T12:22:59.2703521-03:00 0HL5Q9EBMLFP4 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 31420.6294ms (afa2e885)
2017-06-23T12:22:59.2813568-03:00 0HL5Q9EBMLFP4 [INF] Request finished in 31499.5974ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:22:59.5866291-03:00 0HL5Q9EBMLFP5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:22:59.5896325-03:00 0HL5Q9EBMLFP6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:22:59.5956353-03:00 0HL5Q9EBMLFP5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:59.5966354-03:00 0HL5Q9EBMLFP6 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:59.6196509-03:00 0HL5Q9EBMLFP6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:59.6236590-03:00 0HL5Q9EBMLFP7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:22:59.6236590-03:00 0HL5Q9EBMLFP5 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:59.6281625-03:00 0HL5Q9EBMLFP7 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:59.6305822-03:00 0HL5Q9EBMLFP7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:59.6330823-03:00 0HL5Q9EBMLFP8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:22:59.6360849-03:00 0HL5Q9EBMLFP8 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:59.6385859-03:00 0HL5Q9EBMLFP8 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:59.6986728-03:00 0HL5Q9EBMLFP5 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:22:59.6986728-03:00 0HL5Q9EBMLFP8 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:22:59.6986728-03:00 0HL5Q9EBMLFP6 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:22:59.6986728-03:00 0HL5Q9EBMLFP7 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:22:59.7373378-03:00 0HL5Q9EBMLFP6 [INF] Request finished in 139.0677ms 200 text/css (15c52c40)
2017-06-23T12:22:59.7578561-03:00 0HL5Q9EBMLFP5 [INF] Request finished in 141.6864ms 200 text/css (15c52c40)
2017-06-23T12:22:59.7708654-03:00 0HL5Q9EBMLFP9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:22:59.7918785-03:00 0HL5Q9EBMLFP9 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:22:59.7948803-03:00 0HL5Q9EBMLFP9 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:22:59.7998838-03:00 0HL5Q9EBMLFP9 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:22:59.8539253-03:00 0HL5Q9EBMLFP9 [INF] Request finished in 68.8928ms 200 application/javascript (15c52c40)
2017-06-23T12:22:59.9660002-03:00 0HL5Q9EBMLFP8 [INF] Request finished in 254.3016ms 200 text/css (15c52c40)
2017-06-23T12:22:59.9805100-03:00 0HL5Q9EBMLFP7 [INF] Request finished in 250.964ms 200 application/javascript (15c52c40)
2017-06-23T12:26:56.7855674-03:00 0HL5Q9EBMLFPA [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzEzMzksImV4cCI6MTQ5ODIzNDkzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.Xg7muU6kbEIceOs-xARx8YjwNfn9JfydNvlpgzg2YD4-O8_iJda9S9H1lyUJUzZ2IHt5a4NWRDirnmQzeXAAr01baAFPG6yABYQC78W94PKokuxrAuEL0IJyOX9c5ASGG-XwlfRYGKTb9xasf3Npr1cyn0tdxA9eQDGdLGzZM0KLtUzRvT4WlQECmdnsLWmlo2nyVaZpzOtJtKSP8l1a6M8hdir88l6tVMHAfrdoonDUme5koxNLv4a-4MdTKVwvrgyL7URZRY20oq24DHcOUw38027BEiDRmoJhqjjl5O9dWwR5Uv-7GO0hxz3pjDq91HQV7DdfpllhNzfm5Yz21Q&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498231336738   (e5be5b71)
2017-06-23T12:26:56.8025785-03:00 0HL5Q9EBMLFPA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T12:26:56.8155915-03:00 0HL5Q9EBMLFPA [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:26:56.8180945-03:00 0HL5Q9EBMLFPA [ERR] Unknown or diabled client: "http://localhost:4000/resources". (c5f9b67a)
2017-06-23T12:26:56.8210943-03:00 0HL5Q9EBMLFPA [INF] End session request validation failure: Error validating id token hint
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzEzMzksImV4cCI6MTQ5ODIzNDkzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.Xg7muU6kbEIceOs-xARx8YjwNfn9JfydNvlpgzg2YD4-O8_iJda9S9H1lyUJUzZ2IHt5a4NWRDirnmQzeXAAr01baAFPG6yABYQC78W94PKokuxrAuEL0IJyOX9c5ASGG-XwlfRYGKTb9xasf3Npr1cyn0tdxA9eQDGdLGzZM0KLtUzRvT4WlQECmdnsLWmlo2nyVaZpzOtJtKSP8l1a6M8hdir88l6tVMHAfrdoonDUme5koxNLv4a-4MdTKVwvrgyL7URZRY20oq24DHcOUw38027BEiDRmoJhqjjl5O9dWwR5Uv-7GO0hxz3pjDq91HQV7DdfpllhNzfm5Yz21Q\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498231336738\"
  }
}" (a48d87f5)
2017-06-23T12:26:56.8230960-03:00 0HL5Q9EBMLFPA [ERR] Error processing end session request "Invalid request" (7af74809)
2017-06-23T12:26:56.8311055-03:00 0HL5Q9EBMLFPA [INF] Request finished in 47.3682ms 302  (15c52c40)
2017-06-23T12:26:56.9146637-03:00 0HL5Q9EBMLFPB [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout   (e5be5b71)
2017-06-23T12:26:56.9231699-03:00 0HL5Q9EBMLFPB [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments ([""]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:27:55.9872033-03:00 0HL5Q9EBMLFPB [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 59068.5077ms (afa2e885)
2017-06-23T12:27:56.0671016-03:00 0HL5Q9EBMLFPB [ERR] An unhandled exception has occurred while executing the request (cf926119)
System.NullReferenceException: Object reference not set to an instance of an object.
   at IdentityServer4.Quickstart.UI.AccountController.<Logout>d__11.MoveNext() in C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\Quickstart\Account\AccountController.cs:line 274
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at System.Runtime.CompilerServices.TaskAwaiter`1.GetResult()
   at IdentityServer4.Quickstart.UI.AccountController.<Logout>d__10.MoveNext() in C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\Quickstart\Account\AccountController.cs:line 261
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeActionMethodAsync>d__27.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextActionFilterAsync>d__25.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ActionExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeNextResourceFilter>d__22.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Rethrow(ResourceExecutedContext context)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Internal.ControllerActionInvoker.<InvokeAsync>d__20.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Builder.RouterMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.IdentityServerMiddleware.<Invoke>d__4.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.FederatedSignOutMiddleware.<Invoke>d__6.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.AuthenticationMiddleware.<Invoke>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware`1.<Invoke>d__18.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware`1.<Invoke>d__18.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware`1.<Invoke>d__18.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware`1.<Invoke>d__18.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at IdentityServer4.Hosting.BaseUrlMiddleware.<Invoke>d__2.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Cors.Infrastructure.CorsMiddleware.<Invoke>d__7.MoveNext()
--- End of stack trace from previous location where exception was thrown ---
   at System.Runtime.ExceptionServices.ExceptionDispatchInfo.Throw()
   at System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification(Task task)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.<Invoke>d__7.MoveNext()
2017-06-23T12:27:56.2225675-03:00 0HL5Q9EBMLFPB [INF] Request finished in 59307.0466ms 500 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:28:03.4941977-03:00 0HL5Q9EBMLFPC [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzEzMzksImV4cCI6MTQ5ODIzNDkzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.Xg7muU6kbEIceOs-xARx8YjwNfn9JfydNvlpgzg2YD4-O8_iJda9S9H1lyUJUzZ2IHt5a4NWRDirnmQzeXAAr01baAFPG6yABYQC78W94PKokuxrAuEL0IJyOX9c5ASGG-XwlfRYGKTb9xasf3Npr1cyn0tdxA9eQDGdLGzZM0KLtUzRvT4WlQECmdnsLWmlo2nyVaZpzOtJtKSP8l1a6M8hdir88l6tVMHAfrdoonDUme5koxNLv4a-4MdTKVwvrgyL7URZRY20oq24DHcOUw38027BEiDRmoJhqjjl5O9dWwR5Uv-7GO0hxz3pjDq91HQV7DdfpllhNzfm5Yz21Q&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498231336738   (e5be5b71)
2017-06-23T12:28:03.4972003-03:00 0HL5Q9EBMLFPC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T12:28:03.5082095-03:00 0HL5Q9EBMLFPC [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:28:03.5182141-03:00 0HL5Q9EBMLFPC [ERR] Unknown or diabled client: "http://localhost:4000/resources". (c5f9b67a)
2017-06-23T12:28:03.5212163-03:00 0HL5Q9EBMLFPC [INF] End session request validation failure: Error validating id token hint
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzEzMzksImV4cCI6MTQ5ODIzNDkzOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.Xg7muU6kbEIceOs-xARx8YjwNfn9JfydNvlpgzg2YD4-O8_iJda9S9H1lyUJUzZ2IHt5a4NWRDirnmQzeXAAr01baAFPG6yABYQC78W94PKokuxrAuEL0IJyOX9c5ASGG-XwlfRYGKTb9xasf3Npr1cyn0tdxA9eQDGdLGzZM0KLtUzRvT4WlQECmdnsLWmlo2nyVaZpzOtJtKSP8l1a6M8hdir88l6tVMHAfrdoonDUme5koxNLv4a-4MdTKVwvrgyL7URZRY20oq24DHcOUw38027BEiDRmoJhqjjl5O9dWwR5Uv-7GO0hxz3pjDq91HQV7DdfpllhNzfm5Yz21Q\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498231336738\"
  }
}" (a48d87f5)
2017-06-23T12:28:03.5242186-03:00 0HL5Q9EBMLFPC [ERR] Error processing end session request "Invalid request" (7af74809)
2017-06-23T12:28:03.5282204-03:00 0HL5Q9EBMLFPC [INF] Request finished in 32.686ms 302  (15c52c40)
2017-06-23T12:28:03.6117930-03:00 0HL5Q9EBMLFPD [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout   (e5be5b71)
2017-06-23T12:28:03.6177982-03:00 0HL5Q9EBMLFPD [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments ([""]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:28:21.9262337-03:00 0HL5Q9EBMLFPD [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-23T12:28:21.9362400-03:00 0HL5Q9EBMLFPD [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 18319.661ms (afa2e885)
2017-06-23T12:28:21.9402430-03:00 0HL5Q9EBMLFPD [INF] Request finished in 18329.0375ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:28:28.4508793-03:00 0HL5Q9EBMLFPE [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498231708063   (e5be5b71)
2017-06-23T12:28:28.4538807-03:00 0HL5Q9EBMLFPE [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:28:28.4578842-03:00 0HL5Q9EBMLFPE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:28:28.4628873-03:00 0HL5Q9EBMLFPE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:28:28.4658883-03:00 0HL5Q9EBMLFPE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:28:28.4758958-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:28:28.4828995-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:28:28.4939124-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:28:28.4999164-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:28:28.5044203-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:28:28.5115524-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:28:28.5175569-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:28:28.5325679-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (10ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:28:28.5395724-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:28:28.5485782-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:28:28.5585861-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:28:28.5735947-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:28:28.5901104-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:28:28.6141277-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:28:28.6371424-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:28:28.6411451-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:28:28.6441469-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:28:28.6471495-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:28:28.6491513-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:28:28.6521523-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:28:28.6551541-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:28:28.6571558-03:00 0HL5Q9EBMLFPE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:28:28.6601580-03:00 0HL5Q9EBMLFPE [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498231708063\",
  \"SessionId\": \"a46dfee2866d8369c9fff2377ca6567e\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"1498231708063\"
  }
}" (9a175e33)
2017-06-23T12:28:28.6651612-03:00 0HL5Q9EBMLFPE [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T12:28:28.6781709-03:00 0HL5Q9EBMLFPE [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498231708063\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-23T12:28:28.6811714-03:00 0HL5Q9EBMLFPE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:28:28.6881776-03:00 0HL5Q9EBMLFPE [INF] Request finished in 237.7059ms 302  (15c52c40)
2017-06-23T12:29:46.0874224-03:00 0HL5Q9EBMLFPF [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo   (e5be5b71)
2017-06-23T12:29:46.0924260-03:00 0HL5Q9EBMLFPF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-06-23T12:29:46.1049398-03:00 0HL5Q9EBMLFPF [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:29:46.1089420-03:00 0HL5Q9EBMLFPF [ERR] No access token found. (42a1926b)
2017-06-23T12:29:46.1134452-03:00 0HL5Q9EBMLFPF [INF] Request finished in 35.7453ms 401  (15c52c40)
2017-06-23T12:30:01.7746440-03:00 0HL5Q9EBMLFPG [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo   (e5be5b71)
2017-06-23T12:30:01.7826489-03:00 0HL5Q9EBMLFPG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-06-23T12:30:01.7876525-03:00 0HL5Q9EBMLFPG [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:30:01.8026619-03:00 0HL5Q9EBMLFPG [ERR] No access token found. (42a1926b)
2017-06-23T12:30:01.8126686-03:00 0HL5Q9EBMLFPG [INF] Request finished in 31.7566ms 401  (15c52c40)
2017-06-23T12:30:13.7259255-03:00 0HL5Q9EBMLFPH [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo   (e5be5b71)
2017-06-23T12:30:13.7294293-03:00 0HL5Q9EBMLFPH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-06-23T12:30:13.7319311-03:00 0HL5Q9EBMLFPH [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:30:13.8936876-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:30:13.8996912-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:30:13.9046940-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:30:13.9096983-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:30:13.9147015-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:30:13.9197034-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:30:13.9247077-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:30:13.9302150-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:30:13.9357186-03:00 0HL5Q9EBMLFPH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:30:13.9502304-03:00 0HL5Q9EBMLFPH [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:30:13.9522318-03:00 0HL5Q9EBMLFPH [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:30:13.9562361-03:00 0HL5Q9EBMLFPH [INF] Request finished in 228.7489ms 403  (15c52c40)
2017-06-23T12:30:17.2727722-03:00 0HL5Q9EBMLFPI [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo application/json  (e5be5b71)
2017-06-23T12:30:17.2767744-03:00 0HL5Q9EBMLFPI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-06-23T12:30:17.2797783-03:00 0HL5Q9EBMLFPI [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:30:17.2847794-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:30:17.2877828-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:30:17.2907850-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:30:17.2947865-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:30:17.2977887-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:30:17.3007909-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:30:17.3037919-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:30:17.3067941-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:30:17.3097963-03:00 0HL5Q9EBMLFPI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:30:17.3127981-03:00 0HL5Q9EBMLFPI [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:30:17.3158015-03:00 0HL5Q9EBMLFPI [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:30:17.3188021-03:00 0HL5Q9EBMLFPI [INF] Request finished in 45.6604ms 403  (15c52c40)
2017-06-23T12:30:56.1495066-03:00 0HL5Q9EBMLFPJ [INF] Request starting HTTP/1.1 POST http://localhost:4000/connect/userinfo application/x-www-form-urlencoded 103 (e5be5b71)
2017-06-23T12:30:56.2475799-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.AllowedCorsOrigins].[Origin]
FROM [Clients] AS [x]
INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId] (6438bdd5)
2017-06-23T12:30:56.2525835-03:00 0HL5Q9EBMLFPJ [WRN] CorsPolicyService did not allow origin: "chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop" (f5320bfb)
2017-06-23T12:30:56.2555853-03:00 0HL5Q9EBMLFPJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-06-23T12:30:56.2575870-03:00 0HL5Q9EBMLFPJ [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:30:56.2645915-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:30:56.2700992-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:30:56.2776037-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:30:56.2821532-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:30:56.2871563-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:30:56.2921591-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:30:56.2971630-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:30:56.3011661-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:30:56.3061688-03:00 0HL5Q9EBMLFPJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:30:56.3101711-03:00 0HL5Q9EBMLFPJ [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:30:56.3121724-03:00 0HL5Q9EBMLFPJ [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:30:56.3171764-03:00 0HL5Q9EBMLFPJ [INF] Request finished in 167.6406ms 403  (15c52c40)
2017-06-23T12:31:08.2004896-03:00 0HL5Q9EBMLFPK [INF] Request starting HTTP/1.1 POST http://localhost:4000/connect/userinfo application/json 0 (e5be5b71)
2017-06-23T12:31:08.2094979-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [x.AllowedCorsOrigins].[Origin]
FROM [Clients] AS [x]
INNER JOIN [ClientCorsOrigins] AS [x.AllowedCorsOrigins] ON [x].[Id] = [x.AllowedCorsOrigins].[ClientId] (6438bdd5)
2017-06-23T12:31:08.2124980-03:00 0HL5Q9EBMLFPK [WRN] CorsPolicyService did not allow origin: "chrome-extension://fhbjgbiflinjbdggehcddcbncdddomop" (f5320bfb)
2017-06-23T12:31:08.2154998-03:00 0HL5Q9EBMLFPK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo" (f7642de5)
2017-06-23T12:31:08.2185016-03:00 0HL5Q9EBMLFPK [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:31:08.2255065-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:31:08.2315109-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:31:08.2365137-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:31:08.2415168-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:31:08.2465199-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:31:08.2525244-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:31:08.2575279-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:31:08.2635319-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:31:08.2675346-03:00 0HL5Q9EBMLFPK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:31:08.2715373-03:00 0HL5Q9EBMLFPK [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:31:08.2735382-03:00 0HL5Q9EBMLFPK [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:31:08.2775413-03:00 0HL5Q9EBMLFPK [INF] Request finished in 76.1185ms 403  (15c52c40)
2017-06-23T12:34:48.8520397-03:00 0HL5Q9EBMLFPL [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498232088435   (e5be5b71)
2017-06-23T12:34:48.8550423-03:00 0HL5Q9EBMLFPL [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:34:48.8580441-03:00 0HL5Q9EBMLFPL [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:34:48.8600455-03:00 0HL5Q9EBMLFPL [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:34:48.8620468-03:00 0HL5Q9EBMLFPL [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:34:48.8740556-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:34:48.8790580-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:34:48.8840615-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:34:48.8890642-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:34:48.8930677-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:34:48.8980705-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:34:48.9030736-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:34:48.9080767-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:34:48.9130856-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:34:48.9180888-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:34:48.9245932-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:34:48.9336503-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:34:48.9426566-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:34:48.9516620-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:34:48.9716753-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:34:48.9746775-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:34:48.9776798-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:34:48.9806816-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:34:48.9826829-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:34:48.9856851-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:34:48.9886869-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:34:48.9906887-03:00 0HL5Q9EBMLFPL [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:34:48.9926896-03:00 0HL5Q9EBMLFPL [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498232088435\",
  \"SessionId\": \"a46dfee2866d8369c9fff2377ca6567e\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"1498232088435\"
  }
}" (9a175e33)
2017-06-23T12:34:48.9986940-03:00 0HL5Q9EBMLFPL [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T12:34:49.0097007-03:00 0HL5Q9EBMLFPL [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498232088435\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-23T12:34:49.0117050-03:00 0HL5Q9EBMLFPL [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:34:49.0142067-03:00 0HL5Q9EBMLFPL [INF] Request finished in 162.1087ms 302  (15c52c40)
2017-06-23T12:36:58.1822357-03:00 0HL5Q9EBMLFPM [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:36:58.2512821-03:00 0HL5Q9EBMLFPM [INF] Request finished in 18.1778ms 204  (15c52c40)
2017-06-23T12:36:58.4599344-03:00 0HL5Q9EBMLFPN [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:36:58.4749495-03:00 0HL5Q9EBMLFPN [INF] Request finished in 26.5679ms 404  (15c52c40)
2017-06-23T12:37:08.6750476-03:00 0HL5Q9EBMLFPO [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:37:08.6780502-03:00 0HL5Q9EBMLFPO [INF] Request finished in 2.6286ms 204  (15c52c40)
2017-06-23T12:37:08.9975958-03:00 0HL5Q9EBMLFPP [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:37:09.0015989-03:00 0HL5Q9EBMLFPP [INF] Request finished in 2.9073ms 404  (15c52c40)
2017-06-23T12:37:19.3142994-03:00 0HL5Q9EBMLFPQ [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:37:19.3298142-03:00 0HL5Q9EBMLFPQ [INF] Request finished in 15.5024ms 204  (15c52c40)
2017-06-23T12:37:19.6245773-03:00 0HL5Q9EBMLFPR [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:37:19.6290841-03:00 0HL5Q9EBMLFPR [INF] Request finished in 3.216ms 404  (15c52c40)
2017-06-23T12:38:16.6627780-03:00 0HL5Q9EBMLFPS [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:38:16.6677812-03:00 0HL5Q9EBMLFPS [INF] Request finished in 11.7473ms 204  (15c52c40)
2017-06-23T12:38:17.0915786-03:00 0HL5Q9EBMLFPT [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:38:17.1065885-03:00 0HL5Q9EBMLFPT [INF] Request finished in 12.5622ms 404  (15c52c40)
2017-06-23T12:38:48.1612264-03:00 0HL5Q9EBMLFPU [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:38:48.1672308-03:00 0HL5Q9EBMLFPU [INF] Request finished in 47.9561ms 204  (15c52c40)
2017-06-23T12:38:48.4049085-03:00 0HL5Q9EBMLFPV [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:38:48.4154156-03:00 0HL5Q9EBMLFPV [INF] Request finished in 5.7494ms 404  (15c52c40)
2017-06-23T12:39:57.8292368-03:00 0HL5Q9EBMLFQ0 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:39:57.8482493-03:00 0HL5Q9EBMLFQ0 [INF] Request finished in 34.4127ms 204  (15c52c40)
2017-06-23T12:39:58.2173378-03:00 0HL5Q9EBMLFQ1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:39:58.2273445-03:00 0HL5Q9EBMLFQ1 [INF] Request finished in 2.7267ms 404  (15c52c40)
2017-06-23T12:40:27.7055373-03:00 0HL5Q9EBMLFQ2 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:40:27.7145431-03:00 0HL5Q9EBMLFQ2 [INF] Request finished in 24.1338ms 204  (15c52c40)
2017-06-23T12:40:28.0097668-03:00 0HL5Q9EBMLFQ3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?pageSize=10&pageIndex=0&isPaginate=true&queryOptimizerBehavior=   (e5be5b71)
2017-06-23T12:40:28.0147708-03:00 0HL5Q9EBMLFQ3 [INF] Request finished in 3.1261ms 404  (15c52c40)
2017-06-23T12:40:45.5771606-03:00 0HL5Q9EBMLFQ4 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?   (e5be5b71)
2017-06-23T12:40:45.5926709-03:00 0HL5Q9EBMLFQ4 [INF] Request finished in 12.9477ms 204  (15c52c40)
2017-06-23T12:40:45.9227044-03:00 0HL5Q9EBMLFQ5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?   (e5be5b71)
2017-06-23T12:40:45.9327115-03:00 0HL5Q9EBMLFQ5 [INF] Request finished in 9.484ms 404  (15c52c40)
2017-06-23T12:41:06.3728731-03:00 0HL5Q9EBMLFQ6 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?   (e5be5b71)
2017-06-23T12:41:06.3833847-03:00 0HL5Q9EBMLFQ6 [INF] Request finished in 3.8409ms 204  (15c52c40)
2017-06-23T12:41:06.6979363-03:00 0HL5Q9EBMLFQ7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?   (e5be5b71)
2017-06-23T12:41:06.7389631-03:00 0HL5Q9EBMLFQ7 [INF] Request finished in 12.4403ms 404  (15c52c40)
2017-06-23T12:41:14.3829779-03:00 0HL5Q9EBMLFQ8 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/connect/userinfo/?   (e5be5b71)
2017-06-23T12:41:14.3929850-03:00 0HL5Q9EBMLFQ8 [INF] Request finished in 3.8199ms 204  (15c52c40)
2017-06-23T12:41:14.7592692-03:00 0HL5Q9EBMLFQ9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/connect/userinfo/?   (e5be5b71)
2017-06-23T12:41:14.7642723-03:00 0HL5Q9EBMLFQ9 [INF] Request finished in 3.2021ms 404  (15c52c40)
2017-06-23T12:41:23.1748552-03:00 0HL5Q9EBMLFQA [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:41:23.1938722-03:00 0HL5Q9EBMLFQA [INF] Request finished in 44.091ms 204  (15c52c40)
2017-06-23T12:41:23.7279334-03:00 0HL5Q9EBMLFQB [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:41:23.7299355-03:00 0HL5Q9EBMLFQB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:41:23.7319356-03:00 0HL5Q9EBMLFQB [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:41:23.7429440-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:41:23.7482251-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:41:23.7557308-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:41:23.7609109-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:41:23.7669149-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:41:23.7729201-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:41:23.7789229-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:41:23.7839281-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:41:23.7899301-03:00 0HL5Q9EBMLFQB [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:41:23.7939332-03:00 0HL5Q9EBMLFQB [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:41:23.7959349-03:00 0HL5Q9EBMLFQB [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:41:23.8039411-03:00 0HL5Q9EBMLFQB [INF] Request finished in 70.8908ms 403  (15c52c40)
2017-06-23T12:42:03.5575992-03:00 0HL5Q9EBMLFQC [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:03.6066310-03:00 0HL5Q9EBMLFQC [INF] Request finished in 84.9191ms 204  (15c52c40)
2017-06-23T12:42:04.1795139-03:00 0HL5Q9EBMLFQD [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:04.4131704-03:00 0HL5Q9EBMLFQD [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:42:04.5772801-03:00 0HL5Q9EBMLFQD [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:42:04.6548314-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:42:04.6753452-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:42:04.7153724-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:42:04.7574000-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (11ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:42:04.8114361-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (21ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:42:04.8239446-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (7ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:42:04.8379540-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:42:04.8574669-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:42:04.8914901-03:00 0HL5Q9EBMLFQD [INF] Executed DbCommand (14ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:42:04.8999954-03:00 0HL5Q9EBMLFQD [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:42:04.9080008-03:00 0HL5Q9EBMLFQD [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:42:04.9425240-03:00 0HL5Q9EBMLFQD [INF] Request finished in 833.214ms 403  (15c52c40)
2017-06-23T12:42:07.4670994-03:00 0HL5Q9EBMLFQE [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:07.4791074-03:00 0HL5Q9EBMLFQE [INF] Request finished in 22.7339ms 204  (15c52c40)
2017-06-23T12:42:07.8103322-03:00 0HL5Q9EBMLFQF [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:07.8133344-03:00 0HL5Q9EBMLFQF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:42:07.8163371-03:00 0HL5Q9EBMLFQF [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:42:07.8243416-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:42:07.8303456-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:42:07.8393514-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:42:07.8453554-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:42:07.8583647-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (7ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:42:07.8658742-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:42:07.8773842-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (7ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:42:07.8833882-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:42:07.8923940-03:00 0HL5Q9EBMLFQF [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:42:07.8953954-03:00 0HL5Q9EBMLFQF [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:42:07.8973972-03:00 0HL5Q9EBMLFQF [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:42:07.9094060-03:00 0HL5Q9EBMLFQF [INF] Request finished in 90.5762ms 403  (15c52c40)
2017-06-23T12:42:15.0077515-03:00 0HL5Q9EBMLFQG [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:15.0227614-03:00 0HL5Q9EBMLFQG [INF] Request finished in 22.1973ms 204  (15c52c40)
2017-06-23T12:42:15.6136186-03:00 0HL5Q9EBMLFQH [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:15.6156204-03:00 0HL5Q9EBMLFQH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:42:15.6176229-03:00 0HL5Q9EBMLFQH [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:42:15.6256266-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:42:15.6301347-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:42:15.6361387-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:42:15.6421431-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:42:15.6471504-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:42:15.6521547-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:42:15.6581571-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:42:15.6631647-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:42:15.6691659-03:00 0HL5Q9EBMLFQH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:42:15.6721673-03:00 0HL5Q9EBMLFQH [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:42:15.6751687-03:00 0HL5Q9EBMLFQH [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:42:15.6841749-03:00 0HL5Q9EBMLFQH [INF] Request finished in 64.5251ms 403  (15c52c40)
2017-06-23T12:42:22.1317569-03:00 0HL5Q9EBMLFQI [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:22.1547815-03:00 0HL5Q9EBMLFQI [INF] Request finished in 3.8655ms 204  (15c52c40)
2017-06-23T12:42:22.6574181-03:00 0HL5Q9EBMLFQJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:22.6595751-03:00 0HL5Q9EBMLFQJ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:42:22.6615780-03:00 0HL5Q9EBMLFQJ [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:42:22.6675821-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:42:22.6735848-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:42:22.6775883-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:42:22.6825907-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:42:22.6885947-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:42:22.6935982-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:42:22.6986014-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:42:22.7026061-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:42:22.7076117-03:00 0HL5Q9EBMLFQJ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:42:22.7106090-03:00 0HL5Q9EBMLFQJ [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:42:22.7126119-03:00 0HL5Q9EBMLFQJ [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:42:22.7196164-03:00 0HL5Q9EBMLFQJ [INF] Request finished in 57.8704ms 403  (15c52c40)
2017-06-23T12:42:31.2202936-03:00 0HL5Q9EBMLFQK [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:31.3553841-03:00 0HL5Q9EBMLFQK [INF] Request finished in 4.3282ms 204  (15c52c40)
2017-06-23T12:42:31.6300673-03:00 0HL5Q9EBMLFQL [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:31.6395740-03:00 0HL5Q9EBMLFQL [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:42:31.6480798-03:00 0HL5Q9EBMLFQL [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:42:31.6580865-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:42:31.6655914-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:42:31.6720958-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:42:31.6771010-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:42:31.6831026-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:42:31.6896111-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:42:31.6956147-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:42:31.7026192-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:42:31.7076232-03:00 0HL5Q9EBMLFQL [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:42:31.7106254-03:00 0HL5Q9EBMLFQL [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:42:31.7126263-03:00 0HL5Q9EBMLFQL [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:42:31.7206317-03:00 0HL5Q9EBMLFQL [INF] Request finished in 88.723ms 403  (15c52c40)
2017-06-23T12:42:58.0691004-03:00 0HL5Q9EBMLFQM [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:58.0741036-03:00 0HL5Q9EBMLFQM [INF] Request finished in 3.2321ms 204  (15c52c40)
2017-06-23T12:42:58.3633155-03:00 0HL5Q9EBMLFQN [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:42:58.3653161-03:00 0HL5Q9EBMLFQN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:42:58.3673190-03:00 0HL5Q9EBMLFQN [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:42:58.3743223-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:42:58.3793262-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:42:58.3853294-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:42:58.3903334-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:42:58.3953406-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:42:58.4008438-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:42:58.4058469-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:42:58.4103537-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:42:58.4163594-03:00 0HL5Q9EBMLFQN [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:42:58.4203608-03:00 0HL5Q9EBMLFQN [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:42:58.4223622-03:00 0HL5Q9EBMLFQN [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:42:58.4253636-03:00 0HL5Q9EBMLFQN [INF] Request finished in 61.9523ms 403  (15c52c40)
2017-06-23T12:43:04.4947104-03:00 0HL5Q9EBMLFQO [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:43:04.5057180-03:00 0HL5Q9EBMLFQO [INF] Request finished in 4.9317ms 204  (15c52c40)
2017-06-23T12:43:05.1324092-03:00 0HL5Q9EBMLFQP [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:43:05.1364127-03:00 0HL5Q9EBMLFQP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:43:05.1394145-03:00 0HL5Q9EBMLFQP [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:43:05.1454189-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:43:05.1484203-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:43:05.1544256-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:43:05.1574266-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:43:05.1594275-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:43:05.1624301-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:43:05.1654323-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:43:05.1694375-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:43:05.1734373-03:00 0HL5Q9EBMLFQP [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:43:05.1764391-03:00 0HL5Q9EBMLFQP [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498231708,
    \"exp\": 1498235308,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:43:05.1794413-03:00 0HL5Q9EBMLFQP [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:43:05.1924506-03:00 0HL5Q9EBMLFQP [INF] Request finished in 49.2727ms 403  (15c52c40)
2017-06-23T12:43:23.3366113-03:00 0HL5Q9EBMLFQQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498232602984   (e5be5b71)
2017-06-23T12:43:23.3391127-03:00 0HL5Q9EBMLFQQ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:43:23.3411153-03:00 0HL5Q9EBMLFQQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:43:23.3481189-03:00 0HL5Q9EBMLFQQ [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:43:23.3511244-03:00 0HL5Q9EBMLFQQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:43:23.3611311-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:43:23.3671363-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:43:23.3721383-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:43:23.3771418-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:43:23.3821449-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:43:23.3901507-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:43:23.3951534-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:43:23.4001566-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:43:23.4061622-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:43:23.4111645-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:43:23.4181690-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:43:23.4261756-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:43:23.4366852-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:43:23.4477868-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:43:23.4683030-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:43:23.4753071-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:43:23.4793098-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:43:23.4833124-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:43:23.4863184-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:43:23.4903177-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:43:23.4933191-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:43:23.4963218-03:00 0HL5Q9EBMLFQQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:43:23.4993231-03:00 0HL5Q9EBMLFQQ [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498232602984\",
  \"SessionId\": \"a46dfee2866d8369c9fff2377ca6567e\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"1498232602984\"
  }
}" (9a175e33)
2017-06-23T12:43:23.5033258-03:00 0HL5Q9EBMLFQQ [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T12:43:23.5173360-03:00 0HL5Q9EBMLFQQ [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498232602984\",
  \"Scope\": \"calemas\"
}" (5993a9fa)
2017-06-23T12:43:23.5213399-03:00 0HL5Q9EBMLFQQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:43:23.5263422-03:00 0HL5Q9EBMLFQQ [INF] Request finished in 188.1688ms 302  (15c52c40)
2017-06-23T12:43:27.5270024-03:00 0HL5Q9EBMLFQR [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:43:27.5530251-03:00 0HL5Q9EBMLFQR [INF] Request finished in 35.6648ms 204  (15c52c40)
2017-06-23T12:43:27.7881956-03:00 0HL5Q9EBMLFQS [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T12:43:27.7921970-03:00 0HL5Q9EBMLFQS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:43:27.7972014-03:00 0HL5Q9EBMLFQS [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:43:27.8042055-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:43:27.8082077-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:43:27.8112099-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:43:27.8142117-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:43:27.8192157-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:43:27.8232180-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:43:27.8272206-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:43:27.8302229-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:43:27.8332242-03:00 0HL5Q9EBMLFQS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:43:27.8382278-03:00 0HL5Q9EBMLFQS [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498232603,
    \"exp\": 1498236203,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:43:27.8412300-03:00 0HL5Q9EBMLFQS [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:43:27.8452335-03:00 0HL5Q9EBMLFQS [INF] Request finished in 55.6022ms 403  (15c52c40)
2017-06-23T12:45:05.1573962-03:00 0HL5Q9EBMLFQT [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=calemas   (e5be5b71)
2017-06-23T12:45:05.1734069-03:00 0HL5Q9EBMLFQT [INF] Request finished in 97.7297ms 204  (15c52c40)
2017-06-23T12:45:05.4081566-03:00 0HL5Q9EBMLFQU [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=calemas   (e5be5b71)
2017-06-23T12:45:05.4111588-03:00 0HL5Q9EBMLFQU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:45:05.4131605-03:00 0HL5Q9EBMLFQU [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:45:05.4231672-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:45:05.4311726-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:45:05.4391771-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:45:05.4451811-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:45:05.4541886-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:45:05.4611930-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:45:05.4667016-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:45:05.4742061-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:45:05.4792092-03:00 0HL5Q9EBMLFQU [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:45:05.4827147-03:00 0HL5Q9EBMLFQU [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498232603,
    \"exp\": 1498236203,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:45:05.4847165-03:00 0HL5Q9EBMLFQU [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:45:05.4897204-03:00 0HL5Q9EBMLFQU [INF] Request finished in 80.5083ms 403  (15c52c40)
2017-06-23T12:47:22.3242823-03:00 0HL5Q9EBMLFQV [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20profile%20email%20calemas   (e5be5b71)
2017-06-23T12:47:22.3292854-03:00 0HL5Q9EBMLFQV [INF] Request finished in 3.324ms 204  (15c52c40)
2017-06-23T12:47:22.7025478-03:00 0HL5Q9EBMLFR0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20profile%20email%20calemas   (e5be5b71)
2017-06-23T12:47:22.7055496-03:00 0HL5Q9EBMLFR0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:47:22.7085506-03:00 0HL5Q9EBMLFR0 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:47:22.7195581-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:47:22.7255667-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:47:22.7310702-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:47:22.7375780-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:47:22.7425815-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:47:22.7485851-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:47:22.7545899-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:47:22.7595923-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:47:22.7665984-03:00 0HL5Q9EBMLFR0 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:47:22.7695998-03:00 0HL5Q9EBMLFR0 [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498232603,
    \"exp\": 1498236203,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:47:22.7726012-03:00 0HL5Q9EBMLFR0 [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:47:22.7756030-03:00 0HL5Q9EBMLFR0 [INF] Request finished in 72.3934ms 403  (15c52c40)
2017-06-23T12:47:30.7804657-03:00 0HL5Q9EBMLFR1 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20profile%20email%20calemas   (e5be5b71)
2017-06-23T12:47:30.8229942-03:00 0HL5Q9EBMLFR1 [INF] Request finished in 106.1837ms 204  (15c52c40)
2017-06-23T12:47:41.4294923-03:00 0HL5Q9EBMLFR2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20profile%20email%20calemas   (e5be5b71)
2017-06-23T12:47:41.4319936-03:00 0HL5Q9EBMLFR2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T12:47:41.4339950-03:00 0HL5Q9EBMLFR2 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T12:47:41.4409995-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:47:41.4475043-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:47:41.4590123-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:47:41.4650159-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:47:41.4710199-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:47:41.4760231-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:47:41.4815266-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:47:41.4870302-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:47:41.4920338-03:00 0HL5Q9EBMLFR2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:47:41.4950364-03:00 0HL5Q9EBMLFR2 [ERR] Checking for expected scope openid failed
"{
  \"ValidateLifetime\": true,
  \"AccessTokenType\": \"Jwt\",
  \"ExpectedScope\": \"openid\",
  \"Claims\": {
    \"nbf\": 1498232603,
    \"exp\": 1498236203,
    \"iss\": \"http://localhost:4000\",
    \"aud\": [
      \"http://localhost:4000/resources\",
      \"ssocalemas\"
    ],
    \"client_id\": \"ssocalemas\",
    \"sub\": \"1\",
    \"auth_time\": 1498230979,
    \"idp\": \"local\",
    \"name\": [
      \"admin\",
      \"Administrador\"
    ],
    \"email\": \"admin@email.com.br\",
    \"role\": \"admin\",
    \"scope\": \"calemas\",
    \"amr\": \"pwd\"
  }
}" (8179f7e5)
2017-06-23T12:47:41.4970369-03:00 0HL5Q9EBMLFR2 [ERR] insufficient_scope (6a3b0d1f)
2017-06-23T12:47:41.5020409-03:00 0HL5Q9EBMLFR2 [INF] Request finished in 72.8958ms 403  (15c52c40)
2017-06-23T12:47:41.5695863-03:00 0HL5Q9EBMLFR3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzI2MDMsImV4cCI6MTQ5ODIzNjIwMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.TYubSjIxNjpITGPJqVdYMKKuu8Xan990OsaSPZTQTdIDgbEp_-QHl8Vl0YazXNasrzeqCFAv48umu0RgAOMCIQSXJqxfNP4smgJ_Tf5ADRZSvr61ibI2df5cttG6igCXrYUV7qkLhXivL1O2tg2wt7musd63ItxwQvBL_3QQaSLnLxhmCigRI5KGPKuVYI0dOx0v9yzpghom-krWIrd6tmCWvdVGLrWlVWkBGJCmCvf_BR8oflp-O-SW_BAsWMuNdw3hRjeTncj-LBIuEyYjRMEZGCGMD1ZS5lLaJLl29I8CcaceLEcrNKGbvOmeWn7kNPPvEAKc2An5NcTNV87ziQ&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498232602984   (e5be5b71)
2017-06-23T12:47:41.5730881-03:00 0HL5Q9EBMLFR3 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:41.5790934-03:00 0HL5Q9EBMLFR3 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.5835957-03:00 0HL5Q9EBMLFR3 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T12:47:41.5875979-03:00 0HL5Q9EBMLFR3 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.5941024-03:00 0HL5Q9EBMLFR3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:47:41.5971042-03:00 0HL5Q9EBMLFR3 [ERR] Unknown or diabled client: "http://localhost:4000/resources". (c5f9b67a)
2017-06-23T12:47:41.6016077-03:00 0HL5Q9EBMLFR3 [INF] End session request validation failure: Error validating id token hint
"{
  \"SubjectId\": \"unknown\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjAzNmI0NDlhMTNiMzE1YmY5MjcyMGQ3NTY2M2QwNjdjIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzI2MDMsImV4cCI6MTQ5ODIzNjIwMywiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjpbImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMC9yZXNvdXJjZXMiLCJzc29jYWxlbWFzIl0sImNsaWVudF9pZCI6InNzb2NhbGVtYXMiLCJzdWIiOiIxIiwiYXV0aF90aW1lIjoxNDk4MjMwOTc5LCJpZHAiOiJsb2NhbCIsIm5hbWUiOlsiYWRtaW4iLCJBZG1pbmlzdHJhZG9yIl0sImVtYWlsIjoiYWRtaW5AZW1haWwuY29tLmJyIiwicm9sZSI6ImFkbWluIiwic2NvcGUiOlsiY2FsZW1hcyJdLCJhbXIiOlsicHdkIl19.TYubSjIxNjpITGPJqVdYMKKuu8Xan990OsaSPZTQTdIDgbEp_-QHl8Vl0YazXNasrzeqCFAv48umu0RgAOMCIQSXJqxfNP4smgJ_Tf5ADRZSvr61ibI2df5cttG6igCXrYUV7qkLhXivL1O2tg2wt7musd63ItxwQvBL_3QQaSLnLxhmCigRI5KGPKuVYI0dOx0v9yzpghom-krWIrd6tmCWvdVGLrWlVWkBGJCmCvf_BR8oflp-O-SW_BAsWMuNdw3hRjeTncj-LBIuEyYjRMEZGCGMD1ZS5lLaJLl29I8CcaceLEcrNKGbvOmeWn7kNPPvEAKc2An5NcTNV87ziQ\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498232602984\"
  }
}" (a48d87f5)
2017-06-23T12:47:41.6076117-03:00 0HL5Q9EBMLFR3 [ERR] Error processing end session request "Invalid request" (7af74809)
2017-06-23T12:47:41.6231220-03:00 0HL5Q9EBMLFR3 [INF] Request finished in 44.4814ms 302  (15c52c40)
2017-06-23T12:47:41.6261246-03:00 0HL5Q9EBMLFR4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout   (e5be5b71)
2017-06-23T12:47:41.6316278-03:00 0HL5Q9EBMLFR4 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:41.6351300-03:00 0HL5Q9EBMLFR4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.6406344-03:00 0HL5Q9EBMLFR4 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments ([""]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:47:41.6426349-03:00 0HL5Q9EBMLFR4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.6476389-03:00 0HL5Q9EBMLFR4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.6516420-03:00 0HL5Q9EBMLFR4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.6546429-03:00 0HL5Q9EBMLFR4 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.6581448-03:00 0HL5Q9EBMLFR4 [INF] Executing ViewResult, running view at path "/Views/Account/Logout.cshtml". (9707eebe)
2017-06-23T12:47:41.7011741-03:00 0HL5Q9EBMLFR4 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 25.1889ms (afa2e885)
2017-06-23T12:47:41.7111808-03:00 0HL5Q9EBMLFR4 [INF] Request finished in 78.5152ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:47:41.8562780-03:00 0HL5Q9EBMLFR5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:47:41.8627821-03:00 0HL5Q9EBMLFR5 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:41.8667851-03:00 0HL5Q9EBMLFR5 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:41.8722883-03:00 0HL5Q9EBMLFR5 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:47:41.8782931-03:00 0HL5Q9EBMLFR5 [INF] Request finished in 20.3208ms 200 text/css (15c52c40)
2017-06-23T12:47:42.0041007-03:00 0HL5Q9EBMLFR6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:47:42.0071021-03:00 0HL5Q9EBMLFR7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:47:42.0116052-03:00 0HL5Q9EBMLFR6 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:42.0221123-03:00 0HL5Q9EBMLFR8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:47:42.0231132-03:00 0HL5Q9EBMLFR6 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:42.0261154-03:00 0HL5Q9EBMLFR7 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:42.0381230-03:00 0HL5Q9EBMLFR7 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:42.0406248-03:00 0HL5Q9EBMLFR8 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:42.0431262-03:00 0HL5Q9EBMLFR9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:47:42.0461288-03:00 0HL5Q9EBMLFR8 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:42.0506331-03:00 0HL5Q9EBMLFR9 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:42.0531337-03:00 0HL5Q9EBMLFR6 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:47:42.0636412-03:00 0HL5Q9EBMLFR8 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:47:42.1116721-03:00 0HL5Q9EBMLFR7 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:47:42.1116721-03:00 0HL5Q9EBMLFR6 [INF] Request finished in 89.9772ms 200 text/css (15c52c40)
2017-06-23T12:47:42.1271832-03:00 0HL5Q9EBMLFR9 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:42.1326863-03:00 0HL5Q9EBMLFR9 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:47:42.1461953-03:00 0HL5Q9EBMLFR8 [INF] Request finished in 125.4516ms 200 application/javascript (15c52c40)
2017-06-23T12:47:42.1727135-03:00 0HL5Q9EBMLFR9 [INF] Request finished in 158.9156ms 200 application/javascript (15c52c40)
2017-06-23T12:47:42.1812189-03:00 0HL5Q9EBMLFR7 [INF] Request finished in 172.2065ms 200 text/css (15c52c40)
2017-06-23T12:47:43.8451920-03:00 0HL5Q9EBMLFRA [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/Logout application/x-www-form-urlencoded 235 (e5be5b71)
2017-06-23T12:47:43.8597051-03:00 0HL5Q9EBMLFRA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T12:47:43.8652087-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:44.1193921-03:00 0HL5Q9EBMLFRA [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LogoutInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:47:44.1273950-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:44.1303976-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:44.1344019-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:44.1404055-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:44.1873809-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-23T12:47:44.1933849-03:00 0HL5Q9EBMLFRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T12:47:44.4533425-03:00 0HL5Q9EBMLFRA [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-23T12:47:44.4773606-03:00 0HL5Q9EBMLFRA [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 598.645ms (afa2e885)
2017-06-23T12:47:44.4963735-03:00 0HL5Q9EBMLFRA [INF] Request finished in 636.002ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:47:44.6439872-03:00 0HL5Q9EBMLFRB [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:47:44.6469890-03:00 0HL5Q9EBMLFRB [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:47:44.6605012-03:00 0HL5Q9EBMLFRB [INF] Request finished in 6.4904ms 200 text/css (15c52c40)
2017-06-23T12:47:44.7846256-03:00 0HL5Q9EBMLFRC [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:47:44.7886291-03:00 0HL5Q9EBMLFRD [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:47:44.7956332-03:00 0HL5Q9EBMLFRE [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:47:44.7966336-03:00 0HL5Q9EBMLFRC [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:47:44.7976341-03:00 0HL5Q9EBMLFRE [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:47:44.8136452-03:00 0HL5Q9EBMLFRC [INF] Request finished in 19.7099ms 200 text/css (15c52c40)
2017-06-23T12:47:44.8156465-03:00 0HL5Q9EBMLFRF [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=a46dfee2866d8369c9fff2377ca6567e   (e5be5b71)
2017-06-23T12:47:44.8186484-03:00 0HL5Q9EBMLFRG [INF] Request starting HTTP/1.1 GET http://localhost:4000/js/signout-redirect.js   (e5be5b71)
2017-06-23T12:47:44.8236523-03:00 0HL5Q9EBMLFRH [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:47:44.8256532-03:00 0HL5Q9EBMLFRD [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:47:44.8426648-03:00 0HL5Q9EBMLFRH [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:47:44.8501763-03:00 0HL5Q9EBMLFRG [INF] Sending file. Request path: '"/js/signout-redirect.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\js\signout-redirect.js"' (27b0a520)
2017-06-23T12:47:44.9032140-03:00 0HL5Q9EBMLFRF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-23T12:47:44.9447474-03:00 0HL5Q9EBMLFRD [INF] Request finished in 82.3894ms 200 application/javascript (15c52c40)
2017-06-23T12:47:44.9637599-03:00 0HL5Q9EBMLFRE [INF] Request finished in 112.3598ms 200 application/javascript (15c52c40)
2017-06-23T12:47:44.9917790-03:00 0HL5Q9EBMLFRH [INF] Request finished in 100.1165ms 200 text/css (15c52c40)
2017-06-23T12:47:44.9952809-03:00 0HL5Q9EBMLFRG [INF] Request finished in 85.344ms 200 application/javascript (15c52c40)
2017-06-23T12:47:45.0022857-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:47:45.0057884-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:47:45.0097911-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:47:45.0127925-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:47:45.0187969-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:47:45.0238000-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:47:45.0273018-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:47:45.0313045-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:47:45.0368081-03:00 0HL5Q9EBMLFRF [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:47:45.0468152-03:00 0HL5Q9EBMLFRF [INF] Successful signout callback. Client logout iframe urls: "http://localhost:8080/#/loggedout/?&sid=a46dfee2866d8369c9fff2377ca6567e&iss=http%3A%2F%2Flocalhost%3A4000" (76941251)
2017-06-23T12:47:45.0678294-03:00 0HL5Q9EBMLFRF [INF] Request finished in 277.185ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-23T12:47:48.5737241-03:00 0HL5Q9EBMLFRI [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=openid%20profile%20email%20calemas&state=1498232868193   (e5be5b71)
2017-06-23T12:47:48.5777267-03:00 0HL5Q9EBMLFRI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:47:48.5857317-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:47:48.5887339-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:47:48.5917365-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:47:48.5957384-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:47:48.5997427-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:47:48.6047454-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:47:48.6087477-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:47:48.6127503-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:47:48.6172608-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:47:48.6312677-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'profile', N'email', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:47:48.6522861-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:47:48.7373550-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:47:48.7673751-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:47:48.8003978-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:47:48.8344275-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:47:48.8934655-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (55ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:47:48.8984683-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'profile', N'email', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:47:48.9014705-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:47:48.9084754-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:47:48.9124780-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:47:48.9154798-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:47:48.9199924-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:47:48.9229942-03:00 0HL5Q9EBMLFRI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'profile', N'email', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:47:48.9264964-03:00 0HL5Q9EBMLFRI [ERR] Requests for token response type only must include resource scopes, but no identity scopes. (f8294810)
2017-06-23T12:47:48.9320000-03:00 0HL5Q9EBMLFRI [ERR] Request validation failed (abd529bc)
2017-06-23T12:47:48.9341027-03:00 0HL5Q9EBMLFRI [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid profile email calemas\",
  \"State\": \"1498232868193\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"openid profile email calemas\",
    \"state\": \"1498232868193\"
  }
}" (9899f104)
2017-06-23T12:47:48.9781326-03:00 0HL5Q9EBMLFRI [INF] Request finished in 402.83ms 302  (15c52c40)
2017-06-23T12:47:48.9831353-03:00 0HL5Q9EBMLFRJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=41c60b8b9c762c6395ee86a3c78747a3   (e5be5b71)
2017-06-23T12:47:48.9941425-03:00 0HL5Q9EBMLFRJ [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["41c60b8b9c762c6395ee86a3c78747a3"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:47:49.1612868-03:00 0HL5Q9EBMLFRJ [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:47:49.1712939-03:00 0HL5Q9EBMLFRJ [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 181.8897ms (afa2e885)
2017-06-23T12:47:49.1772975-03:00 0HL5Q9EBMLFRJ [INF] Request finished in 192.0614ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:47:49.3429680-03:00 0HL5Q9EBMLFRK [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:47:49.3469698-03:00 0HL5Q9EBMLFRK [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:47:49.3709867-03:00 0HL5Q9EBMLFRK [INF] Request finished in 18.521ms 200 text/css (15c52c40)
2017-06-23T12:47:49.4830743-03:00 0HL5Q9EBMLFRL [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:47:49.4920802-03:00 0HL5Q9EBMLFRM [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:47:49.4950824-03:00 0HL5Q9EBMLFRN [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:47:49.5020889-03:00 0HL5Q9EBMLFRM [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:47:49.5060891-03:00 0HL5Q9EBMLFRO [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:47:49.5070900-03:00 0HL5Q9EBMLFRN [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:47:49.5130948-03:00 0HL5Q9EBMLFRO [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:47:49.6246861-03:00 0HL5Q9EBMLFRO [INF] Request finished in 110.8063ms 200 application/javascript (15c52c40)
2017-06-23T12:47:49.6612102-03:00 0HL5Q9EBMLFRL [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:47:49.7682836-03:00 0HL5Q9EBMLFRM [INF] Request finished in 150.5112ms 200 text/css (15c52c40)
2017-06-23T12:47:49.8183158-03:00 0HL5Q9EBMLFRN [INF] Request finished in 156.0981ms 200 application/javascript (15c52c40)
2017-06-23T12:47:49.8398293-03:00 0HL5Q9EBMLFRL [INF] Request finished in 264.2927ms 200 text/css (15c52c40)
2017-06-23T12:49:33.8450943-03:00  [INF] User profile is available. Using '"C:\Users\bruun\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2017-06-23T12:49:34.4481394-03:00 0HL5Q9TP0KMK8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/api/Health   (e5be5b71)
2017-06-23T12:49:35.0973803-03:00 0HL5Q9TP0KMK8 [INF] Executing action method "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:49:35.1384083-03:00 0HL5Q9TP0KMK8 [INF] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext". (4e968210)
2017-06-23T12:49:35.2410574-03:00 0HL5Q9TP0KMK8 [INF] Executed action "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" in 204.0206ms (afa2e885)
2017-06-23T12:49:35.2765901-03:00 0HL5Q9TP0KMK8 [INF] Request finished in 864.6849ms 200 text/plain; charset=utf-8 (15c52c40)
2017-06-23T12:50:31.9207211-03:00 0HL5Q9TP0KMK9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498233031366   (e5be5b71)
2017-06-23T12:50:31.9377331-03:00 0HL5Q9TP0KMK9 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:50:32.3278157-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (47ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:50:32.4439044-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:50:32.4729215-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:50:32.4779292-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:50:32.4839323-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:50:32.4925153-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:50:32.5015207-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:50:32.5085252-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:50:32.5165326-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:50:33.1338067-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:50:33.1418145-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:50:33.2659011-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:50:33.2909193-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:50:33.3119372-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:50:33.3329576-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:50:33.3719810-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:50:33.4805594-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:50:33.4820607-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:50:33.4875639-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:50:33.4880639-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:50:33.4895669-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:50:33.4900673-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:50:33.4910661-03:00 0HL5Q9TP0KMK9 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:50:33.7536716-03:00 0HL5Q9TP0KMK9 [ERR] Nonce required for implicit and hybrid flow with openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498233031366\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498233031366\"
  }
}" (de0008da)
2017-06-23T12:50:33.7566742-03:00 0HL5Q9TP0KMK9 [ERR] Request validation failed (abd529bc)
2017-06-23T12:50:33.7576747-03:00 0HL5Q9TP0KMK9 [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498233031366\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498233031366\"
  }
}" (9899f104)
2017-06-23T12:50:33.9508220-03:00 0HL5Q9TP0KMK9 [INF] Request finished in 2029.9334ms 302  (15c52c40)
2017-06-23T12:50:33.9618267-03:00 0HL5Q9TP0KMKA [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=0521340c5fc8f309b5dfdd9c458acd55   (e5be5b71)
2017-06-23T12:50:34.1649766-03:00 0HL5Q9TP0KMKA [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["0521340c5fc8f309b5dfdd9c458acd55"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:50:36.3030755-03:00 0HL5Q9TP0KMKA [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:50:36.7729760-03:00 0HL5Q9TP0KMKA [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 2752.1321ms (afa2e885)
2017-06-23T12:50:36.7769782-03:00 0HL5Q9TP0KMKA [INF] Request finished in 2815.9286ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:50:36.9125831-03:00 0HL5Q9TP0KMKB [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:50:36.9315964-03:00 0HL5Q9TP0KMKB [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:50:36.9576134-03:00 0HL5Q9TP0KMKB [INF] Request finished in 45.1161ms 200 text/css (15c52c40)
2017-06-23T12:50:37.0536842-03:00 0HL5Q9TP0KMKC [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:50:37.0546904-03:00 0HL5Q9TP0KMKC [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:50:37.0556864-03:00 0HL5Q9TP0KMKC [INF] Request finished in 1.8662ms 200 text/css (15c52c40)
2017-06-23T12:50:37.0586873-03:00 0HL5Q9TP0KMKD [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:50:37.0596878-03:00 0HL5Q9TP0KMKD [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:50:37.0596878-03:00 0HL5Q9TP0KMKE [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:50:37.0596878-03:00 0HL5Q9TP0KMKE [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:50:37.0756985-03:00 0HL5Q9TP0KMKE [INF] Request finished in 16.5891ms 200 application/javascript (15c52c40)
2017-06-23T12:50:37.0766998-03:00 0HL5Q9TP0KMKD [INF] Request finished in 18.005ms 200 text/css (15c52c40)
2017-06-23T12:50:37.0766998-03:00 0HL5Q9TP0KMKF [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:50:37.0777002-03:00 0HL5Q9TP0KMKF [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:50:37.0877110-03:00 0HL5Q9TP0KMKF [INF] Request finished in 10.2796ms 200 application/javascript (15c52c40)
2017-06-23T12:52:17.4556538-03:00 0HL5Q9TP0KMKG [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid&scope=calemas&state=1498233136725   (e5be5b71)
2017-06-23T12:52:17.4576555-03:00 0HL5Q9TP0KMKG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:52:17.4701746-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:52:17.4766774-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:52:17.4796801-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:52:17.4856833-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:52:17.4886867-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:52:17.4916869-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:52:17.4946887-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:52:17.4966900-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:52:17.4996922-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:52:17.5057016-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:52:17.5107006-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:52:17.5177075-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:52:17.5187055-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:52:17.5197060-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:52:17.5217069-03:00 0HL5Q9TP0KMKG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:52:17.5217069-03:00 0HL5Q9TP0KMKG [ERR] Nonce required for implicit and hybrid flow with openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233136725\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid\",
    \"state\": \"1498233136725\"
  }
}" (de0008da)
2017-06-23T12:52:17.5217069-03:00 0HL5Q9TP0KMKG [ERR] Request validation failed (abd529bc)
2017-06-23T12:52:17.5227078-03:00 0HL5Q9TP0KMKG [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233136725\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid\",
    \"state\": \"1498233136725\"
  }
}" (9899f104)
2017-06-23T12:52:17.5307123-03:00 0HL5Q9TP0KMKG [INF] Request finished in 75.4818ms 302  (15c52c40)
2017-06-23T12:52:17.5387189-03:00 0HL5Q9TP0KMKH [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=2aec290fe86acb43a773e992af29eb31   (e5be5b71)
2017-06-23T12:52:17.5417215-03:00 0HL5Q9TP0KMKH [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["2aec290fe86acb43a773e992af29eb31"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:52:17.5457230-03:00 0HL5Q9TP0KMKH [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:52:17.5467239-03:00 0HL5Q9TP0KMKH [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 6.91ms (afa2e885)
2017-06-23T12:52:17.5467239-03:00 0HL5Q9TP0KMKH [INF] Request finished in 8.179ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:52:18.0979599-03:00 0HL5Q9TP0KMKI [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:52:18.0989604-03:00 0HL5Q9TP0KMKI [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:52:18.1009613-03:00 0HL5Q9TP0KMKI [INF] Request finished in 2.5863ms 200 text/css (15c52c40)
2017-06-23T12:52:18.1009613-03:00 0HL5Q9TP0KMKJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:52:18.1019622-03:00 0HL5Q9TP0KMKK [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:52:18.1029627-03:00 0HL5Q9TP0KMKJ [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:52:18.1029627-03:00 0HL5Q9TP0KMKL [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:52:18.1049632-03:00 0HL5Q9TP0KMKL [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:52:18.1059641-03:00 0HL5Q9TP0KMKJ [INF] Request finished in 4.9629ms 200 text/css (15c52c40)
2017-06-23T12:52:18.1069649-03:00 0HL5Q9TP0KMKL [INF] Request finished in 3.863ms 200 text/css (15c52c40)
2017-06-23T12:52:18.1069649-03:00 0HL5Q9TP0KMKK [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:52:18.1259770-03:00 0HL5Q9TP0KMKK [INF] Request finished in 24.6117ms 200 application/javascript (15c52c40)
2017-06-23T12:52:18.1269779-03:00 0HL5Q9TP0KMKM [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:52:18.1269779-03:00 0HL5Q9TP0KMKM [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:52:18.1449903-03:00 0HL5Q9TP0KMKM [INF] Request finished in 18.2127ms 200 application/javascript (15c52c40)
2017-06-23T12:53:00.0767794-03:00 0HL5Q9TP0KMKN [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=0521340c5fc8f309b5dfdd9c458acd55   (e5be5b71)
2017-06-23T12:53:00.0767794-03:00 0HL5Q9TP0KMKN [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["0521340c5fc8f309b5dfdd9c458acd55"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:53:00.0777795-03:00 0HL5Q9TP0KMKN [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:53:00.0787804-03:00 0HL5Q9TP0KMKN [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.3588ms (afa2e885)
2017-06-23T12:53:00.0787804-03:00 0HL5Q9TP0KMKN [INF] Request finished in 2.1335ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:53:00.2515108-03:00 0HL5Q9TP0KMKO [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:53:00.2515108-03:00 0HL5Q9TP0KMKO [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:53:00.2525116-03:00 0HL5Q9TP0KMKO [INF] Request finished in 1.4508ms 200 text/css (15c52c40)
2017-06-23T12:53:00.3913499-03:00 0HL5Q9TP0KMKP [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:53:00.3913499-03:00 0HL5Q9TP0KMKQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:53:00.3923507-03:00 0HL5Q9TP0KMKP [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:53:00.3933512-03:00 0HL5Q9TP0KMKP [INF] Request finished in 1.3477ms 200 text/css (15c52c40)
2017-06-23T12:53:00.3933512-03:00 0HL5Q9TP0KMKR [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:53:00.3933512-03:00 0HL5Q9TP0KMKQ [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:53:00.3933512-03:00 0HL5Q9TP0KMKR [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:53:00.3943525-03:00 0HL5Q9TP0KMKS [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:53:00.3953529-03:00 0HL5Q9TP0KMKS [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:53:00.4013570-03:00 0HL5Q9TP0KMKS [INF] Request finished in 6.4432ms 200 application/javascript (15c52c40)
2017-06-23T12:53:00.4023574-03:00 0HL5Q9TP0KMKQ [INF] Request finished in 10.4726ms 200 text/css (15c52c40)
2017-06-23T12:53:00.4043588-03:00 0HL5Q9TP0KMKR [INF] Request finished in 11.3388ms 200 application/javascript (15c52c40)
2017-06-23T12:53:07.2704933-03:00 0HL5Q9TP0KMKT [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid&scope=calemas&state=1498233186875   (e5be5b71)
2017-06-23T12:53:07.2714938-03:00 0HL5Q9TP0KMKT [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:53:07.2754964-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:53:07.2784986-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:53:07.2815070-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:53:07.2845027-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:53:07.2885049-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:53:07.2915059-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:53:07.2935072-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:53:07.2965090-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:53:07.2985108-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:53:07.3015126-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:53:07.3055157-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:53:07.3105192-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:53:07.3115201-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:53:07.3125210-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:53:07.3135210-03:00 0HL5Q9TP0KMKT [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:53:07.3135210-03:00 0HL5Q9TP0KMKT [ERR] Nonce required for implicit and hybrid flow with openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233186875\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid\",
    \"state\": \"1498233186875\"
  }
}" (de0008da)
2017-06-23T12:53:07.3145223-03:00 0HL5Q9TP0KMKT [ERR] Request validation failed (abd529bc)
2017-06-23T12:53:07.3145223-03:00 0HL5Q9TP0KMKT [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233186875\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid\",
    \"state\": \"1498233186875\"
  }
}" (9899f104)
2017-06-23T12:53:07.3155248-03:00 0HL5Q9TP0KMKT [INF] Request finished in 45.1214ms 302  (15c52c40)
2017-06-23T12:53:07.3205276-03:00 0HL5Q9TP0KMKU [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=e941711ff28f8c12ae5e57d90d7ecb29   (e5be5b71)
2017-06-23T12:53:07.3205276-03:00 0HL5Q9TP0KMKU [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["e941711ff28f8c12ae5e57d90d7ecb29"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:53:07.3215268-03:00 0HL5Q9TP0KMKU [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:53:07.3225277-03:00 0HL5Q9TP0KMKU [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.764ms (afa2e885)
2017-06-23T12:53:07.3225277-03:00 0HL5Q9TP0KMKU [INF] Request finished in 2.6819ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:53:07.6727043-03:00 0HL5Q9TP0KMKV [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:53:07.6737055-03:00 0HL5Q9TP0KMKV [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:53:07.6737055-03:00 0HL5Q9TP0KML0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:53:07.6737055-03:00 0HL5Q9TP0KML1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:53:07.6737055-03:00 0HL5Q9TP0KML0 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:53:07.6737055-03:00 0HL5Q9TP0KML1 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:53:07.6747060-03:00 0HL5Q9TP0KMKV [INF] Request finished in 1.6351ms 200 text/css (15c52c40)
2017-06-23T12:53:07.6747060-03:00 0HL5Q9TP0KML1 [INF] Request finished in 0.9791ms 200 text/css (15c52c40)
2017-06-23T12:53:07.6757065-03:00 0HL5Q9TP0KML2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:53:07.6757065-03:00 0HL5Q9TP0KML2 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:53:07.6777082-03:00 0HL5Q9TP0KML0 [INF] Request finished in 4.0211ms 200 text/css (15c52c40)
2017-06-23T12:53:07.6777082-03:00 0HL5Q9TP0KML2 [INF] Request finished in 2.7287ms 200 application/javascript (15c52c40)
2017-06-23T12:53:07.6887158-03:00 0HL5Q9TP0KML3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:53:07.6907171-03:00 0HL5Q9TP0KML3 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:53:07.7147327-03:00 0HL5Q9TP0KML3 [INF] Request finished in 26.2739ms 200 application/javascript (15c52c40)
2017-06-23T12:54:55.5310806-03:00 0HL5Q9TP0KML4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=calemas&state=1498233294914   (e5be5b71)
2017-06-23T12:54:55.5320798-03:00 0HL5Q9TP0KML4 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:54:55.5370838-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:54:55.5400856-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:54:55.5430878-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:54:55.5450895-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:54:55.5500914-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:54:55.5530949-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:54:55.5560967-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:54:55.5590985-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:54:55.5620986-03:00 0HL5Q9TP0KML4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:54:55.5630995-03:00 0HL5Q9TP0KML4 [ERR] response_type requires the openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233294914\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233294914\"
  }
}" (b79075f6)
2017-06-23T12:54:55.5630995-03:00 0HL5Q9TP0KML4 [ERR] Request validation failed (abd529bc)
2017-06-23T12:54:55.5630995-03:00 0HL5Q9TP0KML4 [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233294914\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233294914\"
  }
}" (9899f104)
2017-06-23T12:54:55.5651029-03:00 0HL5Q9TP0KML4 [INF] Request finished in 36.1657ms 302  (15c52c40)
2017-06-23T12:54:55.5731066-03:00 0HL5Q9TP0KML5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=260603dddb3e2a3f05ba9a8667fcf0f5   (e5be5b71)
2017-06-23T12:54:55.5741099-03:00 0HL5Q9TP0KML5 [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["260603dddb3e2a3f05ba9a8667fcf0f5"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:54:55.5751092-03:00 0HL5Q9TP0KML5 [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:54:55.5751092-03:00 0HL5Q9TP0KML5 [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 2.0768ms (afa2e885)
2017-06-23T12:54:55.5761084-03:00 0HL5Q9TP0KML5 [INF] Request finished in 3.1545ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:54:55.8052774-03:00 0HL5Q9TP0KML6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:54:55.8052774-03:00 0HL5Q9TP0KML6 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:54:55.8062778-03:00 0HL5Q9TP0KML6 [INF] Request finished in 1.0653ms 200 text/css (15c52c40)
2017-06-23T12:54:55.9458755-03:00 0HL5Q9TP0KML7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:54:55.9463756-03:00 0HL5Q9TP0KML7 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:54:55.9483765-03:00 0HL5Q9TP0KML8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:54:55.9493774-03:00 0HL5Q9TP0KML8 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:54:55.9503782-03:00 0HL5Q9TP0KML7 [INF] Request finished in 4.3376ms 200 text/css (15c52c40)
2017-06-23T12:54:55.9613874-03:00 0HL5Q9TP0KML8 [INF] Request finished in 9.6729ms 200 text/css (15c52c40)
2017-06-23T12:54:55.9663893-03:00 0HL5Q9TP0KML9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:54:55.9673894-03:00 0HL5Q9TP0KML9 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:54:55.9914059-03:00 0HL5Q9TP0KML9 [INF] Request finished in 28.4157ms 200 application/javascript (15c52c40)
2017-06-23T12:54:55.9914059-03:00 0HL5Q9TP0KMLA [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:54:55.9919063-03:00 0HL5Q9TP0KMLA [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:54:55.9939072-03:00 0HL5Q9TP0KMLA [INF] Request finished in 2.5514ms 200 application/javascript (15c52c40)
2017-06-23T12:56:20.8115121-03:00 0HL5Q9TP0KMLB [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498233380428   (e5be5b71)
2017-06-23T12:56:20.8120121-03:00 0HL5Q9TP0KMLB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:56:20.8160148-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:56:20.8184903-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:56:20.8214917-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:56:20.8234975-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:56:20.8274978-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:56:20.8314988-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:56:20.8345006-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:56:20.8375028-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:56:20.8405046-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:56:20.8425109-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:56:20.8505133-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:56:20.8575203-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:20.8645206-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:20.8755294-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:56:20.8945407-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:56:20.8955420-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:56:20.8975433-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:56:20.8985434-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:20.8995443-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:20.8995443-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:56:20.9005447-03:00 0HL5Q9TP0KMLB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:56:20.9030494-03:00 0HL5Q9TP0KMLB [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233380428\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233380428\"
  }
}" (9a175e33)
2017-06-23T12:56:20.9100547-03:00 0HL5Q9TP0KMLB [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T12:56:20.9200679-03:00 0HL5Q9TP0KMLB [INF] Request finished in 109.6659ms 302  (15c52c40)
2017-06-23T12:56:20.9250723-03:00 0HL5Q9TP0KMLC [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D1498233380428   (e5be5b71)
2017-06-23T12:56:21.0452100-03:00 0HL5Q9TP0KMLC [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498233380428"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:56:21.0652230-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:56:21.0662234-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:56:21.0662234-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:56:21.0662234-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:56:21.0672239-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:56:21.0672239-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:56:21.0682244-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:56:21.0682244-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:56:21.0682244-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:56:21.0702257-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:56:21.0712266-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:56:21.0712266-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:21.0712266-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:21.0722270-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:56:21.0722270-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:56:21.0742284-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:56:21.0742284-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:56:21.0752293-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:21.0752293-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:56:21.0762301-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:56:21.0772306-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:56:21.0872381-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:56:21.0882377-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:56:21.0892394-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:56:21.0892394-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:56:21.0902395-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:56:21.0912396-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:56:21.0912396-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:56:21.0912396-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:56:21.0922412-03:00 0HL5Q9TP0KMLC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:56:21.3104022-03:00 0HL5Q9TP0KMLC [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T12:56:21.5381298-03:00 0HL5Q9TP0KMLC [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 605.2126ms (afa2e885)
2017-06-23T12:56:21.5381298-03:00 0HL5Q9TP0KMLC [INF] Request finished in 613.4167ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:56:21.7012456-03:00 0HL5Q9TP0KMLD [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:56:21.7017489-03:00 0HL5Q9TP0KMLD [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:56:21.7022497-03:00 0HL5Q9TP0KMLD [INF] Request finished in 1.0558ms 200 text/css (15c52c40)
2017-06-23T12:56:21.8413515-03:00 0HL5Q9TP0KMLE [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:56:21.8423532-03:00 0HL5Q9TP0KMLE [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:56:21.8423532-03:00 0HL5Q9TP0KMLE [INF] Request finished in 1.1207ms 200 text/css (15c52c40)
2017-06-23T12:56:21.8433533-03:00 0HL5Q9TP0KMLF [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:56:21.8443541-03:00 0HL5Q9TP0KMLG [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:56:21.8503590-03:00 0HL5Q9TP0KMLG [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:56:21.8563622-03:00 0HL5Q9TP0KMLG [INF] Request finished in 12.8106ms 200 text/css (15c52c40)
2017-06-23T12:56:21.8573630-03:00 0HL5Q9TP0KMLH [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:56:21.8573630-03:00 0HL5Q9TP0KMLF [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:56:21.8573630-03:00 0HL5Q9TP0KMLH [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:56:21.8583635-03:00 0HL5Q9TP0KMLF [INF] Request finished in 14.6218ms 200 application/javascript (15c52c40)
2017-06-23T12:56:21.8603648-03:00 0HL5Q9TP0KMLH [INF] Request finished in 3.1844ms 200 application/javascript (15c52c40)
2017-06-23T12:56:22.1270543-03:00 0HL5Q9TP0KMLI [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T12:56:22.1425690-03:00 0HL5Q9TP0KMLI [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T12:56:22.1435695-03:00 0HL5Q9TP0KMLI [INF] Request finished in 16.4565ms 200 application/font-woff2 (15c52c40)
2017-06-23T12:56:22.4042808-03:00 0HL5Q9TP0KMLJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T12:56:22.4052829-03:00 0HL5Q9TP0KMLJ [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T12:56:22.4052829-03:00 0HL5Q9TP0KMLJ [INF] Request finished in 1.0016ms 200 application/x-font-ttf (15c52c40)
2017-06-23T12:56:34.6952543-03:00 0HL5Q9TP0KMLK [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=calemas&state=1498233394316   (e5be5b71)
2017-06-23T12:56:34.6972581-03:00 0HL5Q9TP0KMLK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:56:34.7027641-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:56:34.7037675-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:56:34.7042654-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:56:34.7047659-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:56:34.7052659-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:56:34.7057668-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:56:34.7067676-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:56:34.7072677-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:56:34.7077681-03:00 0HL5Q9TP0KMLK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:56:34.7087690-03:00 0HL5Q9TP0KMLK [ERR] response_type requires the openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233394316\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233394316\"
  }
}" (b79075f6)
2017-06-23T12:56:34.7087690-03:00 0HL5Q9TP0KMLK [ERR] Request validation failed (abd529bc)
2017-06-23T12:56:34.7092686-03:00 0HL5Q9TP0KMLK [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233394316\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233394316\"
  }
}" (9899f104)
2017-06-23T12:56:34.7097690-03:00 0HL5Q9TP0KMLK [INF] Request finished in 14.6641ms 302  (15c52c40)
2017-06-23T12:56:34.7187789-03:00 0HL5Q9TP0KMLL [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=1fbdf88bd65bda6ba97a8c7078f20e06   (e5be5b71)
2017-06-23T12:56:34.7227824-03:00 0HL5Q9TP0KMLL [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["1fbdf88bd65bda6ba97a8c7078f20e06"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:56:34.7237829-03:00 0HL5Q9TP0KMLL [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:56:34.7247830-03:00 0HL5Q9TP0KMLL [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 2.34ms (afa2e885)
2017-06-23T12:56:34.7258044-03:00 0HL5Q9TP0KMLL [INF] Request finished in 7.3747ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:56:34.9009216-03:00 0HL5Q9TP0KMLM [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:56:34.9014220-03:00 0HL5Q9TP0KMLM [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:56:34.9019221-03:00 0HL5Q9TP0KMLM [INF] Request finished in 0.9397ms 200 text/css (15c52c40)
2017-06-23T12:56:35.0409951-03:00 0HL5Q9TP0KMLN [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:56:35.0409951-03:00 0HL5Q9TP0KMLO [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:56:35.0419964-03:00 0HL5Q9TP0KMLO [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:56:35.0419964-03:00 0HL5Q9TP0KMLP [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:56:35.0419964-03:00 0HL5Q9TP0KMLN [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:56:35.0419964-03:00 0HL5Q9TP0KMLQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:56:35.0419964-03:00 0HL5Q9TP0KMLP [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:56:35.0429977-03:00 0HL5Q9TP0KMLN [INF] Request finished in 1.3485ms 200 text/css (15c52c40)
2017-06-23T12:56:35.0429977-03:00 0HL5Q9TP0KMLQ [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:56:35.0439981-03:00 0HL5Q9TP0KMLP [INF] Request finished in 1.4664ms 200 application/javascript (15c52c40)
2017-06-23T12:56:35.0439981-03:00 0HL5Q9TP0KMLO [INF] Request finished in 2.4467ms 200 text/css (15c52c40)
2017-06-23T12:56:35.0500017-03:00 0HL5Q9TP0KMLQ [INF] Request finished in 8.0525ms 200 application/javascript (15c52c40)
2017-06-23T12:56:52.1093842-03:00 0HL5Q9TP0KMLR [INF] Request starting HTTP/1.1 GET http://localhost:4000/   (e5be5b71)
2017-06-23T12:56:52.1113855-03:00 0HL5Q9TP0KMLR [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:56:52.1779354-03:00 0HL5Q9TP0KMLR [INF] Executing ViewResult, running view at path "/Views/Home/Index.cshtml". (9707eebe)
2017-06-23T12:56:52.1889409-03:00 0HL5Q9TP0KMLR [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" in 77.3074ms (afa2e885)
2017-06-23T12:56:52.1889409-03:00 0HL5Q9TP0KMLR [INF] Request finished in 79.0292ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:56:52.3546353-03:00 0HL5Q9TP0KMLS [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:56:52.3556370-03:00 0HL5Q9TP0KMLS [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:56:52.3566366-03:00 0HL5Q9TP0KMLS [INF] Request finished in 1.2311ms 200 text/css (15c52c40)
2017-06-23T12:56:52.4959827-03:00 0HL5Q9TP0KMLT [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:56:52.4969835-03:00 0HL5Q9TP0KMLT [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:56:52.4969835-03:00 0HL5Q9TP0KMLU [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:56:52.4979844-03:00 0HL5Q9TP0KMLU [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:56:52.4989853-03:00 0HL5Q9TP0KMLU [INF] Request finished in 1.6544ms 200 text/css (15c52c40)
2017-06-23T12:56:52.4999862-03:00 0HL5Q9TP0KMLT [INF] Request finished in 3.6812ms 200 text/css (15c52c40)
2017-06-23T12:56:52.5009862-03:00 0HL5Q9TP0KMLV [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:56:52.5039897-03:00 0HL5Q9TP0KMLV [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:56:52.5199987-03:00 0HL5Q9TP0KMLV [INF] Request finished in 10.8302ms 200 application/javascript (15c52c40)
2017-06-23T12:56:52.6851224-03:00 0HL5Q9TP0KMM0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:56:52.6861229-03:00 0HL5Q9TP0KMM0 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:56:52.6881234-03:00 0HL5Q9TP0KMM0 [INF] Request finished in 1.8321ms 200 application/javascript (15c52c40)
2017-06-23T12:56:52.8242447-03:00 0HL5Q9TP0KMM1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/icon.jpg   (e5be5b71)
2017-06-23T12:56:52.8242447-03:00 0HL5Q9TP0KMM1 [INF] Sending file. Request path: '"/icon.jpg"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\icon.jpg"' (27b0a520)
2017-06-23T12:56:52.8252448-03:00 0HL5Q9TP0KMM1 [INF] Request finished in 0.8818ms 200 image/jpeg (15c52c40)
2017-06-23T12:56:56.9217704-03:00 0HL5Q9TP0KMM2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=openid&scope=calemas&state=1498233416551   (e5be5b71)
2017-06-23T12:56:56.9227717-03:00 0HL5Q9TP0KMM2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:56:56.9237726-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:56:56.9247722-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:56:56.9257739-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:56:56.9257739-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:56:56.9267735-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:56:56.9267735-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:56:56.9277744-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:56:56.9277744-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:56:56.9287757-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:56:56.9307766-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:56:56.9337833-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:56:56.9387865-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:56:56.9397874-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:56:56.9402874-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:56:56.9417879-03:00 0HL5Q9TP0KMM2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:56:56.9417879-03:00 0HL5Q9TP0KMM2 [ERR] Requests for token response type only must include resource scopes, but no identity scopes. (f8294810)
2017-06-23T12:56:56.9422883-03:00 0HL5Q9TP0KMM2 [ERR] Request validation failed (abd529bc)
2017-06-23T12:56:56.9422883-03:00 0HL5Q9TP0KMM2 [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233416551\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"openid\",
    \"state\": \"1498233416551\"
  }
}" (9899f104)
2017-06-23T12:56:56.9427888-03:00 0HL5Q9TP0KMM2 [INF] Request finished in 20.8553ms 302  (15c52c40)
2017-06-23T12:56:56.9477927-03:00 0HL5Q9TP0KMM3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=830d933aefa6f2cbd0cde1bb81e8bd31   (e5be5b71)
2017-06-23T12:56:56.9487932-03:00 0HL5Q9TP0KMM3 [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["830d933aefa6f2cbd0cde1bb81e8bd31"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:56:56.9487932-03:00 0HL5Q9TP0KMM3 [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:56:56.9487932-03:00 0HL5Q9TP0KMM3 [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.0624ms (afa2e885)
2017-06-23T12:56:56.9497973-03:00 0HL5Q9TP0KMM3 [INF] Request finished in 1.8716ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:56:57.1596475-03:00 0HL5Q9TP0KMM4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:56:57.1606492-03:00 0HL5Q9TP0KMM4 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:56:57.1606492-03:00 0HL5Q9TP0KMM4 [INF] Request finished in 0.8978ms 200 text/css (15c52c40)
2017-06-23T12:56:57.3010980-03:00 0HL5Q9TP0KMM5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:56:57.3010980-03:00 0HL5Q9TP0KMM6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:56:57.3010980-03:00 0HL5Q9TP0KMM7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:56:57.3010980-03:00 0HL5Q9TP0KMM5 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:56:57.3020992-03:00 0HL5Q9TP0KMM6 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:56:57.3020992-03:00 0HL5Q9TP0KMM8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:56:57.3020992-03:00 0HL5Q9TP0KMM5 [INF] Request finished in 1.1732ms 200 text/css (15c52c40)
2017-06-23T12:56:57.3020992-03:00 0HL5Q9TP0KMM8 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:56:57.3020992-03:00 0HL5Q9TP0KMM7 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:56:57.3040998-03:00 0HL5Q9TP0KMM8 [INF] Request finished in 2.1803ms 200 application/javascript (15c52c40)
2017-06-23T12:56:57.3051006-03:00 0HL5Q9TP0KMM6 [INF] Request finished in 4.0671ms 200 text/css (15c52c40)
2017-06-23T12:56:57.3061011-03:00 0HL5Q9TP0KMM7 [INF] Request finished in 4.5063ms 200 application/javascript (15c52c40)
2017-06-23T12:57:09.9831940-03:00 0HL5Q9TP0KMM9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/   (e5be5b71)
2017-06-23T12:57:09.9841953-03:00 0HL5Q9TP0KMM9 [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:57:09.9841953-03:00 0HL5Q9TP0KMM9 [INF] Executing ViewResult, running view at path "/Views/Home/Index.cshtml". (9707eebe)
2017-06-23T12:57:09.9851958-03:00 0HL5Q9TP0KMM9 [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" in 0.9959ms (afa2e885)
2017-06-23T12:57:09.9851958-03:00 0HL5Q9TP0KMM9 [INF] Request finished in 1.8046ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:57:10.1437998-03:00 0HL5Q9TP0KMMA [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:57:10.1448011-03:00 0HL5Q9TP0KMMA [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:57:10.1448011-03:00 0HL5Q9TP0KMMA [INF] Request finished in 0.83ms 200 text/css (15c52c40)
2017-06-23T12:57:10.2849111-03:00 0HL5Q9TP0KMMB [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:57:10.2849111-03:00 0HL5Q9TP0KMMC [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:57:10.2859120-03:00 0HL5Q9TP0KMMB [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:57:10.2859120-03:00 0HL5Q9TP0KMMD [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:57:10.2859120-03:00 0HL5Q9TP0KMMC [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:57:10.2859120-03:00 0HL5Q9TP0KMMD [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:57:10.2869125-03:00 0HL5Q9TP0KMMC [INF] Request finished in 1.7344ms 200 text/css (15c52c40)
2017-06-23T12:57:10.2889138-03:00 0HL5Q9TP0KMMD [INF] Request finished in 3.5063ms 200 application/javascript (15c52c40)
2017-06-23T12:57:10.2899147-03:00 0HL5Q9TP0KMMB [INF] Request finished in 4.7198ms 200 text/css (15c52c40)
2017-06-23T12:57:11.0568650-03:00 0HL5Q9TP0KMME [INF] Request starting HTTP/1.1 GET http://localhost:4000/icon.jpg   (e5be5b71)
2017-06-23T12:57:11.0568650-03:00 0HL5Q9TP0KMMF [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:57:11.0578659-03:00 0HL5Q9TP0KMMF [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:57:11.0578659-03:00 0HL5Q9TP0KMME [INF] Sending file. Request path: '"/icon.jpg"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\icon.jpg"' (27b0a520)
2017-06-23T12:57:11.0588671-03:00 0HL5Q9TP0KMME [INF] Request finished in 1.2225ms 200 image/jpeg (15c52c40)
2017-06-23T12:57:11.0598680-03:00 0HL5Q9TP0KMMF [INF] Request finished in 2.1084ms 200 application/javascript (15c52c40)
2017-06-23T12:57:13.6686527-03:00 0HL5Q9TP0KMMG [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas%20openid&state=1498233433350   (e5be5b71)
2017-06-23T12:57:13.6696532-03:00 0HL5Q9TP0KMMG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:57:13.6726558-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:57:13.6756580-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:57:13.6776581-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:57:13.6806607-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:57:13.6836642-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:57:13.6866652-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:57:13.6886669-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:57:13.6916679-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:57:13.6936692-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:57:13.6966706-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas', N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:13.7026816-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'calemas', N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:57:13.7086815-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:13.7331984-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:13.7510261-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:13.7720396-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:13.8060611-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:13.8070624-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas', N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:13.8080624-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'calemas', N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:57:13.8100654-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:13.8100654-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:13.8110650-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:13.8120655-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:13.8120655-03:00 0HL5Q9TP0KMMG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:13.8130664-03:00 0HL5Q9TP0KMMG [ERR] Requests for token response type only must include resource scopes, but no identity scopes. (f8294810)
2017-06-23T12:57:13.8130664-03:00 0HL5Q9TP0KMMG [ERR] Request validation failed (abd529bc)
2017-06-23T12:57:13.8130664-03:00 0HL5Q9TP0KMMG [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas openid\",
  \"State\": \"1498233433350\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas openid\",
    \"state\": \"1498233433350\"
  }
}" (9899f104)
2017-06-23T12:57:13.8140672-03:00 0HL5Q9TP0KMMG [INF] Request finished in 145.2269ms 302  (15c52c40)
2017-06-23T12:57:13.8335830-03:00 0HL5Q9TP0KMMH [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=80b5a7d5067f723672ce019e9090f9f7   (e5be5b71)
2017-06-23T12:57:13.8340823-03:00 0HL5Q9TP0KMMH [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["80b5a7d5067f723672ce019e9090f9f7"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:57:13.8340823-03:00 0HL5Q9TP0KMMH [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:57:13.8350856-03:00 0HL5Q9TP0KMMH [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.0279ms (afa2e885)
2017-06-23T12:57:13.8350856-03:00 0HL5Q9TP0KMMH [INF] Request finished in 1.8929ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:57:15.6769553-03:00 0HL5Q9TP0KMMI [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas%20openid&state=1498233435195   (e5be5b71)
2017-06-23T12:57:15.6779570-03:00 0HL5Q9TP0KMMI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:57:15.6799571-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:57:15.6799571-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:57:15.6809576-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:57:15.6809576-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:57:15.6819584-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:57:15.6819584-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:57:15.6829593-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:57:15.6839602-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:57:15.6839602-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:57:15.6859615-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas', N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:15.6869620-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'calemas', N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:57:15.6879633-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:15.6889633-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:15.6899646-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:15.6909642-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:15.6909642-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:15.6929668-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas', N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:15.6929668-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'calemas', N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T12:57:15.6939660-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:15.6949669-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:15.6949669-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:15.6959678-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:15.6969699-03:00 0HL5Q9TP0KMMI [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas', N'openid') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:15.6969699-03:00 0HL5Q9TP0KMMI [ERR] Requests for token response type only must include resource scopes, but no identity scopes. (f8294810)
2017-06-23T12:57:15.6979695-03:00 0HL5Q9TP0KMMI [ERR] Request validation failed (abd529bc)
2017-06-23T12:57:15.6979695-03:00 0HL5Q9TP0KMMI [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas openid\",
  \"State\": \"1498233435195\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas openid\",
    \"state\": \"1498233435195\"
  }
}" (9899f104)
2017-06-23T12:57:15.6989721-03:00 0HL5Q9TP0KMMI [INF] Request finished in 21.7158ms 302  (15c52c40)
2017-06-23T12:57:15.7039736-03:00 0HL5Q9TP0KMMJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=4f5fb43915b4ca802fbf5869bf6f13d9   (e5be5b71)
2017-06-23T12:57:15.7049744-03:00 0HL5Q9TP0KMMJ [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["4f5fb43915b4ca802fbf5869bf6f13d9"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:57:15.7049744-03:00 0HL5Q9TP0KMMJ [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:57:15.7049744-03:00 0HL5Q9TP0KMMJ [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 0.9725ms (afa2e885)
2017-06-23T12:57:15.7059745-03:00 0HL5Q9TP0KMMJ [INF] Request finished in 1.7849ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:57:15.8716380-03:00 0HL5Q9TP0KMMK [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:57:15.8721385-03:00 0HL5Q9TP0KMMK [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:57:15.8726385-03:00 0HL5Q9TP0KMMK [INF] Request finished in 1.0197ms 200 text/css (15c52c40)
2017-06-23T12:57:16.0167438-03:00 0HL5Q9TP0KMML [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:57:16.0167438-03:00 0HL5Q9TP0KMMM [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:57:16.0177447-03:00 0HL5Q9TP0KMML [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:57:16.0177447-03:00 0HL5Q9TP0KMMM [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:57:16.0177447-03:00 0HL5Q9TP0KMMN [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:57:16.0177447-03:00 0HL5Q9TP0KMML [INF] Request finished in 1.1256ms 200 text/css (15c52c40)
2017-06-23T12:57:16.0177447-03:00 0HL5Q9TP0KMMN [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:57:16.0187447-03:00 0HL5Q9TP0KMMO [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:57:16.0207465-03:00 0HL5Q9TP0KMMO [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:57:16.0227474-03:00 0HL5Q9TP0KMMO [INF] Request finished in 3.4521ms 200 application/javascript (15c52c40)
2017-06-23T12:57:16.0237483-03:00 0HL5Q9TP0KMMM [INF] Request finished in 6.2055ms 200 text/css (15c52c40)
2017-06-23T12:57:16.0257500-03:00 0HL5Q9TP0KMMN [INF] Request finished in 7.6937ms 200 application/javascript (15c52c40)
2017-06-23T12:57:23.3657685-03:00 0HL5Q9TP0KMMP [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=4f5fb43915b4ca802fbf5869bf6f13d9   (e5be5b71)
2017-06-23T12:57:23.3667689-03:00 0HL5Q9TP0KMMP [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["4f5fb43915b4ca802fbf5869bf6f13d9"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:57:23.3667689-03:00 0HL5Q9TP0KMMP [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T12:57:23.3677686-03:00 0HL5Q9TP0KMMP [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 0.9971ms (afa2e885)
2017-06-23T12:57:23.3677686-03:00 0HL5Q9TP0KMMP [INF] Request finished in 1.7722ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:57:23.6841691-03:00 0HL5Q9TP0KMMQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:57:23.6851692-03:00 0HL5Q9TP0KMMQ [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:57:23.6851692-03:00 0HL5Q9TP0KMMQ [INF] Request finished in 1.076ms 200 text/css (15c52c40)
2017-06-23T12:57:23.6861713-03:00 0HL5Q9TP0KMMR [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:57:23.6861713-03:00 0HL5Q9TP0KMMS [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:57:23.6871709-03:00 0HL5Q9TP0KMMS [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:57:23.6871709-03:00 0HL5Q9TP0KMMR [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:57:23.6871709-03:00 0HL5Q9TP0KMMT [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:57:23.6881722-03:00 0HL5Q9TP0KMMS [INF] Request finished in 1.4873ms 200 text/css (15c52c40)
2017-06-23T12:57:23.6881722-03:00 0HL5Q9TP0KMMT [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:57:23.6901756-03:00 0HL5Q9TP0KMMU [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:57:23.6921745-03:00 0HL5Q9TP0KMMR [INF] Request finished in 5.6045ms 200 text/css (15c52c40)
2017-06-23T12:57:23.6921745-03:00 0HL5Q9TP0KMMU [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:57:23.6921745-03:00 0HL5Q9TP0KMMT [INF] Request finished in 4.85ms 200 application/javascript (15c52c40)
2017-06-23T12:57:23.6931750-03:00 0HL5Q9TP0KMMU [INF] Request finished in 3.1684ms 200 application/javascript (15c52c40)
2017-06-23T12:57:24.1877709-03:00 0HL5Q9TP0KMMV [INF] Request starting HTTP/1.1 GET http://localhost:4000/favicon.ico   (e5be5b71)
2017-06-23T12:57:24.1877709-03:00 0HL5Q9TP0KMMV [INF] Sending file. Request path: '"/favicon.ico"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\favicon.ico"' (27b0a520)
2017-06-23T12:57:24.1907727-03:00 0HL5Q9TP0KMMV [INF] Request finished in 3.1532ms 200 image/x-icon (15c52c40)
2017-06-23T12:57:24.5054959-03:00 0HL5Q9TP0KMN0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/favicon.ico   (e5be5b71)
2017-06-23T12:57:24.5054959-03:00 0HL5Q9TP0KMN0 [INF] Sending file. Request path: '"/favicon.ico"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\favicon.ico"' (27b0a520)
2017-06-23T12:57:24.5054959-03:00 0HL5Q9TP0KMN0 [INF] Request finished in 0.8727ms 200 image/x-icon (15c52c40)
2017-06-23T12:57:37.2509951-03:00 0HL5Q9TP0KMN1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498233456857   (e5be5b71)
2017-06-23T12:57:37.2519968-03:00 0HL5Q9TP0KMN1 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T12:57:37.2545035-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:57:37.2550040-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:57:37.2555036-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:57:37.2560036-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:57:37.2565045-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:57:37.2570045-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:57:37.2570045-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:57:37.2575053-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:57:37.2580054-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:57:37.2605067-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:37.2680125-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:37.2745190-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.2835248-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.2915309-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:37.3105434-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:37.3125456-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:37.3155478-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:37.3165479-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.3175475-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.3185496-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:37.3185496-03:00 0HL5Q9TP0KMN1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:37.3195497-03:00 0HL5Q9TP0KMN1 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233456857\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233456857\"
  }
}" (9a175e33)
2017-06-23T12:57:37.3195497-03:00 0HL5Q9TP0KMN1 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T12:57:37.3195497-03:00 0HL5Q9TP0KMN1 [INF] Request finished in 69.6272ms 302  (15c52c40)
2017-06-23T12:57:37.3245528-03:00 0HL5Q9TP0KMN2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Dtoken%26scope%3Dcalemas%26state%3D1498233456857   (e5be5b71)
2017-06-23T12:57:37.3265541-03:00 0HL5Q9TP0KMN2 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=calemas&state=1498233456857"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T12:57:37.3295588-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:57:37.3345595-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:57:37.3355604-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:57:37.3355604-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:57:37.3365608-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:57:37.3365608-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:57:37.3375617-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:57:37.3385626-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:57:37.3385626-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:57:37.3405627-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:37.3415644-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:37.3425644-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.3425644-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.3435649-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:37.3435649-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:37.3455662-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T12:57:37.3515707-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T12:57:37.3525715-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.3525715-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T12:57:37.3535720-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T12:57:37.3545729-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T12:57:37.3565779-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T12:57:37.3570779-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T12:57:37.3575788-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T12:57:37.3580784-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T12:57:37.3580784-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T12:57:37.3585788-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T12:57:37.3590793-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T12:57:37.3595801-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T12:57:37.3600797-03:00 0HL5Q9TP0KMN2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T12:57:37.3605806-03:00 0HL5Q9TP0KMN2 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T12:57:37.3670846-03:00 0HL5Q9TP0KMN2 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 40.2611ms (afa2e885)
2017-06-23T12:57:37.3675855-03:00 0HL5Q9TP0KMN2 [INF] Request finished in 42.4952ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T12:57:37.7215673-03:00 0HL5Q9TP0KMN3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T12:57:37.7215673-03:00 0HL5Q9TP0KMN4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T12:57:37.7215673-03:00 0HL5Q9TP0KMN5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T12:57:37.7225681-03:00 0HL5Q9TP0KMN4 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T12:57:37.7225681-03:00 0HL5Q9TP0KMN3 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T12:57:37.7225681-03:00 0HL5Q9TP0KMN5 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T12:57:37.7235698-03:00 0HL5Q9TP0KMN5 [INF] Request finished in 1.3797ms 200 text/css (15c52c40)
2017-06-23T12:57:37.7716077-03:00 0HL5Q9TP0KMN6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T12:57:37.7716077-03:00 0HL5Q9TP0KMN3 [INF] Request finished in 50.3639ms 200 text/css (15c52c40)
2017-06-23T12:57:37.7726090-03:00 0HL5Q9TP0KMN4 [INF] Request finished in 50.5617ms 200 application/javascript (15c52c40)
2017-06-23T12:57:37.7726090-03:00 0HL5Q9TP0KMN6 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T12:57:37.7726090-03:00 0HL5Q9TP0KMN7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T12:57:37.7736103-03:00 0HL5Q9TP0KMN7 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T12:57:37.7736103-03:00 0HL5Q9TP0KMN6 [INF] Request finished in 49.7087ms 200 application/javascript (15c52c40)
2017-06-23T12:57:37.7746103-03:00 0HL5Q9TP0KMN7 [INF] Request finished in 48.0526ms 200 text/css (15c52c40)
2017-06-23T12:57:38.0868222-03:00 0HL5Q9TP0KMN8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T12:57:38.0873235-03:00 0HL5Q9TP0KMN8 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T12:57:38.0878235-03:00 0HL5Q9TP0KMN8 [INF] Request finished in 1.0406ms 200 application/font-woff2 (15c52c40)
2017-06-23T12:57:38.5001980-03:00 0HL5Q9TP0KMN9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T12:57:38.5001980-03:00 0HL5Q9TP0KMN9 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T12:57:38.5011980-03:00 0HL5Q9TP0KMN9 [INF] Request finished in 0.9372ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:00:46.9273343-03:00 0HL5Q9TP0KMNA [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=openid%20calemas&state=1498233646519   (e5be5b71)
2017-06-23T13:00:46.9283352-03:00 0HL5Q9TP0KMNA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:00:46.9353397-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:00:46.9383411-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:00:46.9403424-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:00:46.9423437-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:00:46.9473489-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:00:46.9503503-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:00:46.9533517-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:00:46.9553526-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:00:46.9573540-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:00:46.9603562-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:00:46.9653597-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:00:46.9713642-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:00:46.9893762-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:00:47.0073899-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:00:47.0259028-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:00:47.0629310-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:00:47.0659303-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:00:47.0659303-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:00:47.0679317-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:00:47.0679317-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:00:47.0689338-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:00:47.0689338-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:00:47.0699330-03:00 0HL5Q9TP0KMNA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:00:47.0699330-03:00 0HL5Q9TP0KMNA [ERR] Requests for token response type only must include resource scopes, but no identity scopes. (f8294810)
2017-06-23T13:00:47.0699330-03:00 0HL5Q9TP0KMNA [ERR] Request validation failed (abd529bc)
2017-06-23T13:00:47.0699330-03:00 0HL5Q9TP0KMNA [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498233646519\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498233646519\"
  }
}" (9899f104)
2017-06-23T13:00:47.0709339-03:00 0HL5Q9TP0KMNA [INF] Request finished in 143.7186ms 302  (15c52c40)
2017-06-23T13:00:47.0759374-03:00 0HL5Q9TP0KMNB [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=769add13c55ae72bede308437142d499   (e5be5b71)
2017-06-23T13:00:47.0769379-03:00 0HL5Q9TP0KMNB [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["769add13c55ae72bede308437142d499"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:00:47.0769379-03:00 0HL5Q9TP0KMNB [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T13:00:47.0779388-03:00 0HL5Q9TP0KMNB [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.4138ms (afa2e885)
2017-06-23T13:00:47.0779388-03:00 0HL5Q9TP0KMNB [INF] Request finished in 2.5756ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:00:47.2540717-03:00 0HL5Q9TP0KMNC [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:00:47.2540717-03:00 0HL5Q9TP0KMNC [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:00:47.2550721-03:00 0HL5Q9TP0KMNC [INF] Request finished in 1.1671ms 200 text/css (15c52c40)
2017-06-23T13:00:47.3987016-03:00 0HL5Q9TP0KMND [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:00:47.3987016-03:00 0HL5Q9TP0KMND [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:00:47.3997025-03:00 0HL5Q9TP0KMND [INF] Request finished in 1.1876ms 200 text/css (15c52c40)
2017-06-23T13:00:47.4047065-03:00 0HL5Q9TP0KMNE [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:00:47.4047065-03:00 0HL5Q9TP0KMNE [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:00:47.4057069-03:00 0HL5Q9TP0KMNF [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:00:47.4057069-03:00 0HL5Q9TP0KMNG [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:00:47.4067078-03:00 0HL5Q9TP0KMNF [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:00:47.4072119-03:00 0HL5Q9TP0KMNG [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:00:47.4082128-03:00 0HL5Q9TP0KMNF [INF] Request finished in 2.6639ms 200 text/css (15c52c40)
2017-06-23T13:00:47.4092133-03:00 0HL5Q9TP0KMNE [INF] Request finished in 4.8561ms 200 application/javascript (15c52c40)
2017-06-23T13:00:47.4102170-03:00 0HL5Q9TP0KMNG [INF] Request finished in 3.9431ms 200 application/javascript (15c52c40)
2017-06-23T13:01:24.6474656-03:00 0HL5Q9TP0KMNH [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=token&scope=openid&state=1498233684267   (e5be5b71)
2017-06-23T13:01:24.6484661-03:00 0HL5Q9TP0KMNH [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:01:24.6559718-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:01:24.6589736-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:01:24.6629771-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:01:24.6659777-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:01:24.6714821-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:01:24.6764844-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:01:24.6794899-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:01:24.6834934-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:01:24.6874953-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:01:24.6924984-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:01:24.6954998-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:01:24.6995033-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:01:24.7015042-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:01:24.7015042-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:01:24.7025047-03:00 0HL5Q9TP0KMNH [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:01:24.7025047-03:00 0HL5Q9TP0KMNH [ERR] Requests for token response type only must include resource scopes, but no identity scopes. (f8294810)
2017-06-23T13:01:24.7025047-03:00 0HL5Q9TP0KMNH [ERR] Request validation failed (abd529bc)
2017-06-23T13:01:24.7035047-03:00 0HL5Q9TP0KMNH [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233684267\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"token\",
    \"scope\": \"openid\",
    \"state\": \"1498233684267\"
  }
}" (9899f104)
2017-06-23T13:01:24.7035047-03:00 0HL5Q9TP0KMNH [INF] Request finished in 56.8293ms 302  (15c52c40)
2017-06-23T13:01:24.7085099-03:00 0HL5Q9TP0KMNI [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=94e72e763d4c71ca167ef24927b312bc   (e5be5b71)
2017-06-23T13:01:24.7085099-03:00 0HL5Q9TP0KMNI [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["94e72e763d4c71ca167ef24927b312bc"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:01:24.7095100-03:00 0HL5Q9TP0KMNI [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T13:01:24.7095100-03:00 0HL5Q9TP0KMNI [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.0895ms (afa2e885)
2017-06-23T13:01:24.7095100-03:00 0HL5Q9TP0KMNI [INF] Request finished in 1.9159ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:01:24.8966574-03:00 0HL5Q9TP0KMNJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:01:24.8976570-03:00 0HL5Q9TP0KMNJ [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:01:24.8986571-03:00 0HL5Q9TP0KMNJ [INF] Request finished in 1.6523ms 200 text/css (15c52c40)
2017-06-23T13:01:25.0337049-03:00 0HL5Q9TP0KMNK [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:01:25.0337049-03:00 0HL5Q9TP0KMNL [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:01:25.0347062-03:00 0HL5Q9TP0KMNM [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:01:25.0347062-03:00 0HL5Q9TP0KMNK [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:01:25.0347062-03:00 0HL5Q9TP0KMNL [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:01:25.0357066-03:00 0HL5Q9TP0KMNM [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:01:25.0357066-03:00 0HL5Q9TP0KMNL [INF] Request finished in 1.6839ms 200 text/css (15c52c40)
2017-06-23T13:01:25.0507169-03:00 0HL5Q9TP0KMNK [INF] Request finished in 16.2048ms 200 text/css (15c52c40)
2017-06-23T13:01:25.0507169-03:00 0HL5Q9TP0KMNN [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:01:25.0507169-03:00 0HL5Q9TP0KMNM [INF] Request finished in 16.3789ms 200 application/javascript (15c52c40)
2017-06-23T13:01:25.0507169-03:00 0HL5Q9TP0KMNN [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:01:25.0537191-03:00 0HL5Q9TP0KMNN [INF] Request finished in 9.7423ms 200 application/javascript (15c52c40)
2017-06-23T13:03:02.3193896-03:00 0HL5Q9TP0KMNO [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token&scope=openid&state=1498233781948   (e5be5b71)
2017-06-23T13:03:02.3203908-03:00 0HL5Q9TP0KMNO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:03:02.3253932-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:03:02.3354003-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:03:02.3394033-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:03:02.3434060-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:03:02.3494096-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:03:02.3524127-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:03:02.3564166-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:03:02.3644203-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (7ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:03:02.3684266-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:03:02.3714252-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:03:02.3759307-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:03:02.3829360-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:03:02.3844365-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:03:02.3849370-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:03:02.3864383-03:00 0HL5Q9TP0KMNO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:03:02.3869383-03:00 0HL5Q9TP0KMNO [ERR] Nonce required for implicit and hybrid flow with openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233781948\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token\",
    \"scope\": \"openid\",
    \"state\": \"1498233781948\"
  }
}" (de0008da)
2017-06-23T13:03:02.3869383-03:00 0HL5Q9TP0KMNO [ERR] Request validation failed (abd529bc)
2017-06-23T13:03:02.3874387-03:00 0HL5Q9TP0KMNO [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid\",
  \"State\": \"1498233781948\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token\",
    \"scope\": \"openid\",
    \"state\": \"1498233781948\"
  }
}" (9899f104)
2017-06-23T13:03:02.3879392-03:00 0HL5Q9TP0KMNO [INF] Request finished in 68.5832ms 302  (15c52c40)
2017-06-23T13:03:02.3924460-03:00 0HL5Q9TP0KMNP [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=c92cfdc6d87aa02719086b62724649b0   (e5be5b71)
2017-06-23T13:03:02.3944473-03:00 0HL5Q9TP0KMNP [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["c92cfdc6d87aa02719086b62724649b0"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:03:02.3954515-03:00 0HL5Q9TP0KMNP [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T13:03:02.3964511-03:00 0HL5Q9TP0KMNP [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 2.1524ms (afa2e885)
2017-06-23T13:03:02.3964511-03:00 0HL5Q9TP0KMNP [INF] Request finished in 4.0457ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:03:02.5785798-03:00 0HL5Q9TP0KMNQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:03:02.5795803-03:00 0HL5Q9TP0KMNQ [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:03:02.5815812-03:00 0HL5Q9TP0KMNQ [INF] Request finished in 2.6971ms 200 text/css (15c52c40)
2017-06-23T13:03:02.7251988-03:00 0HL5Q9TP0KMNR [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:03:02.7251988-03:00 0HL5Q9TP0KMNR [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:03:02.7261997-03:00 0HL5Q9TP0KMNS [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:03:02.7261997-03:00 0HL5Q9TP0KMNR [INF] Request finished in 1.0119ms 200 text/css (15c52c40)
2017-06-23T13:03:02.7261997-03:00 0HL5Q9TP0KMNS [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:03:02.7302020-03:00 0HL5Q9TP0KMNT [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:03:02.7312037-03:00 0HL5Q9TP0KMNT [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:03:02.7322037-03:00 0HL5Q9TP0KMNS [INF] Request finished in 6.0101ms 200 text/css (15c52c40)
2017-06-23T13:03:02.7332050-03:00 0HL5Q9TP0KMNU [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:03:02.7377110-03:00 0HL5Q9TP0KMNU [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:03:02.7392123-03:00 0HL5Q9TP0KMNT [INF] Request finished in 8.305ms 200 application/javascript (15c52c40)
2017-06-23T13:03:02.7392123-03:00 0HL5Q9TP0KMNU [INF] Request finished in 6.1382ms 200 application/javascript (15c52c40)
2017-06-23T13:03:34.7923157-03:00 0HL5Q9TP0KMNV [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token&scope=calemas&state=1498233814393   (e5be5b71)
2017-06-23T13:03:34.7923157-03:00 0HL5Q9TP0KMNV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:03:34.8063238-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:03:34.8163313-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:03:34.8203332-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:03:34.8243367-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:03:34.8373484-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (11ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:03:34.8428520-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:03:34.8503610-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:03:34.8543637-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:03:34.8583660-03:00 0HL5Q9TP0KMNV [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:03:34.8593668-03:00 0HL5Q9TP0KMNV [ERR] response_type requires the openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233814393\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233814393\"
  }
}" (b79075f6)
2017-06-23T13:03:34.8593668-03:00 0HL5Q9TP0KMNV [ERR] Request validation failed (abd529bc)
2017-06-23T13:03:34.8593668-03:00 0HL5Q9TP0KMNV [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"calemas\",
  \"State\": \"1498233814393\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token\",
    \"scope\": \"calemas\",
    \"state\": \"1498233814393\"
  }
}" (9899f104)
2017-06-23T13:03:34.8603677-03:00 0HL5Q9TP0KMNV [INF] Request finished in 68.9096ms 302  (15c52c40)
2017-06-23T13:03:34.8693739-03:00 0HL5Q9TP0KMO0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=d2a1330e56e171119552b8f8a304f46b   (e5be5b71)
2017-06-23T13:03:34.8703748-03:00 0HL5Q9TP0KMO0 [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["d2a1330e56e171119552b8f8a304f46b"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:03:34.8703748-03:00 0HL5Q9TP0KMO0 [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T13:03:34.8703748-03:00 0HL5Q9TP0KMO0 [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.0842ms (afa2e885)
2017-06-23T13:03:34.8713745-03:00 0HL5Q9TP0KMO0 [INF] Request finished in 2.021ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:03:35.0871761-03:00 0HL5Q9TP0KMO1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:03:35.0881782-03:00 0HL5Q9TP0KMO1 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:03:35.0901787-03:00 0HL5Q9TP0KMO1 [INF] Request finished in 2.4118ms 200 text/css (15c52c40)
2017-06-23T13:03:35.2269471-03:00 0HL5Q9TP0KMO2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:03:35.2279492-03:00 0HL5Q9TP0KMO2 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:03:35.2294599-03:00 0HL5Q9TP0KMO3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:03:35.2294599-03:00 0HL5Q9TP0KMO4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:03:35.2304592-03:00 0HL5Q9TP0KMO3 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:03:35.2309592-03:00 0HL5Q9TP0KMO4 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:03:35.2329605-03:00 0HL5Q9TP0KMO2 [INF] Request finished in 6.1583ms 200 text/css (15c52c40)
2017-06-23T13:03:35.2334618-03:00 0HL5Q9TP0KMO4 [INF] Request finished in 3.7423ms 200 text/css (15c52c40)
2017-06-23T13:03:35.2569815-03:00 0HL5Q9TP0KMO3 [INF] Request finished in 28.0659ms 200 application/javascript (15c52c40)
2017-06-23T13:03:35.2569815-03:00 0HL5Q9TP0KMO5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:03:35.2589828-03:00 0HL5Q9TP0KMO5 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:03:35.2659881-03:00 0HL5Q9TP0KMO5 [INF] Request finished in 28.7371ms 200 application/javascript (15c52c40)
2017-06-23T13:05:25.1550233-03:00 0HL5Q9TP0KMO6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/   (e5be5b71)
2017-06-23T13:05:25.1560238-03:00 0HL5Q9TP0KMO6 [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:05:25.1560238-03:00 0HL5Q9TP0KMO6 [INF] Executing ViewResult, running view at path "/Views/Home/Index.cshtml". (9707eebe)
2017-06-23T13:05:25.1570242-03:00 0HL5Q9TP0KMO6 [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Index (Calemas.Erp.Sso.Api)" in 0.9195ms (afa2e885)
2017-06-23T13:05:25.1570242-03:00 0HL5Q9TP0KMO6 [INF] Request finished in 1.6987ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:05:25.3180890-03:00 0HL5Q9TP0KMO7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:05:25.3180890-03:00 0HL5Q9TP0KMO7 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:05:25.3190891-03:00 0HL5Q9TP0KMO7 [INF] Request finished in 1.1277ms 200 text/css (15c52c40)
2017-06-23T13:05:25.4650044-03:00 0HL5Q9TP0KMO8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:05:25.4660057-03:00 0HL5Q9TP0KMO8 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:05:25.4660057-03:00 0HL5Q9TP0KMO9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:05:25.4660057-03:00 0HL5Q9TP0KMOA [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:05:25.4660057-03:00 0HL5Q9TP0KMO9 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:05:25.4670070-03:00 0HL5Q9TP0KMOA [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:05:25.4670070-03:00 0HL5Q9TP0KMO8 [INF] Request finished in 1.4836ms 200 text/css (15c52c40)
2017-06-23T13:05:25.4680079-03:00 0HL5Q9TP0KMO9 [INF] Request finished in 2.3782ms 200 text/css (15c52c40)
2017-06-23T13:05:25.4690091-03:00 0HL5Q9TP0KMOA [INF] Request finished in 3.464ms 200 application/javascript (15c52c40)
2017-06-23T13:05:25.6567839-03:00 0HL5Q9TP0KMOB [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:05:25.6577847-03:00 0HL5Q9TP0KMOB [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:05:25.6577847-03:00 0HL5Q9TP0KMOB [INF] Request finished in 1.2008ms 200 application/javascript (15c52c40)
2017-06-23T13:05:25.7965359-03:00 0HL5Q9TP0KMOC [INF] Request starting HTTP/1.1 GET http://localhost:4000/icon.jpg   (e5be5b71)
2017-06-23T13:05:25.7975356-03:00 0HL5Q9TP0KMOC [INF] Sending file. Request path: '"/icon.jpg"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\icon.jpg"' (27b0a520)
2017-06-23T13:05:25.7975356-03:00 0HL5Q9TP0KMOC [INF] Request finished in 1.2443ms 200 image/jpeg (15c52c40)
2017-06-23T13:05:30.2663905-03:00 0HL5Q9TP0KMOD [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=open%20calemas&state=1498233929822   (e5be5b71)
2017-06-23T13:05:30.2663905-03:00 0HL5Q9TP0KMOD [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:05:30.2703931-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:05:30.2733933-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:05:30.2753995-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:05:30.2824003-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:05:30.2854030-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:05:30.2884039-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:05:30.2914115-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:05:30.2974114-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:05:30.3004111-03:00 0HL5Q9TP0KMOD [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:05:30.3014120-03:00 0HL5Q9TP0KMOD [ERR] response_type requires the openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"open calemas\",
  \"State\": \"1498233929822\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"open calemas\",
    \"state\": \"1498233929822\"
  }
}" (b79075f6)
2017-06-23T13:05:30.3014120-03:00 0HL5Q9TP0KMOD [ERR] Request validation failed (abd529bc)
2017-06-23T13:05:30.3014120-03:00 0HL5Q9TP0KMOD [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"open calemas\",
  \"State\": \"1498233929822\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"open calemas\",
    \"state\": \"1498233929822\"
  }
}" (9899f104)
2017-06-23T13:05:30.3024137-03:00 0HL5Q9TP0KMOD [INF] Request finished in 36.4953ms 302  (15c52c40)
2017-06-23T13:05:30.3074168-03:00 0HL5Q9TP0KMOE [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=0f603a2f8a51d97b63abb99bae87c962   (e5be5b71)
2017-06-23T13:05:30.3084173-03:00 0HL5Q9TP0KMOE [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["0f603a2f8a51d97b63abb99bae87c962"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:05:30.3084173-03:00 0HL5Q9TP0KMOE [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T13:05:30.3094182-03:00 0HL5Q9TP0KMOE [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.2763ms (afa2e885)
2017-06-23T13:05:30.3104228-03:00 0HL5Q9TP0KMOE [INF] Request finished in 2.3704ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:05:30.4985575-03:00 0HL5Q9TP0KMOF [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:05:30.4985575-03:00 0HL5Q9TP0KMOF [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:05:30.5005580-03:00 0HL5Q9TP0KMOF [INF] Request finished in 1.5312ms 200 text/css (15c52c40)
2017-06-23T13:05:30.6386491-03:00 0HL5Q9TP0KMOG [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:05:30.6396500-03:00 0HL5Q9TP0KMOG [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:05:30.6396500-03:00 0HL5Q9TP0KMOH [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:05:30.6396500-03:00 0HL5Q9TP0KMOI [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:05:30.6396500-03:00 0HL5Q9TP0KMOH [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:05:30.6396500-03:00 0HL5Q9TP0KMOG [INF] Request finished in 1.1515ms 200 text/css (15c52c40)
2017-06-23T13:05:30.6396500-03:00 0HL5Q9TP0KMOI [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:05:30.6626733-03:00 0HL5Q9TP0KMOJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:05:30.6626733-03:00 0HL5Q9TP0KMOJ [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:05:30.6636734-03:00 0HL5Q9TP0KMOI [INF] Request finished in 24.149ms 200 text/css (15c52c40)
2017-06-23T13:05:30.6636734-03:00 0HL5Q9TP0KMOJ [INF] Request finished in 7.6605ms 200 application/javascript (15c52c40)
2017-06-23T13:05:30.6646743-03:00 0HL5Q9TP0KMOH [INF] Request finished in 25.4405ms 200 application/javascript (15c52c40)
2017-06-23T13:05:53.1559384-03:00 0HL5Q9TP0KMOK [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498233952794   (e5be5b71)
2017-06-23T13:05:53.1569397-03:00 0HL5Q9TP0KMOK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:05:53.1599472-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:05:53.1629490-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:05:53.1649454-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:05:53.1669468-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:05:53.1699482-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:05:53.1739516-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:05:53.1769555-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:05:53.1799565-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:05:53.1829616-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:05:53.1859597-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:05:53.1889615-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:05:53.1949696-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:05:53.2104778-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:05:53.2329987-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:05:53.2500111-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:05:53.2970427-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (45ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:05:53.2990441-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:05:53.3000445-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:05:53.3020455-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:05:53.3030459-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:05:53.3030459-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:05:53.3040472-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:05:53.3050485-03:00 0HL5Q9TP0KMOK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:05:53.3050485-03:00 0HL5Q9TP0KMOK [ERR] Nonce required for implicit and hybrid flow with openid scope
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498233952794\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498233952794\"
  }
}" (de0008da)
2017-06-23T13:05:53.3050485-03:00 0HL5Q9TP0KMOK [ERR] Request validation failed (abd529bc)
2017-06-23T13:05:53.3060485-03:00 0HL5Q9TP0KMOK [INF] "{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498233952794\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498233952794\"
  }
}" (9899f104)
2017-06-23T13:05:53.3060485-03:00 0HL5Q9TP0KMOK [INF] Request finished in 150.035ms 302  (15c52c40)
2017-06-23T13:05:53.3140576-03:00 0HL5Q9TP0KMOL [INF] Request starting HTTP/1.1 GET http://localhost:4000/home/error?errorId=1d11b2215f41ff645c2c559f14f355f9   (e5be5b71)
2017-06-23T13:05:53.3155585-03:00 0HL5Q9TP0KMOL [INF] Executing action method "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" with arguments (["1d11b2215f41ff645c2c559f14f355f9"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:05:53.3160593-03:00 0HL5Q9TP0KMOL [INF] Executing ViewResult, running view at path "/Views/Shared/Error.cshtml". (9707eebe)
2017-06-23T13:05:53.3165598-03:00 0HL5Q9TP0KMOL [INF] Executed action "IdentityServer4.Quickstart.UI.HomeController.Error (Calemas.Erp.Sso.Api)" in 1.0489ms (afa2e885)
2017-06-23T13:05:53.3170598-03:00 0HL5Q9TP0KMOL [INF] Request finished in 2.6105ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:05:53.4831819-03:00 0HL5Q9TP0KMOM [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:05:53.4836819-03:00 0HL5Q9TP0KMOM [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:05:53.4846824-03:00 0HL5Q9TP0KMOM [INF] Request finished in 1.4007ms 200 text/css (15c52c40)
2017-06-23T13:05:53.6227944-03:00 0HL5Q9TP0KMON [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:05:53.6227944-03:00 0HL5Q9TP0KMON [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:05:53.6237953-03:00 0HL5Q9TP0KMON [INF] Request finished in 1.2783ms 200 text/css (15c52c40)
2017-06-23T13:05:53.6297989-03:00 0HL5Q9TP0KMOO [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:05:53.6297989-03:00 0HL5Q9TP0KMOP [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:05:53.6297989-03:00 0HL5Q9TP0KMOO [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:05:53.6308001-03:00 0HL5Q9TP0KMOP [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:05:53.6318010-03:00 0HL5Q9TP0KMOO [INF] Request finished in 2.8223ms 200 text/css (15c52c40)
2017-06-23T13:05:53.6328019-03:00 0HL5Q9TP0KMOQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:05:53.6338024-03:00 0HL5Q9TP0KMOQ [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:05:53.6338024-03:00 0HL5Q9TP0KMOP [INF] Request finished in 3.8557ms 200 application/javascript (15c52c40)
2017-06-23T13:05:53.6348032-03:00 0HL5Q9TP0KMOQ [INF] Request finished in 2.5354ms 200 application/javascript (15c52c40)
2017-06-23T13:10:55.1001760-03:00 0HL5Q9TP0KMOR [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz   (e5be5b71)
2017-06-23T13:10:55.1011760-03:00 0HL5Q9TP0KMOR [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:10:55.1061808-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:10:55.1111831-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:10:55.1141853-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:10:55.1171876-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:10:55.1221907-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:10:55.1276947-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:10:55.1311961-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:10:55.1336983-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:10:55.1361996-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:10:55.1387022-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:10:55.1432049-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:10:55.1492077-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:10:55.1657189-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.1822300-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.1982411-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:10:55.2328238-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (33ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:10:55.2343268-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:10:55.2348272-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:10:55.2358285-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:10:55.2363293-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.2368285-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.2373290-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:10:55.2378311-03:00 0HL5Q9TP0KMOR [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:10:55.2383294-03:00 0HL5Q9TP0KMOR [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234254739\",
  \"Nonce\": \"xyz\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234254739\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:10:55.2388295-03:00 0HL5Q9TP0KMOR [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T13:10:55.2388295-03:00 0HL5Q9TP0KMOR [INF] Request finished in 138.6809ms 302  (15c52c40)
2017-06-23T13:10:55.2433330-03:00 0HL5Q9TP0KMOS [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234254739%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:10:55.2443335-03:00 0HL5Q9TP0KMOS [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:10:55.2488366-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:10:55.2498379-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:10:55.2508379-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:10:55.2523396-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:10:55.2533397-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:10:55.2538401-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:10:55.2543406-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:10:55.2548410-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:10:55.2563415-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:10:55.2603450-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:10:55.2618455-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:10:55.2638468-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:10:55.2648477-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.2653481-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.2658477-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:10:55.2668486-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:10:55.2683499-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:10:55.2693508-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:10:55.2713517-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:10:55.2718517-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.2723522-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:10:55.2733531-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:10:55.2738535-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:10:55.2768553-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:10:55.2773561-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:10:55.2783562-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:10:55.2788566-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:10:55.2793571-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:10:55.2798575-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:10:55.2818584-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:10:55.2833602-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:10:55.2858623-03:00 0HL5Q9TP0KMOS [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:10:55.2868620-03:00 0HL5Q9TP0KMOS [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:10:55.2883637-03:00 0HL5Q9TP0KMOS [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 44.3586ms (afa2e885)
2017-06-23T13:10:55.2888637-03:00 0HL5Q9TP0KMOS [INF] Request finished in 45.3587ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:10:55.6483388-03:00 0HL5Q9TP0KMOT [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:10:55.6488389-03:00 0HL5Q9TP0KMOT [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:10:55.6503402-03:00 0HL5Q9TP0KMOT [INF] Request finished in 2.2636ms 200 text/css (15c52c40)
2017-06-23T13:10:55.6523407-03:00 0HL5Q9TP0KMOU [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:10:55.6528415-03:00 0HL5Q9TP0KMOU [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:10:55.6538424-03:00 0HL5Q9TP0KMOV [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:10:55.6538424-03:00 0HL5Q9TP0KMOV [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:10:55.6543424-03:00 0HL5Q9TP0KMOU [INF] Request finished in 1.9976ms 200 text/css (15c52c40)
2017-06-23T13:10:55.6633487-03:00 0HL5Q9TP0KMOV [INF] Request finished in 9.567ms 200 text/css (15c52c40)
2017-06-23T13:10:55.6693523-03:00 0HL5Q9TP0KMP0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:10:55.6693523-03:00 0HL5Q9TP0KMP1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:10:55.6698531-03:00 0HL5Q9TP0KMP1 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:10:55.6703531-03:00 0HL5Q9TP0KMP0 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:10:55.6723545-03:00 0HL5Q9TP0KMP1 [INF] Request finished in 5.412ms 200 application/javascript (15c52c40)
2017-06-23T13:10:55.6943692-03:00 0HL5Q9TP0KMP0 [INF] Request finished in 30.5126ms 200 application/javascript (15c52c40)
2017-06-23T13:10:55.9185190-03:00 0HL5Q9TP0KMP2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T13:10:55.9190198-03:00 0HL5Q9TP0KMP2 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T13:10:55.9195199-03:00 0HL5Q9TP0KMP2 [INF] Request finished in 1.2028ms 200 application/font-woff2 (15c52c40)
2017-06-23T13:10:56.2521463-03:00 0HL5Q9TP0KMP3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T13:10:56.2526475-03:00 0HL5Q9TP0KMP3 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T13:10:56.2531471-03:00 0HL5Q9TP0KMP3 [INF] Request finished in 1.0152ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:11:17.5284376-03:00 0HL5Q9TP0KMP4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234254739%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:11:17.5294380-03:00 0HL5Q9TP0KMP4 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:11:17.5334403-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:17.5364425-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:17.5399485-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:17.5464529-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (6ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:17.5524569-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:17.5564633-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:17.5624677-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:17.5684713-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:17.5724740-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:17.5794793-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:17.5864833-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:17.5984914-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:17.6305128-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:17.6525312-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:17.6745475-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:17.7255827-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:17.7295845-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:17.7345885-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:17.7455989-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:17.7676165-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:17.7926347-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:17.8186508-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:17.8666899-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:17.8726947-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:17.8776979-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:17.8827002-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:17.8867029-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:17.8887042-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:17.8927081-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:17.8957103-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:17.8987121-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:17.9007126-03:00 0HL5Q9TP0KMP4 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:17.9017131-03:00 0HL5Q9TP0KMP4 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:11:17.9027136-03:00 0HL5Q9TP0KMP4 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 373.3925ms (afa2e885)
2017-06-23T13:11:17.9027136-03:00 0HL5Q9TP0KMP4 [INF] Request finished in 374.3461ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:11:18.1238788-03:00 0HL5Q9TP0KMP5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:11:18.1248793-03:00 0HL5Q9TP0KMP5 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:11:18.1258793-03:00 0HL5Q9TP0KMP5 [INF] Request finished in 1.6798ms 200 text/css (15c52c40)
2017-06-23T13:11:18.2662546-03:00 0HL5Q9TP0KMP6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:11:18.2662546-03:00 0HL5Q9TP0KMP7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:11:18.2662546-03:00 0HL5Q9TP0KMP8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:11:18.2672559-03:00 0HL5Q9TP0KMP6 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:11:18.2672559-03:00 0HL5Q9TP0KMP8 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:11:18.2672559-03:00 0HL5Q9TP0KMP6 [INF] Request finished in 1.0029ms 200 text/css (15c52c40)
2017-06-23T13:11:18.2672559-03:00 0HL5Q9TP0KMP7 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:11:18.2682563-03:00 0HL5Q9TP0KMP8 [INF] Request finished in 1.9138ms 200 application/javascript (15c52c40)
2017-06-23T13:11:18.2692568-03:00 0HL5Q9TP0KMP7 [INF] Request finished in 2.5625ms 200 text/css (15c52c40)
2017-06-23T13:11:18.2732595-03:00 0HL5Q9TP0KMP9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:11:18.2762621-03:00 0HL5Q9TP0KMP9 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:11:18.2832666-03:00 0HL5Q9TP0KMP9 [INF] Request finished in 10.2792ms 200 application/javascript (15c52c40)
2017-06-23T13:11:18.7149343-03:00 0HL5Q9TP0KMPA [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T13:11:18.7149343-03:00 0HL5Q9TP0KMPA [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T13:11:18.7159381-03:00 0HL5Q9TP0KMPA [INF] Request finished in 0.9249ms 200 application/font-woff2 (15c52c40)
2017-06-23T13:11:18.9371776-03:00 0HL5Q9TP0KMPB [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T13:11:18.9371776-03:00 0HL5Q9TP0KMPB [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T13:11:18.9381785-03:00 0HL5Q9TP0KMPB [INF] Request finished in 1.0238ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:11:19.2795324-03:00 0HL5Q9TP0KMPC [INF] Request starting HTTP/1.1 GET http://localhost:4000/favicon.ico   (e5be5b71)
2017-06-23T13:11:19.2795324-03:00 0HL5Q9TP0KMPC [INF] Sending file. Request path: '"/favicon.ico"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\favicon.ico"' (27b0a520)
2017-06-23T13:11:19.2795324-03:00 0HL5Q9TP0KMPC [INF] Request finished in 0.9085ms 200 image/x-icon (15c52c40)
2017-06-23T13:11:19.6043611-03:00 0HL5Q9TP0KMPD [INF] Request starting HTTP/1.1 GET http://localhost:4000/favicon.ico   (e5be5b71)
2017-06-23T13:11:19.6043611-03:00 0HL5Q9TP0KMPD [INF] Sending file. Request path: '"/favicon.ico"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\favicon.ico"' (27b0a520)
2017-06-23T13:11:19.6053620-03:00 0HL5Q9TP0KMPD [INF] Request finished in 1.0324ms 200 image/x-icon (15c52c40)
2017-06-23T13:11:21.2463570-03:00 0HL5Q9TP0KMPE [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234254739%26nonce%3Dxyz application/x-www-form-urlencoded 492 (e5be5b71)
2017-06-23T13:11:21.3814573-03:00 0HL5Q9TP0KMPE [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:11:21.5325642-03:00 0HL5Q9TP0KMPE [INF] Executed DbCommand (34ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-23T13:11:21.6106258-03:00 0HL5Q9TP0KMPE [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:11:21.6146293-03:00 0HL5Q9TP0KMPE [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz". (d98d540e)
2017-06-23T13:11:21.6156302-03:00 0HL5Q9TP0KMPE [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 365.475ms (afa2e885)
2017-06-23T13:11:21.6156302-03:00 0HL5Q9TP0KMPE [INF] Request finished in 369.8976ms 302  (15c52c40)
2017-06-23T13:11:21.6206342-03:00 0HL5Q9TP0KMPF [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz   (e5be5b71)
2017-06-23T13:11:21.6326422-03:00 0HL5Q9TP0KMPF [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:21.6326422-03:00 0HL5Q9TP0KMPF [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:21.6336414-03:00 0HL5Q9TP0KMPF [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-23T13:11:21.6366453-03:00 0HL5Q9TP0KMPF [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:21.6426485-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:21.6466573-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:21.6521605-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:21.6581645-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:21.6632739-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:21.6652753-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:21.6682771-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:21.6702784-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:21.6732806-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:21.6782838-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:21.6822860-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:21.6882901-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:21.7043008-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.7253171-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.7423270-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:21.7784410-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:21.7794418-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:21.7804439-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:21.7814440-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:21.7824445-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.7824445-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.7834445-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:21.7834445-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:21.7844454-03:00 0HL5Q9TP0KMPF [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:21.7844454-03:00 0HL5Q9TP0KMPF [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234254739\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"e845f58056e03995d6e42f480331210c\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234254739\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:11:21.8134646-03:00 0HL5Q9TP0KMPF [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:11:21.8910221-03:00 0HL5Q9TP0KMPF [INF] Showing consent: User has not yet consented (07b81e7e)
2017-06-23T13:11:21.8950255-03:00 0HL5Q9TP0KMPF [INF] Request finished in 274.3527ms 302  (15c52c40)
2017-06-23T13:11:21.8990282-03:00 0HL5Q9TP0KMPG [INF] Request starting HTTP/1.1 GET http://localhost:4000/consent?returnUrl=%2Fconnect%2Fauthorize%2Fconsent%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234254739%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:11:21.9000283-03:00 0HL5Q9TP0KMPG [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:21.9000283-03:00 0HL5Q9TP0KMPG [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:21.9060323-03:00 0HL5Q9TP0KMPG [INF] Executing action method "IdentityServer4.Quickstart.UI.ConsentController.Index (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/consent?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:11:21.9130376-03:00 0HL5Q9TP0KMPG [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:21.9150389-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:21.9160390-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:21.9170415-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:21.9180411-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:21.9180411-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:21.9190412-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:21.9190412-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:21.9200417-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:21.9210417-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:21.9220426-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:21.9230439-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:21.9250452-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:21.9270478-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.9280478-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.9300483-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:21.9300483-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:21.9320493-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:21.9320493-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:21.9340510-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:21.9350515-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.9350515-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.9360519-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:21.9360519-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:21.9370536-03:00 0HL5Q9TP0KMPG [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:21.9390554-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:21.9440577-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:21.9440577-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:21.9450590-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:21.9455643-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:21.9465640-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:21.9470644-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:21.9475645-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:21.9480657-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:21.9505667-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:21.9510671-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:21.9530725-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:21.9540681-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.9545689-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:21.9550690-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:21.9555694-03:00 0HL5Q9TP0KMPG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:22.0926206-03:00 0HL5Q9TP0KMPG [INF] Executing ViewResult, running view at path "/Views/Consent/Index.cshtml". (9707eebe)
2017-06-23T13:11:22.2021921-03:00 0HL5Q9TP0KMPG [INF] Executed action "IdentityServer4.Quickstart.UI.ConsentController.Index (Calemas.Erp.Sso.Api)" in 298.8093ms (afa2e885)
2017-06-23T13:11:22.2021921-03:00 0HL5Q9TP0KMPG [INF] Request finished in 302.718ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:11:22.3759570-03:00 0HL5Q9TP0KMPH [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:11:22.3759570-03:00 0HL5Q9TP0KMPH [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:22.3759570-03:00 0HL5Q9TP0KMPH [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:22.3769558-03:00 0HL5Q9TP0KMPH [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:11:22.3769558-03:00 0HL5Q9TP0KMPH [INF] Request finished in 2.0403ms 200 text/css (15c52c40)
2017-06-23T13:11:22.5130579-03:00 0HL5Q9TP0KMPI [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:11:22.5130579-03:00 0HL5Q9TP0KMPJ [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:11:22.5140583-03:00 0HL5Q9TP0KMPK [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:11:22.5140583-03:00 0HL5Q9TP0KMPI [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:22.5140583-03:00 0HL5Q9TP0KMPK [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:22.5140583-03:00 0HL5Q9TP0KMPK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:22.5150588-03:00 0HL5Q9TP0KMPJ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:22.5150588-03:00 0HL5Q9TP0KMPJ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:22.5150588-03:00 0HL5Q9TP0KMPI [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:22.5150588-03:00 0HL5Q9TP0KMPK [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:11:22.5150588-03:00 0HL5Q9TP0KMPJ [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:11:22.5150588-03:00 0HL5Q9TP0KMPI [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:11:22.5160605-03:00 0HL5Q9TP0KMPK [INF] Request finished in 2.1807ms 200 text/css (15c52c40)
2017-06-23T13:11:22.5160605-03:00 0HL5Q9TP0KMPL [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:11:22.5160605-03:00 0HL5Q9TP0KMPL [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:22.5170614-03:00 0HL5Q9TP0KMPL [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:22.5170614-03:00 0HL5Q9TP0KMPL [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:11:22.5180618-03:00 0HL5Q9TP0KMPJ [INF] Request finished in 4.4768ms 200 application/javascript (15c52c40)
2017-06-23T13:11:22.5180618-03:00 0HL5Q9TP0KMPL [INF] Request finished in 4.8775ms 200 application/javascript (15c52c40)
2017-06-23T13:11:22.5180618-03:00 0HL5Q9TP0KMPI [INF] Request finished in 5.0314ms 200 text/css (15c52c40)
2017-06-23T13:11:28.2763023-03:00 0HL5Q9TP0KMPM [INF] Request starting HTTP/1.1 POST http://localhost:4000/consent application/x-www-form-urlencoded 588 (e5be5b71)
2017-06-23T13:11:28.2773036-03:00 0HL5Q9TP0KMPM [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:28.2773036-03:00 0HL5Q9TP0KMPM [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.3073228-03:00 0HL5Q9TP0KMPM [INF] Executing action method "IdentityServer4.Quickstart.UI.ConsentController.Index (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.ConsentInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:11:28.3143294-03:00 0HL5Q9TP0KMPM [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.3163291-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:28.3173295-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:28.3173295-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:28.3183304-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:28.3183304-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:28.3193317-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:28.3193317-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:28.3202447-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:28.3202447-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:28.3222514-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:28.3222514-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:28.3242502-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:28.3242502-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.3252515-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.3272541-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:28.3282529-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:28.3302563-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:28.3302563-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:28.3322585-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:28.3332598-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.3342569-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.3342569-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:28.3352590-03:00 0HL5Q9TP0KMPM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:28.3362579-03:00 0HL5Q9TP0KMPM [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.3392601-03:00 0HL5Q9TP0KMPM [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.3542724-03:00 0HL5Q9TP0KMPM [INF] Executing RedirectResult, redirecting to "/connect/authorize/consent?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz". (d98d540e)
2017-06-23T13:11:28.3547732-03:00 0HL5Q9TP0KMPM [INF] Executed action "IdentityServer4.Quickstart.UI.ConsentController.Index (Calemas.Erp.Sso.Api)" in 74.0585ms (afa2e885)
2017-06-23T13:11:28.3547732-03:00 0HL5Q9TP0KMPM [INF] Request finished in 78.7184ms 302  (15c52c40)
2017-06-23T13:11:28.3627786-03:00 0HL5Q9TP0KMPN [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/consent?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234254739&nonce=xyz   (e5be5b71)
2017-06-23T13:11:28.3632794-03:00 0HL5Q9TP0KMPN [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:11:28.3632794-03:00 0HL5Q9TP0KMPN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.3637798-03:00 0HL5Q9TP0KMPN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/consent" (f7642de5)
2017-06-23T13:11:28.3717881-03:00 0HL5Q9TP0KMPN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.3817952-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:11:28.3827973-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:11:28.3838010-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:11:28.3847994-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:11:28.3847994-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:11:28.3857983-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:11:28.3857983-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:11:28.3867987-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:11:28.3867987-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:11:28.3898009-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:28.3928044-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:28.3958049-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:28.3958049-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.3998076-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.4028094-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:28.4038103-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:28.4058120-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:11:28.4088155-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:11:28.4108152-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:11:28.4118152-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.4128177-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:11:28.4138186-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:11:28.4158183-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:11:28.4158183-03:00 0HL5Q9TP0KMPN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:28.4168188-03:00 0HL5Q9TP0KMPN [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234254739\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"e845f58056e03995d6e42f480331210c\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234254739\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:11:28.4178192-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:11:28.4378326-03:00 0HL5Q9TP0KMPN [INF] User consented to scopes: "openid, calemas" (0f706f38)
2017-06-23T13:11:28.4708602-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (2ms) [Parameters=[@__token_Key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__token_Key_0 (6438bdd5)
2017-06-23T13:11:28.6830127-03:00 0HL5Q9TP0KMPN [INF] Executed DbCommand (12ms) [Parameters=[@p2='?' (Size = 200), @p0='?', @p1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [PersistedGrants] SET [CreationTime] = @p0, [Data] = @p1
WHERE [Key] = @p2;
SELECT @@ROWCOUNT; (6438bdd5)
2017-06-23T13:11:29.0514062-03:00 0HL5Q9TP0KMPN [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498234254739\",
  \"Scope\": \"openid calemas\"
}" (5993a9fa)
2017-06-23T13:11:29.0654155-03:00 0HL5Q9TP0KMPN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:29.0704178-03:00 0HL5Q9TP0KMPN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:11:29.0734196-03:00 0HL5Q9TP0KMPN [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:11:29.0804245-03:00 0HL5Q9TP0KMPN [INF] Request finished in 718.5187ms 302  (15c52c40)
2017-06-23T13:12:47.8864450-03:00 0HL5Q9TP0KMPO [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:12:47.9014549-03:00 0HL5Q9TP0KMPO [INF] Request finished in 29.0926ms 204  (15c52c40)
2017-06-23T13:12:48.1296414-03:00 0HL5Q9TP0KMPP [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:12:48.1336441-03:00 0HL5Q9TP0KMPP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:12:48.1456521-03:00 0HL5Q9TP0KMPP [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:12:48.2277156-03:00 0HL5Q9TP0KMPP [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:12:48.2287144-03:00 0HL5Q9TP0KMPP [ERR] invalid_token (489b3335)
2017-06-23T13:12:48.2307166-03:00 0HL5Q9TP0KMPP [INF] Request finished in 101.0152ms 401  (15c52c40)
2017-06-23T13:13:07.9238395-03:00 0HL5Q9TP0KMPQ [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:07.9243399-03:00 0HL5Q9TP0KMPQ [INF] Request finished in 0.4306ms 204  (15c52c40)
2017-06-23T13:13:08.3356745-03:00 0HL5Q9TP0KMPR [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:08.3356745-03:00 0HL5Q9TP0KMPR [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:13:08.3366746-03:00 0HL5Q9TP0KMPR [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:13:08.3536849-03:00 0HL5Q9TP0KMPR [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '036b449a13b315bf92720d75663d067c', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"036b449a13b315bf92720d75663d067c\"}.{\"nbf\":1498232089,\"exp\":1498235689,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498230979,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:13:08.3536849-03:00 0HL5Q9TP0KMPR [ERR] invalid_token (489b3335)
2017-06-23T13:13:08.3536849-03:00 0HL5Q9TP0KMPR [INF] Request finished in 18.2251ms 401  (15c52c40)
2017-06-23T13:13:28.9836653-03:00 0HL5Q9TP0KMPS [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234408565&nonce=xyz   (e5be5b71)
2017-06-23T13:13:28.9841657-03:00 0HL5Q9TP0KMPS [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:13:28.9841657-03:00 0HL5Q9TP0KMPS [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:28.9846666-03:00 0HL5Q9TP0KMPS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:13:28.9846666-03:00 0HL5Q9TP0KMPS [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:28.9886721-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:28.9926748-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:28.9956774-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:28.9976784-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:29.0006806-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:29.0036820-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:29.0056845-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:29.0086871-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:29.0116902-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:29.0146908-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:29.0186922-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:29.0246962-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:29.0397060-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:29.0567180-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:29.0732316-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:29.1097578-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:29.1127604-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:29.1167627-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:29.1227667-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:29.1437805-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:29.1607921-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:29.1848122-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:29.2248419-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:29.2258423-03:00 0HL5Q9TP0KMPS [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:29.2258423-03:00 0HL5Q9TP0KMPS [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234408565\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"e845f58056e03995d6e42f480331210c\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234408565\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:13:29.2278441-03:00 0HL5Q9TP0KMPS [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:13:29.2388516-03:00 0HL5Q9TP0KMPS [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498234408565\",
  \"Scope\": \"openid calemas\"
}" (5993a9fa)
2017-06-23T13:13:29.2388516-03:00 0HL5Q9TP0KMPS [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:29.2408526-03:00 0HL5Q9TP0KMPS [INF] Request finished in 257.6187ms 302  (15c52c40)
2017-06-23T13:13:32.7166737-03:00 0HL5Q9TP0KMPT [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:32.7166737-03:00 0HL5Q9TP0KMPT [INF] Request finished in 0.5373ms 204  (15c52c40)
2017-06-23T13:13:32.8976016-03:00 0HL5Q9TP0KMPU [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:32.8976016-03:00 0HL5Q9TP0KMPU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:13:32.8976016-03:00 0HL5Q9TP0KMPU [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:13:32.8996050-03:00 0HL5Q9TP0KMPU [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '036b449a13b315bf92720d75663d067c', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"036b449a13b315bf92720d75663d067c\"}.{\"nbf\":1498232089,\"exp\":1498235689,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498230979,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:13:32.8996050-03:00 0HL5Q9TP0KMPU [ERR] invalid_token (489b3335)
2017-06-23T13:13:32.9006038-03:00 0HL5Q9TP0KMPU [INF] Request finished in 3.0847ms 401  (15c52c40)
2017-06-23T13:13:35.6349445-03:00 0HL5Q9TP0KMPV [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:35.6359453-03:00 0HL5Q9TP0KMPV [INF] Request finished in 0.4675ms 204  (15c52c40)
2017-06-23T13:13:35.9399413-03:00 0HL5Q9TP0KMQ0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:35.9409426-03:00 0HL5Q9TP0KMQ0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:13:35.9419426-03:00 0HL5Q9TP0KMQ0 [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:13:35.9439448-03:00 0HL5Q9TP0KMQ0 [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '036b449a13b315bf92720d75663d067c', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"036b449a13b315bf92720d75663d067c\"}.{\"nbf\":1498232089,\"exp\":1498235689,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498230979,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:13:35.9449453-03:00 0HL5Q9TP0KMQ0 [ERR] invalid_token (489b3335)
2017-06-23T13:13:35.9449453-03:00 0HL5Q9TP0KMQ0 [INF] Request finished in 4.9624ms 401  (15c52c40)
2017-06-23T13:13:38.1223430-03:00 0HL5Q9TP0KMQ1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ0MDksImV4cCI6MTQ5ODIzNDcwOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NDA5LCJhdF9oYXNoIjoiRko1cy1UeWZac2l2cGs4T2p3eDJVZyIsInNpZCI6ImU4NDVmNTgwNTZlMDM5OTVkNmU0MmY0ODAzMzEyMTBjIiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDI4MSwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.PxaZlg4_S1peQGA2lwaYX2JKNkZ6exXpNH8LfFSlTxovFFCYqEqMkYHPOhJpPWU954lNke8tKzXNUU2xytU_jXr5YDiV7DmaIWxkTfsgGinfCtJ1flMldtwLdbnSDXt_T-SHEI1zyFlStH6AAcO_VvJZk1-DZzn76m1Be2JlrbxqqPr9DUYgL1lDFEMMQV-PiXG5id0yOqvBqNpEQUOmsg153BvNYAqqdb4gDHyLU619YOrdI6ffVJpOmxUsmNAFOsis8EFfvMUlq9s6M2sshN5HgeFciOiukIXqxrvFo66QDwC_Z6Qi8hV0RlzfXMOrODq_cJB_N80bi4YdwZRtYA&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498234408565   (e5be5b71)
2017-06-23T13:13:38.1233443-03:00 0HL5Q9TP0KMQ1 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:13:38.1243452-03:00 0HL5Q9TP0KMQ1 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.1263465-03:00 0HL5Q9TP0KMQ1 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T13:13:38.1363548-03:00 0HL5Q9TP0KMQ1 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.1633706-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:38.1693792-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:38.1723810-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:38.1778870-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:38.1818872-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:38.1873961-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:38.1923980-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:38.1954002-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:38.1984037-03:00 0HL5Q9TP0KMQ1 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:38.2334257-03:00 0HL5Q9TP0KMQ1 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.2394293-03:00 0HL5Q9TP0KMQ1 [INF] End session request validation success
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"SubjectId\": \"1\",
  \"PostLogOutUri\": \"http://localhost:8080/#/loggedout/?\",
  \"State\": \"1498234408565\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ0MDksImV4cCI6MTQ5ODIzNDcwOSwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NDA5LCJhdF9oYXNoIjoiRko1cy1UeWZac2l2cGs4T2p3eDJVZyIsInNpZCI6ImU4NDVmNTgwNTZlMDM5OTVkNmU0MmY0ODAzMzEyMTBjIiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDI4MSwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.PxaZlg4_S1peQGA2lwaYX2JKNkZ6exXpNH8LfFSlTxovFFCYqEqMkYHPOhJpPWU954lNke8tKzXNUU2xytU_jXr5YDiV7DmaIWxkTfsgGinfCtJ1flMldtwLdbnSDXt_T-SHEI1zyFlStH6AAcO_VvJZk1-DZzn76m1Be2JlrbxqqPr9DUYgL1lDFEMMQV-PiXG5id0yOqvBqNpEQUOmsg153BvNYAqqdb4gDHyLU619YOrdI6ffVJpOmxUsmNAFOsis8EFfvMUlq9s6M2sshN5HgeFciOiukIXqxrvFo66QDwC_Z6Qi8hV0RlzfXMOrODq_cJB_N80bi4YdwZRtYA\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498234408565\"
  }
}" (8a893fca)
2017-06-23T13:13:38.2689542-03:00 0HL5Q9TP0KMQ1 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.2694547-03:00 0HL5Q9TP0KMQ1 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.2729569-03:00 0HL5Q9TP0KMQ1 [INF] Request finished in 149.7452ms 302  (15c52c40)
2017-06-23T13:13:38.2779600-03:00 0HL5Q9TP0KMQ2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=f3c91ac3745c0fbcc2acd4ece73d47b4   (e5be5b71)
2017-06-23T13:13:38.2784605-03:00 0HL5Q9TP0KMQ2 [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:13:38.2789609-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.2819627-03:00 0HL5Q9TP0KMQ2 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["f3c91ac3745c0fbcc2acd4ece73d47b4"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:13:38.2864691-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.3044807-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.3044807-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.3144878-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.3144878-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.3164892-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.3475097-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-23T13:13:38.3475097-03:00 0HL5Q9TP0KMQ2 [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:38.4545893-03:00 0HL5Q9TP0KMQ2 [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-23T13:13:38.4681023-03:00 0HL5Q9TP0KMQ2 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 186.5813ms (afa2e885)
2017-06-23T13:13:38.4681023-03:00 0HL5Q9TP0KMQ2 [INF] Request finished in 190.166ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:13:38.6627411-03:00 0HL5Q9TP0KMQ3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:13:38.6627411-03:00 0HL5Q9TP0KMQ3 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:13:38.6637420-03:00 0HL5Q9TP0KMQ3 [INF] Request finished in 1.0181ms 200 text/css (15c52c40)
2017-06-23T13:13:38.7868363-03:00 0HL5Q9TP0KMQ4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:13:38.7873368-03:00 0HL5Q9TP0KMQ4 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:13:38.8198590-03:00 0HL5Q9TP0KMQ4 [INF] Request finished in 32.8843ms 200 text/css (15c52c40)
2017-06-23T13:13:38.8203590-03:00 0HL5Q9TP0KMQ5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:13:38.8208591-03:00 0HL5Q9TP0KMQ5 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:13:38.8218595-03:00 0HL5Q9TP0KMQ5 [INF] Request finished in 24.9245ms 200 text/css (15c52c40)
2017-06-23T13:13:38.8248630-03:00 0HL5Q9TP0KMQ6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/js/signout-redirect.js   (e5be5b71)
2017-06-23T13:13:38.8258630-03:00 0HL5Q9TP0KMQ6 [INF] Sending file. Request path: '"/js/signout-redirect.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\js\signout-redirect.js"' (27b0a520)
2017-06-23T13:13:38.8283644-03:00 0HL5Q9TP0KMQ6 [INF] Request finished in 26.0177ms 200 application/javascript (15c52c40)
2017-06-23T13:13:38.8283644-03:00 0HL5Q9TP0KMQ7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:13:38.8288648-03:00 0HL5Q9TP0KMQ8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=e845f58056e03995d6e42f480331210c&logoutId=f3c91ac3745c0fbcc2acd4ece73d47b4   (e5be5b71)
2017-06-23T13:13:38.8293648-03:00 0HL5Q9TP0KMQ7 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:13:38.8298653-03:00 0HL5Q9TP0KMQ9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:13:38.8303653-03:00 0HL5Q9TP0KMQ9 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:13:38.8303653-03:00 0HL5Q9TP0KMQ8 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-23T13:13:38.8498787-03:00 0HL5Q9TP0KMQ9 [INF] Request finished in 19.8253ms 200 application/javascript (15c52c40)
2017-06-23T13:13:38.8788978-03:00 0HL5Q9TP0KMQ7 [INF] Request finished in 49.9291ms 200 application/javascript (15c52c40)
2017-06-23T13:13:38.9049152-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (54ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:38.9159224-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (9ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:38.9184237-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:38.9209255-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:38.9224268-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:38.9289313-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:38.9644549-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (35ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:38.9704593-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:38.9824682-03:00 0HL5Q9TP0KMQ8 [INF] Executed DbCommand (11ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:38.9834682-03:00 0HL5Q9TP0KMQ8 [INF] Successful signout callback. Client logout iframe urls: "http://localhost:8080/#/loggedout/?&sid=e845f58056e03995d6e42f480331210c&iss=http%3A%2F%2Flocalhost%3A4000" (76941251)
2017-06-23T13:13:39.0004790-03:00 0HL5Q9TP0KMQ8 [INF] Request finished in 171.5694ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-23T13:13:42.7692989-03:00 0HL5Q9TP0KMQA [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234422235&nonce=xyz   (e5be5b71)
2017-06-23T13:13:42.7697997-03:00 0HL5Q9TP0KMQA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:13:42.7723011-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:42.7738024-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:42.7748028-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:42.7753029-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:42.7758037-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:42.7763042-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:42.7768042-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:42.7773042-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:42.7778046-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:42.7818081-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:42.7883118-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:42.7983185-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:42.8258376-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:42.8573581-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:42.8943822-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:42.9579250-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (62ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:42.9594263-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:42.9604264-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:42.9624277-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:42.9634286-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:42.9644295-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:42.9674329-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:42.9684321-03:00 0HL5Q9TP0KMQA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:42.9694330-03:00 0HL5Q9TP0KMQA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234422235\",
  \"Nonce\": \"xyz\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234422235\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:13:42.9694330-03:00 0HL5Q9TP0KMQA [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T13:13:42.9699330-03:00 0HL5Q9TP0KMQA [INF] Request finished in 200.7955ms 302  (15c52c40)
2017-06-23T13:13:42.9834424-03:00 0HL5Q9TP0KMQB [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234422235%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:13:42.9844433-03:00 0HL5Q9TP0KMQB [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234422235&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:13:42.9869450-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:42.9879455-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:42.9889464-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:42.9904464-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:42.9919478-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:42.9929482-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:42.9939491-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:42.9949500-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:42.9954504-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:42.9974513-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:42.9979518-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:42.9999535-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:43.0009540-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:43.0024549-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:43.0039562-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:43.0054567-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:43.0074580-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:43.0079585-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:43.0104611-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:43.0114611-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:43.0119611-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:43.0129620-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:43.0144633-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:43.0164647-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:43.0174647-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:43.0179651-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:43.0184656-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:43.0189656-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:43.0194660-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:43.0199665-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:43.0204669-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:43.0209678-03:00 0HL5Q9TP0KMQB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:43.0219682-03:00 0HL5Q9TP0KMQB [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:13:43.0239692-03:00 0HL5Q9TP0KMQB [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 39.8608ms (afa2e885)
2017-06-23T13:13:43.0244696-03:00 0HL5Q9TP0KMQB [INF] Request finished in 41.2989ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:13:43.2256059-03:00 0HL5Q9TP0KMQC [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:13:43.2266059-03:00 0HL5Q9TP0KMQC [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:13:43.2266059-03:00 0HL5Q9TP0KMQC [INF] Request finished in 1.0144ms 200 text/css (15c52c40)
2017-06-23T13:13:43.3626640-03:00 0HL5Q9TP0KMQD [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:13:43.3626640-03:00 0HL5Q9TP0KMQE [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:13:43.3626640-03:00 0HL5Q9TP0KMQF [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:13:43.3626640-03:00 0HL5Q9TP0KMQD [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:13:43.3636657-03:00 0HL5Q9TP0KMQF [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:13:43.3636657-03:00 0HL5Q9TP0KMQE [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:13:43.3636657-03:00 0HL5Q9TP0KMQD [INF] Request finished in 1.0957ms 200 text/css (15c52c40)
2017-06-23T13:13:43.3646658-03:00 0HL5Q9TP0KMQF [INF] Request finished in 1.5485ms 200 application/javascript (15c52c40)
2017-06-23T13:13:43.3646658-03:00 0HL5Q9TP0KMQE [INF] Request finished in 2.1881ms 200 text/css (15c52c40)
2017-06-23T13:13:43.3761779-03:00 0HL5Q9TP0KMQG [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:13:43.3766779-03:00 0HL5Q9TP0KMQG [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:13:43.3781788-03:00 0HL5Q9TP0KMQG [INF] Request finished in 11.1578ms 200 application/javascript (15c52c40)
2017-06-23T13:13:43.7777431-03:00 0HL5Q9TP0KMQH [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T13:13:43.7787431-03:00 0HL5Q9TP0KMQH [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T13:13:43.7797448-03:00 0HL5Q9TP0KMQH [INF] Request finished in 2.202ms 200 application/font-woff2 (15c52c40)
2017-06-23T13:13:43.9421902-03:00 0HL5Q9TP0KMQI [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T13:13:43.9431898-03:00 0HL5Q9TP0KMQI [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T13:13:43.9441903-03:00 0HL5Q9TP0KMQI [INF] Request finished in 2.5452ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:13:46.8596349-03:00 0HL5Q9TP0KMQJ [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234422235%26nonce%3Dxyz application/x-www-form-urlencoded 492 (e5be5b71)
2017-06-23T13:13:46.8606366-03:00 0HL5Q9TP0KMQJ [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:13:46.8656393-03:00 0HL5Q9TP0KMQJ [INF] Executed DbCommand (3ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-23T13:13:46.8656393-03:00 0HL5Q9TP0KMQJ [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:13:46.8666398-03:00 0HL5Q9TP0KMQJ [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234422235&nonce=xyz". (d98d540e)
2017-06-23T13:13:46.8666398-03:00 0HL5Q9TP0KMQJ [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 6.3377ms (afa2e885)
2017-06-23T13:13:46.8666398-03:00 0HL5Q9TP0KMQJ [INF] Request finished in 7.245ms 302  (15c52c40)
2017-06-23T13:13:46.8726438-03:00 0HL5Q9TP0KMQK [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234422235&nonce=xyz   (e5be5b71)
2017-06-23T13:13:46.8736451-03:00 0HL5Q9TP0KMQK [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:13:46.8736451-03:00 0HL5Q9TP0KMQK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:46.8736451-03:00 0HL5Q9TP0KMQK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-23T13:13:46.8736451-03:00 0HL5Q9TP0KMQK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:46.8766494-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:46.8776564-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:46.8776564-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:46.8786482-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:46.8786482-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:46.8796495-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:46.8796495-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:46.8806496-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:46.8806496-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:46.8821534-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:46.8826542-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:46.8841543-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:46.8846551-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:46.8851552-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:46.8861556-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:46.8866561-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:46.8876565-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:13:46.8881574-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:13:46.8896579-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:13:46.8901583-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:46.8906583-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:13:46.8911592-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:13:46.8921596-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:13:46.8926597-03:00 0HL5Q9TP0KMQK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:46.8926597-03:00 0HL5Q9TP0KMQK [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234422235\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"f7e26fc5e0f591ffce5dce2c8e238a45\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234422235\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:13:46.8946614-03:00 0HL5Q9TP0KMQK [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:13:46.9056714-03:00 0HL5Q9TP0KMQK [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498234422235\",
  \"Scope\": \"openid calemas\"
}" (5993a9fa)
2017-06-23T13:13:46.9066723-03:00 0HL5Q9TP0KMQK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:46.9066723-03:00 0HL5Q9TP0KMQK [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:46.9066723-03:00 0HL5Q9TP0KMQK [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:13:46.9066723-03:00 0HL5Q9TP0KMQK [INF] Request finished in 34.441ms 302  (15c52c40)
2017-06-23T13:13:50.3682977-03:00 0HL5Q9TP0KMQL [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:50.3692986-03:00 0HL5Q9TP0KMQL [INF] Request finished in 0.4068ms 204  (15c52c40)
2017-06-23T13:13:50.6915357-03:00 0HL5Q9TP0KMQM [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:13:50.6925370-03:00 0HL5Q9TP0KMQM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:13:50.6925370-03:00 0HL5Q9TP0KMQM [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:13:50.6945383-03:00 0HL5Q9TP0KMQM [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '036b449a13b315bf92720d75663d067c', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"036b449a13b315bf92720d75663d067c\"}.{\"nbf\":1498232089,\"exp\":1498235689,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498230979,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:13:50.6950429-03:00 0HL5Q9TP0KMQM [ERR] invalid_token (489b3335)
2017-06-23T13:13:50.6950429-03:00 0HL5Q9TP0KMQM [INF] Request finished in 3.2883ms 401  (15c52c40)
2017-06-23T13:13:58.4923761-03:00 0HL5Q9TP0KMQN [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ0MjYsImV4cCI6MTQ5ODIzNDcyNiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NDI2LCJhdF9oYXNoIjoickdPc3JaQm5UZkJTVUJmU18yaThydyIsInNpZCI6ImY3ZTI2ZmM1ZTBmNTkxZmZjZTVkY2UyYzhlMjM4YTQ1Iiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDQyNiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.i7HnKivmV-mPO-csO3KYfDDSMhTaU9qjn0Crkwn88gmuDR8cxIMhp4YZP1WsWc7yaK2DR9QOi8Lejs0bNNO8eY7dP3l7Id1F_FJIObP5V8j-joPplWviEUroN7Wz3q31F8oyQGeGgTjTTONsxIvHdPAhG114kL64Eurt-klTbs_5bzfNsLBn2ByRzSykx-DpFV9RwCtrOmjg3Jef82GYhANrZG0B-I0o_bg4dVE8tPHVUcowJxCrjg0SsKXx8p4rWVEVutNEoPaB4UpqF6mXzjT2DSBfUSu5H9utHI_kitonOrXg8_aF9SWuv8BtXGJoGfTooSgGzVlNd7sYFQUCeA&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498234422235   (e5be5b71)
2017-06-23T13:13:58.4933770-03:00 0HL5Q9TP0KMQN [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:13:58.4933770-03:00 0HL5Q9TP0KMQN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.4933770-03:00 0HL5Q9TP0KMQN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T13:13:58.4933770-03:00 0HL5Q9TP0KMQN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.4963788-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:58.4973797-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:58.4973797-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:58.4983802-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:58.4983802-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:58.4993814-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:58.4993814-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:58.5003823-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:58.5003823-03:00 0HL5Q9TP0KMQN [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:58.5013815-03:00 0HL5Q9TP0KMQN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5023837-03:00 0HL5Q9TP0KMQN [INF] End session request validation success
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"SubjectId\": \"1\",
  \"PostLogOutUri\": \"http://localhost:8080/#/loggedout/?\",
  \"State\": \"1498234422235\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ0MjYsImV4cCI6MTQ5ODIzNDcyNiwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NDI2LCJhdF9oYXNoIjoickdPc3JaQm5UZkJTVUJmU18yaThydyIsInNpZCI6ImY3ZTI2ZmM1ZTBmNTkxZmZjZTVkY2UyYzhlMjM4YTQ1Iiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDQyNiwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.i7HnKivmV-mPO-csO3KYfDDSMhTaU9qjn0Crkwn88gmuDR8cxIMhp4YZP1WsWc7yaK2DR9QOi8Lejs0bNNO8eY7dP3l7Id1F_FJIObP5V8j-joPplWviEUroN7Wz3q31F8oyQGeGgTjTTONsxIvHdPAhG114kL64Eurt-klTbs_5bzfNsLBn2ByRzSykx-DpFV9RwCtrOmjg3Jef82GYhANrZG0B-I0o_bg4dVE8tPHVUcowJxCrjg0SsKXx8p4rWVEVutNEoPaB4UpqF6mXzjT2DSBfUSu5H9utHI_kitonOrXg8_aF9SWuv8BtXGJoGfTooSgGzVlNd7sYFQUCeA\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498234422235\"
  }
}" (8a893fca)
2017-06-23T13:13:58.5028886-03:00 0HL5Q9TP0KMQN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5028886-03:00 0HL5Q9TP0KMQN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5033878-03:00 0HL5Q9TP0KMQN [INF] Request finished in 10.6339ms 302  (15c52c40)
2017-06-23T13:13:58.5098923-03:00 0HL5Q9TP0KMQO [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=08ee00558ce6629ebab0a87e771f61e4   (e5be5b71)
2017-06-23T13:13:58.5103927-03:00 0HL5Q9TP0KMQO [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:13:58.5103927-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5108935-03:00 0HL5Q9TP0KMQO [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["08ee00558ce6629ebab0a87e771f61e4"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:13:58.5113936-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5118936-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5118936-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5118936-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5123936-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5123936-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5128945-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-23T13:13:58.5128945-03:00 0HL5Q9TP0KMQO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:13:58.5128945-03:00 0HL5Q9TP0KMQO [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-23T13:13:58.5143966-03:00 0HL5Q9TP0KMQO [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 3.6602ms (afa2e885)
2017-06-23T13:13:58.5148958-03:00 0HL5Q9TP0KMQO [INF] Request finished in 5.1784ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:13:58.8163178-03:00 0HL5Q9TP0KMQP [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:13:58.8163178-03:00 0HL5Q9TP0KMQQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:13:58.8168162-03:00 0HL5Q9TP0KMQP [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:13:58.8168162-03:00 0HL5Q9TP0KMQQ [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:13:58.8173158-03:00 0HL5Q9TP0KMQP [INF] Request finished in 1.204ms 200 text/css (15c52c40)
2017-06-23T13:13:58.8173158-03:00 0HL5Q9TP0KMQQ [INF] Request finished in 1.1888ms 200 text/css (15c52c40)
2017-06-23T13:13:58.8178162-03:00 0HL5Q9TP0KMQR [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:13:58.8183175-03:00 0HL5Q9TP0KMQR [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:13:58.8293287-03:00 0HL5Q9TP0KMQS [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:13:58.8293287-03:00 0HL5Q9TP0KMQS [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:13:58.8313292-03:00 0HL5Q9TP0KMQR [INF] Request finished in 13.1607ms 200 text/css (15c52c40)
2017-06-23T13:13:58.8323301-03:00 0HL5Q9TP0KMQS [INF] Request finished in 4.1902ms 200 application/javascript (15c52c40)
2017-06-23T13:13:58.8363336-03:00 0HL5Q9TP0KMQT [INF] Request starting HTTP/1.1 GET http://localhost:4000/js/signout-redirect.js   (e5be5b71)
2017-06-23T13:13:58.8373337-03:00 0HL5Q9TP0KMQT [INF] Sending file. Request path: '"/js/signout-redirect.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\js\signout-redirect.js"' (27b0a520)
2017-06-23T13:13:58.8373337-03:00 0HL5Q9TP0KMQT [INF] Request finished in 1.7603ms 200 application/javascript (15c52c40)
2017-06-23T13:13:58.8383345-03:00 0HL5Q9TP0KMQU [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:13:58.8393354-03:00 0HL5Q9TP0KMQU [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:13:58.8413376-03:00 0HL5Q9TP0KMQV [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=f7e26fc5e0f591ffce5dce2c8e238a45&logoutId=08ee00558ce6629ebab0a87e771f61e4   (e5be5b71)
2017-06-23T13:13:58.8443385-03:00 0HL5Q9TP0KMQV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-23T13:13:58.8443385-03:00 0HL5Q9TP0KMQU [INF] Request finished in 6.0922ms 200 application/javascript (15c52c40)
2017-06-23T13:13:58.8523439-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:13:58.8553465-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:13:58.8593500-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:13:58.8613497-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:13:58.8633510-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:13:58.8653528-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:13:58.8693555-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:13:58.8723573-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:13:58.8793617-03:00 0HL5Q9TP0KMQV [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:13:58.8803626-03:00 0HL5Q9TP0KMQV [INF] Successful signout callback. Client logout iframe urls: "http://localhost:8080/#/loggedout/?&sid=f7e26fc5e0f591ffce5dce2c8e238a45&iss=http%3A%2F%2Flocalhost%3A4000" (76941251)
2017-06-23T13:13:58.8813631-03:00 0HL5Q9TP0KMQV [INF] Request finished in 40.6626ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-23T13:14:01.9141444-03:00 0HL5Q9TP0KMR0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234441503&nonce=xyz   (e5be5b71)
2017-06-23T13:14:01.9141444-03:00 0HL5Q9TP0KMR0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:14:01.9176507-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:14:01.9186516-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:14:01.9196512-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:14:01.9201517-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:14:01.9206521-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:14:01.9211521-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:14:01.9216526-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:14:01.9221526-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:14:01.9226534-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:14:01.9271561-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:14:01.9281570-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:14:01.9296579-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:14:01.9306584-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9311588-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9321622-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:14:01.9321622-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:14:01.9341635-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:14:01.9351644-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:14:01.9361648-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:14:01.9371661-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9371661-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9381662-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:14:01.9391670-03:00 0HL5Q9TP0KMR0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:14:01.9411696-03:00 0HL5Q9TP0KMR0 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234441503\",
  \"Nonce\": \"xyz\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234441503\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:14:01.9411696-03:00 0HL5Q9TP0KMR0 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T13:14:01.9411696-03:00 0HL5Q9TP0KMR0 [INF] Request finished in 28.1242ms 302  (15c52c40)
2017-06-23T13:14:01.9471728-03:00 0HL5Q9TP0KMR1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234441503%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:14:01.9481737-03:00 0HL5Q9TP0KMR1 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234441503&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:14:01.9501742-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:14:01.9511751-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:14:01.9521759-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:14:01.9521759-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:14:01.9531768-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:14:01.9531768-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:14:01.9541773-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:14:01.9551777-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:14:01.9551777-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:14:01.9591804-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:14:01.9591804-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:14:01.9621830-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:14:01.9631831-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9631831-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9641840-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:14:01.9651848-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:14:01.9671858-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:14:01.9671858-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:14:01.9691867-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:14:01.9691867-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9701884-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:01.9701884-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:14:01.9711889-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:14:01.9751936-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:14:01.9761924-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:14:01.9771925-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:14:01.9771925-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:14:01.9781929-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:14:01.9791938-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:14:01.9791938-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:14:01.9791938-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:14:01.9801943-03:00 0HL5Q9TP0KMR1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:14:01.9811955-03:00 0HL5Q9TP0KMR1 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:14:01.9821960-03:00 0HL5Q9TP0KMR1 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 34.3733ms (afa2e885)
2017-06-23T13:14:01.9821960-03:00 0HL5Q9TP0KMR1 [INF] Request finished in 35.3388ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:14:02.2597099-03:00 0HL5Q9TP0KMR2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:14:02.2597099-03:00 0HL5Q9TP0KMR2 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:14:02.2607112-03:00 0HL5Q9TP0KMR2 [INF] Request finished in 1.1408ms 200 text/css (15c52c40)
2017-06-23T13:14:02.3975062-03:00 0HL5Q9TP0KMR3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:14:02.3975062-03:00 0HL5Q9TP0KMR3 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:14:02.3985050-03:00 0HL5Q9TP0KMR3 [INF] Request finished in 1.0419ms 200 text/css (15c52c40)
2017-06-23T13:14:02.9212441-03:00 0HL5Q9TP0KMR4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:14:02.9212441-03:00 0HL5Q9TP0KMR5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:14:02.9217433-03:00 0HL5Q9TP0KMR6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:14:02.9217433-03:00 0HL5Q9TP0KMR5 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:14:02.9217433-03:00 0HL5Q9TP0KMR6 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:14:02.9222433-03:00 0HL5Q9TP0KMR4 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:14:02.9227442-03:00 0HL5Q9TP0KMR5 [INF] Request finished in 1.7221ms 200 application/javascript (15c52c40)
2017-06-23T13:14:02.9237446-03:00 0HL5Q9TP0KMR4 [INF] Request finished in 2.2677ms 200 text/css (15c52c40)
2017-06-23T13:14:02.9242451-03:00 0HL5Q9TP0KMR6 [INF] Request finished in 2.8708ms 200 application/javascript (15c52c40)
2017-06-23T13:14:03.1723666-03:00 0HL5Q9TP0KMR7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T13:14:03.1723666-03:00 0HL5Q9TP0KMR7 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T13:14:03.1733662-03:00 0HL5Q9TP0KMR7 [INF] Request finished in 1.3551ms 200 application/font-woff2 (15c52c40)
2017-06-23T13:14:03.4915801-03:00 0HL5Q9TP0KMR8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T13:14:03.4925810-03:00 0HL5Q9TP0KMR8 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T13:14:03.4935823-03:00 0HL5Q9TP0KMR8 [INF] Request finished in 1.3169ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:14:20.1880575-03:00 0HL5Q9TP0KMR9 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234441503%26nonce%3Dxyz application/x-www-form-urlencoded 492 (e5be5b71)
2017-06-23T13:14:20.1890641-03:00 0HL5Q9TP0KMR9 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:14:20.1915655-03:00 0HL5Q9TP0KMR9 [INF] Executed DbCommand (0ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-23T13:14:20.1920643-03:00 0HL5Q9TP0KMR9 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:14:20.1925651-03:00 0HL5Q9TP0KMR9 [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234441503&nonce=xyz". (d98d540e)
2017-06-23T13:14:20.1925651-03:00 0HL5Q9TP0KMR9 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 4.0778ms (afa2e885)
2017-06-23T13:14:20.1930651-03:00 0HL5Q9TP0KMR9 [INF] Request finished in 5.0967ms 302  (15c52c40)
2017-06-23T13:14:20.1990696-03:00 0HL5Q9TP0KMRA [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234441503&nonce=xyz   (e5be5b71)
2017-06-23T13:14:20.2000700-03:00 0HL5Q9TP0KMRA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:14:20.2000700-03:00 0HL5Q9TP0KMRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:14:20.2005713-03:00 0HL5Q9TP0KMRA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-23T13:14:20.2005713-03:00 0HL5Q9TP0KMRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:14:20.2025718-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:14:20.2035719-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:14:20.2035719-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:14:20.2035719-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:14:20.2050149-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:14:20.2050149-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:14:20.2080187-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:14:20.2080187-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:14:20.2090184-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:14:20.2110213-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:14:20.2120193-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:14:20.2140227-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:14:20.2150216-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:20.2150216-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:20.2160245-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:14:20.2170233-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:14:20.2180234-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:14:20.2180234-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:14:20.2200247-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:14:20.2200247-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:20.2210256-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:14:20.2210256-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:14:20.2220260-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:14:20.2220260-03:00 0HL5Q9TP0KMRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:14:20.2230269-03:00 0HL5Q9TP0KMRA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234441503\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"6e2762b6fb69b640930b3c2e25ce6004\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234441503\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:14:20.2240311-03:00 0HL5Q9TP0KMRA [INF] Executed DbCommand (0ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:14:20.2370350-03:00 0HL5Q9TP0KMRA [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498234441503\",
  \"Scope\": \"openid calemas\"
}" (5993a9fa)
2017-06-23T13:14:20.2370350-03:00 0HL5Q9TP0KMRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:14:20.2370350-03:00 0HL5Q9TP0KMRA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:14:20.2380363-03:00 0HL5Q9TP0KMRA [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:14:20.2380363-03:00 0HL5Q9TP0KMRA [INF] Request finished in 39.1785ms 302  (15c52c40)
2017-06-23T13:14:23.7040938-03:00 0HL5Q9TP0KMRB [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:14:23.7040938-03:00 0HL5Q9TP0KMRB [INF] Request finished in 0.4006ms 204  (15c52c40)
2017-06-23T13:14:24.1674283-03:00 0HL5Q9TP0KMRC [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:14:24.1674283-03:00 0HL5Q9TP0KMRC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:14:24.1684288-03:00 0HL5Q9TP0KMRC [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:14:24.1694313-03:00 0HL5Q9TP0KMRC [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '036b449a13b315bf92720d75663d067c', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"036b449a13b315bf92720d75663d067c\"}.{\"nbf\":1498232089,\"exp\":1498235689,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498230979,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:14:24.1694313-03:00 0HL5Q9TP0KMRC [ERR] invalid_token (489b3335)
2017-06-23T13:14:24.1694313-03:00 0HL5Q9TP0KMRC [INF] Request finished in 2.6035ms 401  (15c52c40)
2017-06-23T13:14:52.5945942-03:00 0HL5Q9TP0KMRD [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:14:52.5945942-03:00 0HL5Q9TP0KMRD [INF] Request finished in 0.5119ms 204  (15c52c40)
2017-06-23T13:14:52.9066058-03:00 0HL5Q9TP0KMRE [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:14:52.9076059-03:00 0HL5Q9TP0KMRE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:14:52.9076059-03:00 0HL5Q9TP0KMRE [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:14:52.9106089-03:00 0HL5Q9TP0KMRE [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '036b449a13b315bf92720d75663d067c', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"036b449a13b315bf92720d75663d067c\"}.{\"nbf\":1498232089,\"exp\":1498235689,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498230979,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:14:52.9106089-03:00 0HL5Q9TP0KMRE [ERR] invalid_token (489b3335)
2017-06-23T13:14:52.9106089-03:00 0HL5Q9TP0KMRE [INF] Request finished in 4.492ms 401  (15c52c40)
2017-06-23T13:15:01.0862495-03:00 0HL5Q9TP0KMRF [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:15:01.0872496-03:00 0HL5Q9TP0KMRF [INF] Request finished in 0.4581ms 204  (15c52c40)
2017-06-23T13:15:01.4030824-03:00 0HL5Q9TP0KMRG [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:15:01.4030824-03:00 0HL5Q9TP0KMRG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:15:01.4030824-03:00 0HL5Q9TP0KMRG [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:15:01.4070855-03:00 0HL5Q9TP0KMRG [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:15:01.4080868-03:00 0HL5Q9TP0KMRG [ERR] invalid_token (489b3335)
2017-06-23T13:15:01.4090868-03:00 0HL5Q9TP0KMRG [INF] Request finished in 6.3381ms 401  (15c52c40)
2017-06-23T13:15:18.2835001-03:00 0HL5Q9TP0KMRH [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:15:18.2835001-03:00 0HL5Q9TP0KMRH [INF] Request finished in 0.456ms 204  (15c52c40)
2017-06-23T13:15:18.6347486-03:00 0HL5Q9TP0KMRI [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:15:18.6357499-03:00 0HL5Q9TP0KMRI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:15:18.6357499-03:00 0HL5Q9TP0KMRI [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:15:18.6377525-03:00 0HL5Q9TP0KMRI [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:15:18.6377525-03:00 0HL5Q9TP0KMRI [ERR] invalid_token (489b3335)
2017-06-23T13:15:18.6377525-03:00 0HL5Q9TP0KMRI [INF] Request finished in 3.1442ms 401  (15c52c40)
2017-06-23T13:16:03.9302019-03:00 0HL5Q9TP0KMRJ [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:16:03.9307023-03:00 0HL5Q9TP0KMRJ [INF] Request finished in 0.4491ms 204  (15c52c40)
2017-06-23T13:16:04.5461278-03:00 0HL5Q9TP0KMRK [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:16:04.5466286-03:00 0HL5Q9TP0KMRK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:16:04.5471290-03:00 0HL5Q9TP0KMRK [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:16:04.5496300-03:00 0HL5Q9TP0KMRK [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:16:04.5496300-03:00 0HL5Q9TP0KMRK [ERR] invalid_token (489b3335)
2017-06-23T13:16:04.5501300-03:00 0HL5Q9TP0KMRK [INF] Request finished in 3.9632ms 401  (15c52c40)
2017-06-23T13:16:35.0530811-03:00 0HL5Q9TP0KMRL [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:16:35.0535816-03:00 0HL5Q9TP0KMRL [INF] Request finished in 0.7135ms 204  (15c52c40)
2017-06-23T13:16:35.5550116-03:00 0HL5Q9TP0KMRM [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:16:35.5550116-03:00 0HL5Q9TP0KMRM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:16:35.5560133-03:00 0HL5Q9TP0KMRM [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:16:35.5580143-03:00 0HL5Q9TP0KMRM [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:16:35.5580143-03:00 0HL5Q9TP0KMRM [ERR] invalid_token (489b3335)
2017-06-23T13:16:35.5580143-03:00 0HL5Q9TP0KMRM [INF] Request finished in 3.6787ms 401  (15c52c40)
2017-06-23T13:16:36.5654962-03:00 0HL5Q9TP0KMRN [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ0NjAsImV4cCI6MTQ5ODIzNDc2MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NDYwLCJhdF9oYXNoIjoieklKQ2VlcWwxTU04elBxMUhlNzAxZyIsInNpZCI6IjZlMjc2MmI2ZmI2OWI2NDA5MzBiM2MyZTI1Y2U2MDA0Iiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDQ2MCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.TLt6jxEqtvf4EIOHCyqTtA8lM-0GLeCw71NSypSugqOstT0lCYP80rdNAAOUk8CAVr8w0W4q74s-Exj75E6bMFCq9aox8T0VKAeQ1hTqVdnHIitEdDdbHc_9j8xV35mxb3b_69zsD1vCfoz1Sg_KKNsqhRkTI84-Utsz3oxJj2istjPa6BpzRRPFr9FXo31Y345CY-cWkfAjaanm2XI6mFKOQdWROLgYv5uK6xKdVDf17GkY699gpudZI1JzQN0sjazgwHTw-sSe7hGcvOowDnRjES6iF8_JxyCu5m4vZa7a7tORaEzXcxL4EkWjBTJmuUye1_kplbqArgwQxyrfGw&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498234441503   (e5be5b71)
2017-06-23T13:16:36.5664962-03:00 0HL5Q9TP0KMRN [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:16:36.5664962-03:00 0HL5Q9TP0KMRN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.5664962-03:00 0HL5Q9TP0KMRN [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T13:16:36.5664962-03:00 0HL5Q9TP0KMRN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.5704985-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:16:36.5755021-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:16:36.5785039-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:16:36.5815061-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:16:36.5835074-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:16:36.5865092-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:16:36.5895143-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:16:36.5945170-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:16:36.5985185-03:00 0HL5Q9TP0KMRN [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:16:36.5995185-03:00 0HL5Q9TP0KMRN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6005186-03:00 0HL5Q9TP0KMRN [INF] End session request validation success
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"SubjectId\": \"1\",
  \"PostLogOutUri\": \"http://localhost:8080/#/loggedout/?\",
  \"State\": \"1498234441503\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ0NjAsImV4cCI6MTQ5ODIzNDc2MCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NDYwLCJhdF9oYXNoIjoieklKQ2VlcWwxTU04elBxMUhlNzAxZyIsInNpZCI6IjZlMjc2MmI2ZmI2OWI2NDA5MzBiM2MyZTI1Y2U2MDA0Iiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDQ2MCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.TLt6jxEqtvf4EIOHCyqTtA8lM-0GLeCw71NSypSugqOstT0lCYP80rdNAAOUk8CAVr8w0W4q74s-Exj75E6bMFCq9aox8T0VKAeQ1hTqVdnHIitEdDdbHc_9j8xV35mxb3b_69zsD1vCfoz1Sg_KKNsqhRkTI84-Utsz3oxJj2istjPa6BpzRRPFr9FXo31Y345CY-cWkfAjaanm2XI6mFKOQdWROLgYv5uK6xKdVDf17GkY699gpudZI1JzQN0sjazgwHTw-sSe7hGcvOowDnRjES6iF8_JxyCu5m4vZa7a7tORaEzXcxL4EkWjBTJmuUye1_kplbqArgwQxyrfGw\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498234441503\"
  }
}" (8a893fca)
2017-06-23T13:16:36.6005186-03:00 0HL5Q9TP0KMRN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6005186-03:00 0HL5Q9TP0KMRN [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6015190-03:00 0HL5Q9TP0KMRN [INF] Request finished in 35.5187ms 302  (15c52c40)
2017-06-23T13:16:36.6095256-03:00 0HL5Q9TP0KMRO [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=41e9e623ca16bf23d66487975a8025b1   (e5be5b71)
2017-06-23T13:16:36.6095256-03:00 0HL5Q9TP0KMRO [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:16:36.6095256-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6105257-03:00 0HL5Q9TP0KMRO [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["41e9e623ca16bf23d66487975a8025b1"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:16:36.6105257-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6115261-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6115261-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6115261-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6115261-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6115261-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6125262-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-23T13:16:36.6125262-03:00 0HL5Q9TP0KMRO [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:36.6125262-03:00 0HL5Q9TP0KMRO [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-23T13:16:36.6125262-03:00 0HL5Q9TP0KMRO [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 2.5703ms (afa2e885)
2017-06-23T13:16:36.6135271-03:00 0HL5Q9TP0KMRO [INF] Request finished in 3.8335ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:16:36.8850168-03:00 0HL5Q9TP0KMRP [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:16:36.8860181-03:00 0HL5Q9TP0KMRP [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:16:36.8870190-03:00 0HL5Q9TP0KMRP [INF] Request finished in 1.5407ms 200 text/css (15c52c40)
2017-06-23T13:16:36.8920213-03:00 0HL5Q9TP0KMRQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:16:36.8920213-03:00 0HL5Q9TP0KMRR [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:16:36.8930230-03:00 0HL5Q9TP0KMRR [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:16:36.8930230-03:00 0HL5Q9TP0KMRQ [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:16:36.8940234-03:00 0HL5Q9TP0KMRQ [INF] Request finished in 3.6487ms 200 text/css (15c52c40)
2017-06-23T13:16:36.9040293-03:00 0HL5Q9TP0KMRS [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=6e2762b6fb69b640930b3c2e25ce6004&logoutId=41e9e623ca16bf23d66487975a8025b1   (e5be5b71)
2017-06-23T13:16:36.9040293-03:00 0HL5Q9TP0KMRT [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:16:36.9060306-03:00 0HL5Q9TP0KMRT [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:16:36.9080328-03:00 0HL5Q9TP0KMRR [INF] Request finished in 15.4347ms 200 text/css (15c52c40)
2017-06-23T13:16:36.9090333-03:00 0HL5Q9TP0KMRS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-23T13:16:36.9090333-03:00 0HL5Q9TP0KMRU [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:16:36.9100341-03:00 0HL5Q9TP0KMRU [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:16:36.9100341-03:00 0HL5Q9TP0KMRV [INF] Request starting HTTP/1.1 GET http://localhost:4000/js/signout-redirect.js   (e5be5b71)
2017-06-23T13:16:36.9100341-03:00 0HL5Q9TP0KMRT [INF] Request finished in 6.02ms 200 application/javascript (15c52c40)
2017-06-23T13:16:36.9100341-03:00 0HL5Q9TP0KMRV [INF] Sending file. Request path: '"/js/signout-redirect.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\js\signout-redirect.js"' (27b0a520)
2017-06-23T13:16:36.9110342-03:00 0HL5Q9TP0KMRV [INF] Request finished in 0.9934ms 200 application/javascript (15c52c40)
2017-06-23T13:16:36.9120351-03:00 0HL5Q9TP0KMRU [INF] Request finished in 16.8637ms 200 application/javascript (15c52c40)
2017-06-23T13:16:36.9140356-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:16:36.9210413-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:16:36.9260489-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:16:36.9325530-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:16:36.9350544-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:16:36.9375561-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:16:36.9530705-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (15ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:16:36.9570732-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:16:36.9610758-03:00 0HL5Q9TP0KMRS [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:16:36.9620767-03:00 0HL5Q9TP0KMRS [INF] Successful signout callback. Client logout iframe urls: "http://localhost:8080/#/loggedout/?&sid=6e2762b6fb69b640930b3c2e25ce6004&iss=http%3A%2F%2Flocalhost%3A4000" (76941251)
2017-06-23T13:16:36.9620767-03:00 0HL5Q9TP0KMRS [INF] Request finished in 59.8693ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-23T13:16:41.9492628-03:00 0HL5Q9TP0KMS0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234599468&nonce=xyz   (e5be5b71)
2017-06-23T13:16:41.9492628-03:00 0HL5Q9TP0KMS0 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:16:41.9522749-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:16:41.9532647-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:16:41.9542660-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:16:41.9582711-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:16:41.9602704-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:16:41.9612700-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:16:41.9612700-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:16:41.9622713-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:16:41.9642722-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:16:41.9682749-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:16:41.9742810-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:16:41.9832864-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:16:42.0143139-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.0323226-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.0528418-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:16:42.0978713-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:16:42.0988730-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:16:42.0998738-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:16:42.1008739-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:16:42.1008739-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.1018739-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.1018739-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:16:42.1028744-03:00 0HL5Q9TP0KMS0 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:16:42.1038753-03:00 0HL5Q9TP0KMS0 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234599468\",
  \"Nonce\": \"xyz\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234599468\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:16:42.1038753-03:00 0HL5Q9TP0KMS0 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T13:16:42.1038753-03:00 0HL5Q9TP0KMS0 [INF] Request finished in 155.534ms 302  (15c52c40)
2017-06-23T13:16:42.1108806-03:00 0HL5Q9TP0KMS1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234599468%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:16:42.1118814-03:00 0HL5Q9TP0KMS1 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234599468&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:16:42.1138836-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:16:42.1138836-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:16:42.1148837-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:16:42.1148837-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:16:42.1158841-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:16:42.1158841-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:16:42.1168842-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:16:42.1168842-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:16:42.1168842-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:16:42.1188867-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:16:42.1198856-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:16:42.1208864-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:16:42.1218906-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.1228890-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.1248908-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:16:42.1258920-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:16:42.1278954-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:16:42.1283959-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:16:42.1298968-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:16:42.1303968-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.1308972-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:42.1313977-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:16:42.1318981-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:16:42.1339011-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:16:42.1349011-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:16:42.1354008-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:16:42.1354008-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:16:42.1359012-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:16:42.1364016-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:16:42.1369012-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:16:42.1374017-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:16:42.1379021-03:00 0HL5Q9TP0KMS1 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:16:42.1389050-03:00 0HL5Q9TP0KMS1 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:16:42.1414044-03:00 0HL5Q9TP0KMS1 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 29.855ms (afa2e885)
2017-06-23T13:16:42.1414044-03:00 0HL5Q9TP0KMS1 [INF] Request finished in 30.8784ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:16:42.3044343-03:00 0HL5Q9TP0KMS2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:16:42.3044343-03:00 0HL5Q9TP0KMS2 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:16:42.3054352-03:00 0HL5Q9TP0KMS2 [INF] Request finished in 0.9302ms 200 text/css (15c52c40)
2017-06-23T13:16:42.4453264-03:00 0HL5Q9TP0KMS3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:16:42.4453264-03:00 0HL5Q9TP0KMS4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:16:42.4453264-03:00 0HL5Q9TP0KMS4 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:16:42.4453264-03:00 0HL5Q9TP0KMS3 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:16:42.4463273-03:00 0HL5Q9TP0KMS5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:16:42.4463273-03:00 0HL5Q9TP0KMS4 [INF] Request finished in 0.9446ms 200 text/css (15c52c40)
2017-06-23T13:16:42.4463273-03:00 0HL5Q9TP0KMS5 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:16:42.4463273-03:00 0HL5Q9TP0KMS6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:16:42.4473282-03:00 0HL5Q9TP0KMS5 [INF] Request finished in 1.6618ms 200 application/javascript (15c52c40)
2017-06-23T13:16:42.4483291-03:00 0HL5Q9TP0KMS6 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:16:42.4483291-03:00 0HL5Q9TP0KMS3 [INF] Request finished in 3.4595ms 200 text/css (15c52c40)
2017-06-23T13:16:42.4543331-03:00 0HL5Q9TP0KMS6 [INF] Request finished in 6.7335ms 200 application/javascript (15c52c40)
2017-06-23T13:16:42.6597582-03:00 0HL5Q9TP0KMS7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T13:16:42.6597582-03:00 0HL5Q9TP0KMS7 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T13:16:42.6607574-03:00 0HL5Q9TP0KMS7 [INF] Request finished in 0.9782ms 200 application/font-woff2 (15c52c40)
2017-06-23T13:16:42.9775242-03:00 0HL5Q9TP0KMS8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T13:16:42.9785242-03:00 0HL5Q9TP0KMS8 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T13:16:42.9785242-03:00 0HL5Q9TP0KMS8 [INF] Request finished in 1.6704ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:16:48.1611398-03:00 0HL5Q9TP0KMS9 [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234599468%26nonce%3Dxyz application/x-www-form-urlencoded 492 (e5be5b71)
2017-06-23T13:16:48.1621403-03:00 0HL5Q9TP0KMS9 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:16:48.1651421-03:00 0HL5Q9TP0KMS9 [INF] Executed DbCommand (1ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-23T13:16:48.1651421-03:00 0HL5Q9TP0KMS9 [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:16:48.1651421-03:00 0HL5Q9TP0KMS9 [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234599468&nonce=xyz". (d98d540e)
2017-06-23T13:16:48.1661425-03:00 0HL5Q9TP0KMS9 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 4.2563ms (afa2e885)
2017-06-23T13:16:48.1661425-03:00 0HL5Q9TP0KMS9 [INF] Request finished in 5.1718ms 302  (15c52c40)
2017-06-23T13:16:48.1711469-03:00 0HL5Q9TP0KMSA [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234599468&nonce=xyz   (e5be5b71)
2017-06-23T13:16:48.1711469-03:00 0HL5Q9TP0KMSA [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:16:48.1711469-03:00 0HL5Q9TP0KMSA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:48.1721474-03:00 0HL5Q9TP0KMSA [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-23T13:16:48.1721474-03:00 0HL5Q9TP0KMSA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:48.1771501-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:16:48.1801552-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:16:48.1831541-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:16:48.1861555-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:16:48.1891589-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:16:48.1921624-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:16:48.1951617-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:16:48.1981643-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:16:48.2001653-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:16:48.2031675-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:16:48.2071726-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:16:48.2131742-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:16:48.2301862-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:48.2482027-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:48.2683347-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:16:48.3033583-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (34ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:16:48.3053601-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:16:48.3063642-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:16:48.3093632-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:16:48.3103640-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:48.3103640-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:16:48.3113645-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:16:48.3123687-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:16:48.3133658-03:00 0HL5Q9TP0KMSA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:48.3133658-03:00 0HL5Q9TP0KMSA [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234599468\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"011b9c8f38b36e5adba3eaee7a449cab\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234599468\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:16:48.3153668-03:00 0HL5Q9TP0KMSA [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:16:48.3313775-03:00 0HL5Q9TP0KMSA [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498234599468\",
  \"Scope\": \"openid calemas\"
}" (5993a9fa)
2017-06-23T13:16:48.3313775-03:00 0HL5Q9TP0KMSA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:48.3313775-03:00 0HL5Q9TP0KMSA [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:16:48.3323783-03:00 0HL5Q9TP0KMSA [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:16:48.3323783-03:00 0HL5Q9TP0KMSA [INF] Request finished in 161.5032ms 302  (15c52c40)
2017-06-23T13:16:51.7832208-03:00 0HL5Q9TP0KMSB [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:16:51.7832208-03:00 0HL5Q9TP0KMSB [INF] Request finished in 0.3867ms 204  (15c52c40)
2017-06-23T13:16:51.9613628-03:00 0HL5Q9TP0KMSC [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?scope=openid%20calemas   (e5be5b71)
2017-06-23T13:16:51.9623633-03:00 0HL5Q9TP0KMSC [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:16:51.9623633-03:00 0HL5Q9TP0KMSC [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:16:51.9643646-03:00 0HL5Q9TP0KMSC [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:16:51.9643646-03:00 0HL5Q9TP0KMSC [ERR] invalid_token (489b3335)
2017-06-23T13:16:51.9653659-03:00 0HL5Q9TP0KMSC [INF] Request finished in 3.6311ms 401  (15c52c40)
2017-06-23T13:17:48.4315203-03:00 0HL5Q9TP0KMSD [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:17:48.4325203-03:00 0HL5Q9TP0KMSD [INF] Request finished in 1.661ms 204  (15c52c40)
2017-06-23T13:17:48.8608337-03:00 0HL5Q9TP0KMSE [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:17:48.8618345-03:00 0HL5Q9TP0KMSE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:17:48.8618345-03:00 0HL5Q9TP0KMSE [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:17:48.8638355-03:00 0HL5Q9TP0KMSE [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:17:48.8638355-03:00 0HL5Q9TP0KMSE [ERR] invalid_token (489b3335)
2017-06-23T13:17:48.8638355-03:00 0HL5Q9TP0KMSE [INF] Request finished in 2.863ms 401  (15c52c40)
2017-06-23T13:18:04.6981342-03:00 0HL5Q9TP0KMSF [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:04.6991350-03:00 0HL5Q9TP0KMSF [INF] Request finished in 0.5517ms 204  (15c52c40)
2017-06-23T13:18:04.8747630-03:00 0HL5Q9TP0KMSG [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:04.8757622-03:00 0HL5Q9TP0KMSG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:18:04.8757622-03:00 0HL5Q9TP0KMSG [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:18:04.8787661-03:00 0HL5Q9TP0KMSG [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10214: Audience validation failed. Audiences: 'ssocalemas'. Did not match: validationParameters.ValidAudience: 'http://localhost:4000/resources' or validationParameters.ValidAudiences: 'null'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateTokenPayload(JwtSecurityToken jwt, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:18:04.8787661-03:00 0HL5Q9TP0KMSG [ERR] invalid_token (489b3335)
2017-06-23T13:18:04.8797649-03:00 0HL5Q9TP0KMSG [INF] Request finished in 4.6529ms 401  (15c52c40)
2017-06-23T13:18:16.2999871-03:00 0HL5Q9TP0KMSH [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:16.2999871-03:00 0HL5Q9TP0KMSH [INF] Request finished in 0.4712ms 204  (15c52c40)
2017-06-23T13:18:16.6127721-03:00 0HL5Q9TP0KMSI [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:16.6132734-03:00 0HL5Q9TP0KMSI [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:18:16.6137734-03:00 0HL5Q9TP0KMSI [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:18:16.6197770-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:18:16.6262859-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:18:16.6292882-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:18:16.6312895-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:18:16.6342909-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:18:16.6362935-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:18:16.6412978-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:18:16.6452997-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:18:16.6483007-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:18:16.6593078-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:18:16.6593078-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:18:16.6603083-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:18:16.6603083-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:18:16.6613091-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:18:16.6613091-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:18:16.6613091-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:18:16.6623100-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:18:16.6623100-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:18:16.6783207-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:18:16.6823242-03:00 0HL5Q9TP0KMSI [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:18:16.6863261-03:00 0HL5Q9TP0KMSI [INF] Profile service returned to the following claim types: "sub" (a9217bec)
2017-06-23T13:18:16.6943310-03:00 0HL5Q9TP0KMSI [INF] Request finished in 82.2309ms 200 application/json (15c52c40)
2017-06-23T13:18:39.4443580-03:00 0HL5Q9TP0KMSJ [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:39.4453589-03:00 0HL5Q9TP0KMSJ [INF] Request finished in 0.4409ms 204  (15c52c40)
2017-06-23T13:18:39.7565880-03:00 0HL5Q9TP0KMSK [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:39.7575885-03:00 0HL5Q9TP0KMSK [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:18:39.7575885-03:00 0HL5Q9TP0KMSK [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:18:39.7575885-03:00 0HL5Q9TP0KMSK [ERR] No access token found. (42a1926b)
2017-06-23T13:18:39.7585889-03:00 0HL5Q9TP0KMSK [INF] Request finished in 1.2894ms 401  (15c52c40)
2017-06-23T13:18:42.3639030-03:00 0HL5Q9TP0KMSL [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:42.3644030-03:00 0HL5Q9TP0KMSL [INF] Request finished in 0.4138ms 204  (15c52c40)
2017-06-23T13:18:42.7927131-03:00 0HL5Q9TP0KMSM [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:42.7927131-03:00 0HL5Q9TP0KMSM [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:18:42.7927131-03:00 0HL5Q9TP0KMSM [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:18:42.7947144-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:18:42.7997180-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:18:42.7997180-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:18:42.8007188-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:18:42.8007188-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:18:42.8017193-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:18:42.8017193-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:18:42.8017193-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:18:42.8027198-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:18:42.8047231-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:18:42.8057228-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:18:42.8067228-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:18:42.8077229-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:18:42.8087234-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:18:42.8087234-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:18:42.8087234-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:18:42.8097246-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:18:42.8097246-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:18:42.8117252-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:18:42.8117252-03:00 0HL5Q9TP0KMSM [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:18:42.8117252-03:00 0HL5Q9TP0KMSM [INF] Profile service returned to the following claim types: "sub" (a9217bec)
2017-06-23T13:18:42.8127256-03:00 0HL5Q9TP0KMSM [INF] Request finished in 20.1968ms 200 application/json (15c52c40)
2017-06-23T13:18:49.4761922-03:00 0HL5Q9TP0KMSN [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:49.4761922-03:00 0HL5Q9TP0KMSN [INF] Request finished in 0.5698ms 204  (15c52c40)
2017-06-23T13:18:49.8279485-03:00 0HL5Q9TP0KMSO [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:18:49.8279485-03:00 0HL5Q9TP0KMSO [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:18:49.8279485-03:00 0HL5Q9TP0KMSO [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:18:49.8299499-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:18:49.8309503-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:18:49.8309503-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:18:49.8319504-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:18:49.8319504-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:18:49.8329504-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:18:49.8329504-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:18:49.8329504-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:18:49.8339513-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:18:49.8349526-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:18:49.8359530-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:18:49.8359530-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:18:49.8369539-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:18:49.8369539-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:18:49.8389553-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:18:49.8399561-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:18:49.8399561-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:18:49.8409566-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:18:49.8429583-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:18:49.8439588-03:00 0HL5Q9TP0KMSO [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:18:49.8449593-03:00 0HL5Q9TP0KMSO [INF] Profile service returned to the following claim types: "sub" (a9217bec)
2017-06-23T13:18:49.8449593-03:00 0HL5Q9TP0KMSO [INF] Request finished in 17.4089ms 200 application/json (15c52c40)
2017-06-23T13:19:18.5990222-03:00 0HL5Q9TP0KMSP [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession?id_token_hint=eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ2MDgsImV4cCI6MTQ5ODIzNDkwOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NjA4LCJhdF9oYXNoIjoiU1dCSDFwVGxLREdOQ2VVR2Yzbnh3ZyIsInNpZCI6IjAxMWI5YzhmMzhiMzZlNWFkYmEzZWFlZTdhNDQ5Y2FiIiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDYwOCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.fC59ybx_Ar7h06G2QPi7p5jPG9--oILtDlFcoCwpqepe8AaSg0I8lLrvst5kzs3eGVDZvn8tHXOVfRsqDaJg7QooXrna_EiXFy2IDm6S0OyXWUeelK8eCyEMyxFdNydfJyvof4c9krA-Wndk3epEUsP_zy2ltcVhNZ738HnJL5gtZNWGZUSlG1CrCWVDvm-o5F_ZbxkVChat_1z3PhykMcUYwEkaVKarCITO--Zg28cWoORtQcuWm_qOA4tIc8L2-o9uLcOXuvlX3AK2AYhTk-9cv5gcfS0_UJbcoYd9xHJCyErgOh6F9pkIA39BR1C6VZbtM3wl_8HxVFhtJLhSyg&post_logout_redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Floggedout%2F%3F&state=1498234599468   (e5be5b71)
2017-06-23T13:19:18.5995214-03:00 0HL5Q9TP0KMSP [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:19:18.5995214-03:00 0HL5Q9TP0KMSP [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6000218-03:00 0HL5Q9TP0KMSP [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession" (f7642de5)
2017-06-23T13:19:18.6000218-03:00 0HL5Q9TP0KMSP [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6055283-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (3ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:18.6085288-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:18.6116411-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:18.6146437-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:18.6166442-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:18.6196468-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:18.6246504-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:18.6276530-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:18.6296548-03:00 0HL5Q9TP0KMSP [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:18.6316598-03:00 0HL5Q9TP0KMSP [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6316598-03:00 0HL5Q9TP0KMSP [INF] End session request validation success
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"SubjectId\": \"1\",
  \"PostLogOutUri\": \"http://localhost:8080/#/loggedout/?\",
  \"State\": \"1498234599468\",
  \"Raw\": {
    \"id_token_hint\": \"eyJhbGciOiJSUzI1NiIsImtpZCI6IjlkZTNlN2FjMTc4MDNkYzNlY2E3NjI5NTE3ZTQyNGFkIiwidHlwIjoiSldUIn0.eyJuYmYiOjE0OTgyMzQ2MDgsImV4cCI6MTQ5ODIzNDkwOCwiaXNzIjoiaHR0cDovL2xvY2FsaG9zdDo0MDAwIiwiYXVkIjoic3NvY2FsZW1hcyIsIm5vbmNlIjoieHl6IiwiaWF0IjoxNDk4MjM0NjA4LCJhdF9oYXNoIjoiU1dCSDFwVGxLREdOQ2VVR2Yzbnh3ZyIsInNpZCI6IjAxMWI5YzhmMzhiMzZlNWFkYmEzZWFlZTdhNDQ5Y2FiIiwic3ViIjoiMSIsImF1dGhfdGltZSI6MTQ5ODIzNDYwOCwiaWRwIjoibG9jYWwiLCJhbXIiOlsicHdkIl19.fC59ybx_Ar7h06G2QPi7p5jPG9--oILtDlFcoCwpqepe8AaSg0I8lLrvst5kzs3eGVDZvn8tHXOVfRsqDaJg7QooXrna_EiXFy2IDm6S0OyXWUeelK8eCyEMyxFdNydfJyvof4c9krA-Wndk3epEUsP_zy2ltcVhNZ738HnJL5gtZNWGZUSlG1CrCWVDvm-o5F_ZbxkVChat_1z3PhykMcUYwEkaVKarCITO--Zg28cWoORtQcuWm_qOA4tIc8L2-o9uLcOXuvlX3AK2AYhTk-9cv5gcfS0_UJbcoYd9xHJCyErgOh6F9pkIA39BR1C6VZbtM3wl_8HxVFhtJLhSyg\",
    \"post_logout_redirect_uri\": \"http://localhost:8080/#/loggedout/?\",
    \"state\": \"1498234599468\"
  }
}" (8a893fca)
2017-06-23T13:19:18.6316598-03:00 0HL5Q9TP0KMSP [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6326545-03:00 0HL5Q9TP0KMSP [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6326545-03:00 0HL5Q9TP0KMSP [INF] Request finished in 33.8092ms 302  (15c52c40)
2017-06-23T13:19:18.6396602-03:00 0HL5Q9TP0KMSQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/logout?logoutId=2bd9c4210868651e5d1e86da735ec31b   (e5be5b71)
2017-06-23T13:19:18.6406619-03:00 0HL5Q9TP0KMSQ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:19:18.6416611-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6416611-03:00 0HL5Q9TP0KMSQ [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" with arguments (["2bd9c4210868651e5d1e86da735ec31b"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:19:18.6426616-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6426616-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6426616-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6436625-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6436625-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6436625-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6436625-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" signed out. (d3f50c8d)
2017-06-23T13:19:18.6436625-03:00 0HL5Q9TP0KMSQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:18.6446629-03:00 0HL5Q9TP0KMSQ [INF] Executing ViewResult, running view at path "/Views/Account/LoggedOut.cshtml". (9707eebe)
2017-06-23T13:19:18.6446629-03:00 0HL5Q9TP0KMSQ [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Logout (Calemas.Erp.Sso.Api)" in 3.0995ms (afa2e885)
2017-06-23T13:19:18.6456638-03:00 0HL5Q9TP0KMSQ [INF] Request finished in 5.5528ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:19:18.8198377-03:00 0HL5Q9TP0KMSR [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:19:18.8208385-03:00 0HL5Q9TP0KMSR [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:19:18.8248424-03:00 0HL5Q9TP0KMSR [INF] Request finished in 5.1751ms 200 text/css (15c52c40)
2017-06-23T13:19:18.9624396-03:00 0HL5Q9TP0KMSS [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:19:18.9624396-03:00 0HL5Q9TP0KMSS [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:19:18.9634397-03:00 0HL5Q9TP0KMSS [INF] Request finished in 1.8691ms 200 text/css (15c52c40)
2017-06-23T13:19:18.9654410-03:00 0HL5Q9TP0KMST [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:19:18.9664419-03:00 0HL5Q9TP0KMST [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:19:18.9734468-03:00 0HL5Q9TP0KMSU [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:19:18.9744472-03:00 0HL5Q9TP0KMSV [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/endsession/callback?sid=011b9c8f38b36e5adba3eaee7a449cab&logoutId=2bd9c4210868651e5d1e86da735ec31b   (e5be5b71)
2017-06-23T13:19:18.9744472-03:00 0HL5Q9TP0KMSV [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.EndSessionEndpoint" for "/connect/endsession/callback" (f7642de5)
2017-06-23T13:19:18.9754485-03:00 0HL5Q9TP0KMSU [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:19:18.9754485-03:00 0HL5Q9TP0KMST [INF] Request finished in 10.6155ms 200 application/javascript (15c52c40)
2017-06-23T13:19:18.9784499-03:00 0HL5Q9TP0KMSU [INF] Request finished in 4.6693ms 200 text/css (15c52c40)
2017-06-23T13:19:18.9784499-03:00 0HL5Q9TP0KMT0 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:19:18.9804504-03:00 0HL5Q9TP0KMT0 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:19:18.9844543-03:00 0HL5Q9TP0KMT0 [INF] Request finished in 5.2519ms 200 application/javascript (15c52c40)
2017-06-23T13:19:18.9904579-03:00 0HL5Q9TP0KMT1 [INF] Request starting HTTP/1.1 GET http://localhost:4000/js/signout-redirect.js   (e5be5b71)
2017-06-23T13:19:18.9924593-03:00 0HL5Q9TP0KMT1 [INF] Sending file. Request path: '"/js/signout-redirect.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\js\signout-redirect.js"' (27b0a520)
2017-06-23T13:19:18.9944655-03:00 0HL5Q9TP0KMT1 [INF] Request finished in 4.0843ms 200 application/javascript (15c52c40)
2017-06-23T13:19:18.9949660-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (17ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:19.0009700-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:19.0029713-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:19.0044726-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:19.0094766-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:19.0114820-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:19.0134842-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:19.0194874-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (5ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:19.0254906-03:00 0HL5Q9TP0KMSV [INF] Executed DbCommand (4ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:19.0264935-03:00 0HL5Q9TP0KMSV [INF] Successful signout callback. Client logout iframe urls: "http://localhost:8080/#/loggedout/?&sid=011b9c8f38b36e5adba3eaee7a449cab&iss=http%3A%2F%2Flocalhost%3A4000" (76941251)
2017-06-23T13:19:19.0264935-03:00 0HL5Q9TP0KMSV [INF] Request finished in 53.2655ms 200 text/html; charset=UTF-8 (15c52c40)
2017-06-23T13:19:21.9331573-03:00 0HL5Q9TP0KMT2 [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234761561&nonce=xyz   (e5be5b71)
2017-06-23T13:19:21.9341582-03:00 0HL5Q9TP0KMT2 [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:19:21.9381617-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:21.9401622-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (1ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:21.9421631-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:21.9431644-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:21.9441648-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:21.9451657-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:21.9451657-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:21.9461674-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:21.9471679-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:21.9921974-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:21.9987067-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:22.0077134-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:22.0452408-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (37ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.0752625-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.0962747-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:22.1353084-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:22.1363089-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:22.1373093-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:22.1403111-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:22.1403111-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.1413124-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.1423120-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:22.1423120-03:00 0HL5Q9TP0KMT2 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:22.1433125-03:00 0HL5Q9TP0KMT2 [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234761561\",
  \"Nonce\": \"xyz\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234761561\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:19:22.1433125-03:00 0HL5Q9TP0KMT2 [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T13:19:22.1433125-03:00 0HL5Q9TP0KMT2 [INF] Request finished in 210.2853ms 302  (15c52c40)
2017-06-23T13:19:22.1483165-03:00 0HL5Q9TP0KMT3 [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234761561%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:19:22.1493173-03:00 0HL5Q9TP0KMT3 [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234761561&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:19:22.1513183-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:22.1513183-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:22.1523191-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:22.1523191-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:22.1533200-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:22.1533200-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:22.1543205-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:22.1553238-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:22.1563214-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:22.1593236-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:22.1603253-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:22.1613262-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:22.1623258-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.1623258-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.1633259-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:22.1633259-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:22.1643268-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:22.1653280-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:22.1663289-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:22.1673298-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.1673298-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:22.1683298-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:22.1683298-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:22.1703312-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:22.1703312-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:22.1713312-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:22.1713312-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:22.1723342-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:22.1733338-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:22.1753343-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:22.1753343-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:22.1753343-03:00 0HL5Q9TP0KMT3 [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:22.1763352-03:00 0HL5Q9TP0KMT3 [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:19:22.1773357-03:00 0HL5Q9TP0KMT3 [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 28.781ms (afa2e885)
2017-06-23T13:19:22.1773357-03:00 0HL5Q9TP0KMT3 [INF] Request finished in 29.7425ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:19:22.3571559-03:00 0HL5Q9TP0KMT4 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/font-awesome.min.css   (e5be5b71)
2017-06-23T13:19:22.3571559-03:00 0HL5Q9TP0KMT4 [INF] Sending file. Request path: '"/css/font-awesome.min.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\font-awesome.min.css"' (27b0a520)
2017-06-23T13:19:22.3581572-03:00 0HL5Q9TP0KMT4 [INF] Request finished in 1.0177ms 200 text/css (15c52c40)
2017-06-23T13:19:22.4972615-03:00 0HL5Q9TP0KMT5 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/style.css   (e5be5b71)
2017-06-23T13:19:22.4977627-03:00 0HL5Q9TP0KMT6 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/jquery/jquery.js   (e5be5b71)
2017-06-23T13:19:22.4977627-03:00 0HL5Q9TP0KMT7 [INF] Request starting HTTP/1.1 GET http://localhost:4000/css/simple-line-icons.css   (e5be5b71)
2017-06-23T13:19:22.4982627-03:00 0HL5Q9TP0KMT5 [INF] Sending file. Request path: '"/css/style.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\style.css"' (27b0a520)
2017-06-23T13:19:22.4982627-03:00 0HL5Q9TP0KMT6 [INF] Sending file. Request path: '"/lib/jquery/jquery.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\jquery\jquery.js"' (27b0a520)
2017-06-23T13:19:22.4987669-03:00 0HL5Q9TP0KMT7 [INF] Sending file. Request path: '"/css/simple-line-icons.css"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\css\simple-line-icons.css"' (27b0a520)
2017-06-23T13:19:22.4992624-03:00 0HL5Q9TP0KMT7 [INF] Request finished in 1.4738ms 200 text/css (15c52c40)
2017-06-23T13:19:22.4992624-03:00 0HL5Q9TP0KMT8 [INF] Request starting HTTP/1.1 GET http://localhost:4000/lib/bootstrap/js/bootstrap.js   (e5be5b71)
2017-06-23T13:19:22.4997632-03:00 0HL5Q9TP0KMT8 [INF] Sending file. Request path: '"/lib/bootstrap/js/bootstrap.js"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\lib\bootstrap\js\bootstrap.js"' (27b0a520)
2017-06-23T13:19:22.5002633-03:00 0HL5Q9TP0KMT6 [INF] Request finished in 2.434ms 200 application/javascript (15c52c40)
2017-06-23T13:19:22.5002633-03:00 0HL5Q9TP0KMT5 [INF] Request finished in 3.2333ms 200 text/css (15c52c40)
2017-06-23T13:19:22.5007633-03:00 0HL5Q9TP0KMT8 [INF] Request finished in 1.1482ms 200 application/javascript (15c52c40)
2017-06-23T13:19:22.9489364-03:00 0HL5Q9TP0KMT9 [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.woff2?v=2.4.0   (e5be5b71)
2017-06-23T13:19:22.9489364-03:00 0HL5Q9TP0KMT9 [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.woff2"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.woff2"' (27b0a520)
2017-06-23T13:19:22.9499369-03:00 0HL5Q9TP0KMT9 [INF] Request finished in 0.89ms 200 application/font-woff2 (15c52c40)
2017-06-23T13:19:23.1089864-03:00 0HL5Q9TP0KMTA [INF] Request starting HTTP/1.1 GET http://localhost:4000/fonts/Simple-Line-Icons.ttf?v=2.4.0   (e5be5b71)
2017-06-23T13:19:23.1094844-03:00 0HL5Q9TP0KMTA [INF] Sending file. Request path: '"/fonts/Simple-Line-Icons.ttf"'. Physical path: '"C:\Pessoal\calemas-erp\Calemas.Erp.Sso.Api\wwwroot\fonts\Simple-Line-Icons.ttf"' (27b0a520)
2017-06-23T13:19:23.1099852-03:00 0HL5Q9TP0KMTA [INF] Request finished in 0.9717ms 200 application/x-font-ttf (15c52c40)
2017-06-23T13:19:51.4671158-03:00 0HL5Q9TP0KMTB [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234791157&nonce=xyz   (e5be5b71)
2017-06-23T13:19:51.4681162-03:00 0HL5Q9TP0KMTB [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize" (f7642de5)
2017-06-23T13:19:51.4701176-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:51.4701176-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:51.4711176-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:51.4721193-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:51.4721193-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:51.4731186-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:51.4741194-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:51.4741194-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:51.4751203-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:51.4761224-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:51.4771221-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:51.4781217-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:51.4791222-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.4791222-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.4801230-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:51.4801230-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:51.4821256-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:51.4821256-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:51.4831261-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:51.4831261-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.4841269-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.4841269-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:51.4851262-03:00 0HL5Q9TP0KMTB [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:51.4851262-03:00 0HL5Q9TP0KMTB [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"anonymous\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234791157\",
  \"Nonce\": \"xyz\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234791157\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:19:51.4851262-03:00 0HL5Q9TP0KMTB [INF] Showing login: User is not authenticated (4b8d50b2)
2017-06-23T13:19:51.4861270-03:00 0HL5Q9TP0KMTB [INF] Request finished in 18.6216ms 302  (15c52c40)
2017-06-23T13:19:51.4911310-03:00 0HL5Q9TP0KMTC [INF] Request starting HTTP/1.1 GET http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234791157%26nonce%3Dxyz   (e5be5b71)
2017-06-23T13:19:51.4931348-03:00 0HL5Q9TP0KMTC [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234791157&nonce=xyz"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:19:51.4951349-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:51.4951349-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:51.4961341-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:51.4961341-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:51.4971350-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:51.4971350-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:51.4981351-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:51.4981351-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:51.4991359-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:51.5001372-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:51.5011369-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:51.5021382-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:51.5031382-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.5031382-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.5041391-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:51.5051404-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:51.5071433-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:51.5081422-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:51.5091439-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:51.5101443-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.5101443-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:51.5111452-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:51.5111452-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:51.5141486-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:51.5141486-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:51.5151462-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:51.5151462-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:51.5151462-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:51.5161475-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:51.5161475-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:51.5171476-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:51.5171476-03:00 0HL5Q9TP0KMTC [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:51.5181480-03:00 0HL5Q9TP0KMTC [INF] Executing ViewResult, running view at path "/Views/Account/Login.cshtml". (9707eebe)
2017-06-23T13:19:51.5191497-03:00 0HL5Q9TP0KMTC [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 26.4755ms (afa2e885)
2017-06-23T13:19:51.5191497-03:00 0HL5Q9TP0KMTC [INF] Request finished in 27.5141ms 200 text/html; charset=utf-8 (15c52c40)
2017-06-23T13:19:54.5225087-03:00 0HL5Q9TP0KMTD [INF] Request starting HTTP/1.1 POST http://localhost:4000/account/login?returnUrl=%2Fconnect%2Fauthorize%2Flogin%3Fclient_id%3Dssocalemas%26redirect_uri%3Dhttp%253A%252F%252Flocalhost%253A8080%252F%2523%252Fauthorized%252F%253F%26response_type%3Did_token%2520token%26scope%3Dopenid%2520calemas%26state%3D1498234791157%26nonce%3Dxyz application/x-www-form-urlencoded 492 (e5be5b71)
2017-06-23T13:19:54.5235067-03:00 0HL5Q9TP0KMTD [INF] Executing action method "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" with arguments (["IdentityServer4.Quickstart.UI.LoginInputModel"]) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:19:54.5275098-03:00 0HL5Q9TP0KMTD [INF] Executed DbCommand (1ms) [Parameters=[@__userName_0='?' (Size = 4000), @__password_1='?' (Size = 4000)], CommandType='Text', CommandTimeout='30']
SELECT TOP(2) [_].[Id], [_].[Account], [_].[Password], [_].[UserAlterDate], [_].[UserAlterId], [_].[UserCreateDate], [_].[UserCreateId]
FROM [Colaborador] AS [_]
WHERE ([_].[Account] = @__userName_0) AND ([_].[Password] = @__password_1) (6438bdd5)
2017-06-23T13:19:54.5275098-03:00 0HL5Q9TP0KMTD [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:19:54.5275098-03:00 0HL5Q9TP0KMTD [INF] Executing RedirectResult, redirecting to "/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234791157&nonce=xyz". (d98d540e)
2017-06-23T13:19:54.5285094-03:00 0HL5Q9TP0KMTD [INF] Executed action "IdentityServer4.Quickstart.UI.AccountController.Login (Calemas.Erp.Sso.Api)" in 5.0388ms (afa2e885)
2017-06-23T13:19:54.5285094-03:00 0HL5Q9TP0KMTD [INF] Request finished in 6.5184ms 302  (15c52c40)
2017-06-23T13:19:54.5345143-03:00 0HL5Q9TP0KMTE [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/authorize/login?client_id=ssocalemas&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F%23%2Fauthorized%2F%3F&response_type=id_token%20token&scope=openid%20calemas&state=1498234791157&nonce=xyz   (e5be5b71)
2017-06-23T13:19:54.5345143-03:00 0HL5Q9TP0KMTE [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:19:54.5355143-03:00 0HL5Q9TP0KMTE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:54.5355143-03:00 0HL5Q9TP0KMTE [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.AuthorizeEndpoint" for "/connect/authorize/login" (f7642de5)
2017-06-23T13:19:54.5355143-03:00 0HL5Q9TP0KMTE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:54.5375169-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:54.5385194-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:54.5395170-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:54.5395170-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:54.5415187-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:54.5425212-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:54.5425212-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:54.5435205-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:54.5435205-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:54.5455210-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:54.5455210-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:54.5475227-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:54.5475227-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:54.5485228-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:54.5485228-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:54.5495237-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:54.5505245-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:54.5505245-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:54.5515250-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [api].[Id], [api].[Description], [api].[DisplayName], [api].[Enabled], [api].[Name]
FROM [ApiResources] AS [api]
WHERE EXISTS (
    SELECT 1
    FROM [ApiScopes] AS [x]
    WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId]))
ORDER BY [api].[Id] (6438bdd5)
2017-06-23T13:19:54.5525271-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a3].[Id], [a3].[ApiResourceId], [a3].[Type]
FROM [ApiClaims] AS [a3]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a3].[ApiResourceId] = [api].[Id]))
ORDER BY [a3].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:54.5525271-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a2].[Id], [a2].[ApiResourceId], [a2].[Description], [a2].[Expiration], [a2].[Type], [a2].[Value]
FROM [ApiSecrets] AS [a2]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a2].[ApiResourceId] = [api].[Id]))
ORDER BY [a2].[ApiResourceId] (6438bdd5)
2017-06-23T13:19:54.5535272-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a].[Id], [a].[ApiResourceId], [a].[Description], [a].[DisplayName], [a].[Emphasize], [a].[Name], [a].[Required], [a].[ShowInDiscoveryDocument]
FROM [ApiScopes] AS [a]
WHERE EXISTS (
    SELECT 1
    FROM [ApiResources] AS [api]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiScopes] AS [x]
        WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
ORDER BY [a].[ApiResourceId], [a].[Id] (6438bdd5)
2017-06-23T13:19:54.5535272-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [a0].[Id], [a0].[ApiScopeId], [a0].[Type]
FROM [ApiScopeClaims] AS [a0]
INNER JOIN (
    SELECT DISTINCT [a].[ApiResourceId], [a].[Id]
    FROM [ApiScopes] AS [a]
    WHERE EXISTS (
        SELECT 1
        FROM [ApiResources] AS [api]
        WHERE EXISTS (
            SELECT 1
            FROM [ApiScopes] AS [x]
            WHERE [x].[Name] IN (N'openid', N'calemas') AND ([api].[Id] = [x].[ApiResourceId])) AND ([a].[ApiResourceId] = [api].[Id]))
) AS [a1] ON [a0].[ApiScopeId] = [a1].[Id]
ORDER BY [a1].[ApiResourceId], [a1].[Id] (6438bdd5)
2017-06-23T13:19:54.5545276-03:00 0HL5Q9TP0KMTE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:54.5545276-03:00 0HL5Q9TP0KMTE [INF] ValidatedAuthorizeRequest
"{
  \"ClientId\": \"ssocalemas\",
  \"ClientName\": \"SPA Client Implicit\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"AllowedRedirectUris\": [
    \"http://localhost:8080/#/authorized/?\"
  ],
  \"SubjectId\": \"1\",
  \"ResponseType\": \"id_token token\",
  \"ResponseMode\": \"fragment\",
  \"GrantType\": \"implicit\",
  \"RequestedScopes\": \"openid calemas\",
  \"State\": \"1498234791157\",
  \"Nonce\": \"xyz\",
  \"SessionId\": \"ac1106125cd80b2e1741b625bcbc1807\",
  \"Raw\": {
    \"client_id\": \"ssocalemas\",
    \"redirect_uri\": \"http://localhost:8080/#/authorized/?\",
    \"response_type\": \"id_token token\",
    \"scope\": \"openid calemas\",
    \"state\": \"1498234791157\",
    \"nonce\": \"xyz\"
  }
}" (9a175e33)
2017-06-23T13:19:54.5585299-03:00 0HL5Q9TP0KMTE [INF] Executed DbCommand (2ms) [Parameters=[@__key_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Key], [x].[ClientId], [x].[CreationTime], [x].[Data], [x].[Expiration], [x].[SubjectId], [x].[Type]
FROM [PersistedGrants] AS [x]
WHERE [x].[Key] = @__key_0 (6438bdd5)
2017-06-23T13:19:54.5690419-03:00 0HL5Q9TP0KMTE [INF] Authorize endpoint response
"{
  \"SubjectId\": \"1\",
  \"ClientId\": \"ssocalemas\",
  \"RedirectUri\": \"http://localhost:8080/#/authorized/?\",
  \"State\": \"1498234791157\",
  \"Scope\": \"openid calemas\"
}" (5993a9fa)
2017-06-23T13:19:54.5695403-03:00 0HL5Q9TP0KMTE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:54.5695403-03:00 0HL5Q9TP0KMTE [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:19:54.5695403-03:00 0HL5Q9TP0KMTE [INF] AuthenticationScheme: "idsrv" signed in. (c66dd7e7)
2017-06-23T13:19:54.5700408-03:00 0HL5Q9TP0KMTE [INF] Request finished in 35.1755ms 302  (15c52c40)
2017-06-23T13:19:56.8417789-03:00 0HL5Q9TP0KMTF [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:19:56.8417789-03:00 0HL5Q9TP0KMTF [INF] Request finished in 0.438ms 204  (15c52c40)
2017-06-23T13:19:57.1591520-03:00 0HL5Q9TP0KMTG [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:19:57.1601525-03:00 0HL5Q9TP0KMTG [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:19:57.1601525-03:00 0HL5Q9TP0KMTG [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:19:57.1621546-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:57.1631563-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:57.1631563-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:57.1641560-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:57.1641560-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:57.1651560-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:57.1651560-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:57.1661573-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:57.1671582-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:57.1681591-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT TOP(1) [x].[Id], [x].[AbsoluteRefreshTokenLifetime], [x].[AccessTokenLifetime], [x].[AccessTokenType], [x].[AllowAccessTokensViaBrowser], [x].[AllowOfflineAccess], [x].[AllowPlainTextPkce], [x].[AllowRememberConsent], [x].[AlwaysIncludeUserClaimsInIdToken], [x].[AlwaysSendClientClaims], [x].[AuthorizationCodeLifetime], [x].[ClientId], [x].[ClientName], [x].[ClientUri], [x].[EnableLocalLogin], [x].[Enabled], [x].[IdentityTokenLifetime], [x].[IncludeJwtId], [x].[LogoUri], [x].[LogoutSessionRequired], [x].[LogoutUri], [x].[PrefixClientClaims], [x].[ProtocolType], [x].[RefreshTokenExpiration], [x].[RefreshTokenUsage], [x].[RequireClientSecret], [x].[RequireConsent], [x].[RequirePkce], [x].[SlidingRefreshTokenLifetime], [x].[UpdateAccessTokenClaimsOnRefresh]
FROM [Clients] AS [x]
WHERE [x].[ClientId] = @__clientId_0
ORDER BY [x].[Id] (6438bdd5)
2017-06-23T13:19:57.1691661-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c6].[Id], [c6].[ClientId], [c6].[Origin]
FROM [ClientCorsOrigins] AS [c6]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x7] ON [c6].[ClientId] = [x7].[Id]
ORDER BY [x7].[Id] (6438bdd5)
2017-06-23T13:19:57.1696698-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c5].[Id], [c5].[ClientId], [c5].[Provider]
FROM [ClientIdPRestrictions] AS [c5]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x6] ON [c5].[ClientId] = [x6].[Id]
ORDER BY [x6].[Id] (6438bdd5)
2017-06-23T13:19:57.1706707-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c4].[Id], [c4].[ClientId], [c4].[Type], [c4].[Value]
FROM [ClientClaims] AS [c4]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x5] ON [c4].[ClientId] = [x5].[Id]
ORDER BY [x5].[Id] (6438bdd5)
2017-06-23T13:19:57.1736729-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (2ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c3].[Id], [c3].[ClientId], [c3].[Description], [c3].[Expiration], [c3].[Type], [c3].[Value]
FROM [ClientSecrets] AS [c3]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x4] ON [c3].[ClientId] = [x4].[Id]
ORDER BY [x4].[Id] (6438bdd5)
2017-06-23T13:19:57.1741733-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c2].[Id], [c2].[ClientId], [c2].[Scope]
FROM [ClientScopes] AS [c2]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x3] ON [c2].[ClientId] = [x3].[Id]
ORDER BY [x3].[Id] (6438bdd5)
2017-06-23T13:19:57.1746734-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c1].[Id], [c1].[ClientId], [c1].[PostLogoutRedirectUri]
FROM [ClientPostLogoutRedirectUris] AS [c1]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x2] ON [c1].[ClientId] = [x2].[Id]
ORDER BY [x2].[Id] (6438bdd5)
2017-06-23T13:19:57.1751738-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c0].[Id], [c0].[ClientId], [c0].[RedirectUri]
FROM [ClientRedirectUris] AS [c0]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x1] ON [c0].[ClientId] = [x1].[Id]
ORDER BY [x1].[Id] (6438bdd5)
2017-06-23T13:19:57.1756738-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[@__clientId_0='?' (Size = 200)], CommandType='Text', CommandTimeout='30']
SELECT [c].[Id], [c].[ClientId], [c].[GrantType]
FROM [ClientGrantTypes] AS [c]
INNER JOIN (
    SELECT DISTINCT TOP(1) [x].[Id]
    FROM [Clients] AS [x]
    WHERE [x].[ClientId] = @__clientId_0
    ORDER BY [x].[Id]
) AS [x0] ON [c].[ClientId] = [x0].[Id]
ORDER BY [x0].[Id] (6438bdd5)
2017-06-23T13:19:57.1771747-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [identityResource].[Id], [identityResource].[Description], [identityResource].[DisplayName], [identityResource].[Emphasize], [identityResource].[Enabled], [identityResource].[Name], [identityResource].[Required], [identityResource].[ShowInDiscoveryDocument]
FROM [IdentityResources] AS [identityResource]
WHERE [identityResource].[Name] IN (N'openid', N'calemas')
ORDER BY [identityResource].[Id] (6438bdd5)
2017-06-23T13:19:57.1776752-03:00 0HL5Q9TP0KMTG [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='Text', CommandTimeout='30']
SELECT [i].[Id], [i].[IdentityResourceId], [i].[Type]
FROM [IdentityClaims] AS [i]
WHERE EXISTS (
    SELECT 1
    FROM [IdentityResources] AS [identityResource]
    WHERE [identityResource].[Name] IN (N'openid', N'calemas') AND ([i].[IdentityResourceId] = [identityResource].[Id]))
ORDER BY [i].[IdentityResourceId] (6438bdd5)
2017-06-23T13:19:57.1781756-03:00 0HL5Q9TP0KMTG [INF] Profile service returned to the following claim types: "sub" (a9217bec)
2017-06-23T13:19:57.1786760-03:00 0HL5Q9TP0KMTG [INF] Request finished in 19.2001ms 200 application/json (15c52c40)
2017-06-23T13:20:29.2350271-03:00  [INF] User profile is available. Using '"C:\Users\bruun\AppData\Local\ASP.NET\DataProtection-Keys"' as key repository and Windows DPAPI to encrypt keys at rest. (7ac5e29c)
2017-06-23T13:20:29.6258873-03:00 0HL5QAF1SVRTQ [INF] Request starting HTTP/1.1 GET http://localhost:4000/api/Health   (e5be5b71)
2017-06-23T13:20:29.8905963-03:00 0HL5QAF1SVRTQ [INF] HttpContext.User merged via AutomaticAuthentication from authenticationScheme: "idsrv". (bdba1d38)
2017-06-23T13:20:29.9156124-03:00 0HL5QAF1SVRTQ [INF] AuthenticationScheme: "idsrv" was successfully authenticated. (1805f3b3)
2017-06-23T13:20:30.5785695-03:00 0HL5QAF1SVRTQ [INF] Executing action method "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" with arguments (null) - ModelState is Valid (ba7f4ac2)
2017-06-23T13:20:30.6656275-03:00 0HL5QAF1SVRTR [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:20:30.6826391-03:00 0HL5QAF1SVRTQ [INF] Executing ObjectResult, writing value "Microsoft.AspNetCore.Mvc.ControllerContext". (4e968210)
2017-06-23T13:20:30.8002180-03:00 0HL5QAF1SVRTR [INF] Request finished in 128.8799ms 204  (15c52c40)
2017-06-23T13:20:30.8102243-03:00 0HL5QAF1SVRTQ [INF] Executed action "Calemas.Erp.Sso.Api.Controllers.HealthController.Get (Calemas.Erp.Sso.Api)" in 417.1752ms (afa2e885)
2017-06-23T13:20:30.8257345-03:00 0HL5QAF1SVRTQ [INF] Request finished in 1238.4457ms 200 text/plain; charset=utf-8 (15c52c40)
2017-06-23T13:20:30.9668290-03:00 0HL5QAF1SVRTS [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:20:30.9918455-03:00 0HL5QAF1SVRTS [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:20:31.0103580-03:00 0HL5QAF1SVRTS [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:20:31.6317731-03:00 0HL5QAF1SVRTS [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '9de3e7ac17803dc3eca7629517e424ad', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"9de3e7ac17803dc3eca7629517e424ad\"}.{\"nbf\":1498234794,\"exp\":1498238394,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498234794,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"openid\",\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:20:31.6337740-03:00 0HL5QAF1SVRTS [ERR] invalid_token (489b3335)
2017-06-23T13:20:31.6417798-03:00 0HL5QAF1SVRTS [INF] Request finished in 674.8304ms 401  (15c52c40)
2017-06-23T13:21:28.3626172-03:00 0HL5QAF1SVRTT [INF] Request starting HTTP/1.1 OPTIONS http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:21:28.3626172-03:00 0HL5QAF1SVRTT [INF] Request finished in 0.518ms 204  (15c52c40)
2017-06-23T13:21:28.6493331-03:00 0HL5QAF1SVRTU [INF] Request starting HTTP/1.1 GET http://localhost:4000/connect/userinfo/?   (e5be5b71)
2017-06-23T13:21:28.6498332-03:00 0HL5QAF1SVRTU [INF] Invoking IdentityServer endpoint: "IdentityServer4.Endpoints.UserInfoEndpoint" for "/connect/userinfo/" (f7642de5)
2017-06-23T13:21:28.6498332-03:00 0HL5QAF1SVRTU [INF] ValidateAsync: Locating bearer token (a4b419b4)
2017-06-23T13:21:28.6518390-03:00 0HL5QAF1SVRTU [ERR] JWT token validation error: "Microsoft.IdentityModel.Tokens.SecurityTokenSignatureKeyNotFoundException: IDX10501: Signature validation failed. Unable to match 'kid': '9de3e7ac17803dc3eca7629517e424ad', 
token: '{\"alg\":\"RS256\",\"typ\":\"JWT\",\"kid\":\"9de3e7ac17803dc3eca7629517e424ad\"}.{\"nbf\":1498234794,\"exp\":1498238394,\"iss\":\"http://localhost:4000\",\"aud\":[\"http://localhost:4000/resources\",\"ssocalemas\"],\"client_id\":\"ssocalemas\",\"sub\":\"1\",\"auth_time\":1498234794,\"idp\":\"local\",\"name\":[\"admin\",\"Administrador\"],\"email\":\"admin@email.com.br\",\"role\":\"admin\",\"scope\":[\"openid\",\"calemas\"],\"amr\":[\"pwd\"]}'.
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateSignature(String token, TokenValidationParameters validationParameters)
   at System.IdentityModel.Tokens.Jwt.JwtSecurityTokenHandler.ValidateToken(String token, TokenValidationParameters validationParameters, SecurityToken& validatedToken)
   at IdentityServer4.Validation.TokenValidator.<ValidateJwtAsync>d__11.MoveNext()" (2ea1dafb)
2017-06-23T13:21:28.6528395-03:00 0HL5QAF1SVRTU [ERR] invalid_token (489b3335)
2017-06-23T13:21:28.6528395-03:00 0HL5QAF1SVRTU [INF] Request finished in 4.042ms 401  (15c52c40)
